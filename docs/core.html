<!DOCTYPE html>
<html>
<head>
<title>Main Documentation</title>
<meta name="generator" content="http://txt2tags.org">
<style>
body{background-color:#fff;color:#000;}
hr{background-color:#000;border:0;color:#000;}
hr.heavy{height:5px;}
hr.light{height:1px;}
img{border:0;display:block;}
img.right{margin:0 0 0 auto;}
img.center{border:0;margin:0 auto;}
table th,table td{padding:4px;}
.center,header{text-align:center;}
table.center {margin-left:auto; margin-right:auto;}
.right{text-align:right;}
.left{text-align:left;}
.tableborder,.tableborder td,.tableborder th{border:1px solid #000;}
.underline{text-decoration:underline;}
pre{background-color:#e6e6e6;padding:5px 3px}
</style>
</head>
<body>
<header>
<hgroup>
<h1>Main Documentation</h1>
<h2>SaltOS 4.0 r1924</h2>
<h3>April 2025</h3>
</hgroup>
</header>
<article>

<nav>
<div class="body" id="body">

  <ul>
  <li><a href="#toc1">1. Actions</a>
    <ul>
    <li><a href="#toc2">1.1. Add log action</a>
    </li>
    <li><a href="#toc3">1.2. Application action</a>
    </li>
    <li><a href="#toc4">1.3. Authentication helper module</a>
    </li>
    <li><a href="#toc5">1.4. Garbage Collector action</a>
    </li>
    <li><a href="#toc6">1.5. Garbage Collector action</a>
    </li>
    <li><a href="#toc7">1.6. BarCode action</a>
    </li>
    <li><a href="#toc8">1.7. Make indexing action</a>
    </li>
    <li><a href="#toc9">1.8. Make indexing action</a>
    </li>
    <li><a href="#toc10">1.9. Ping action</a>
    </li>
    <li><a href="#toc11">1.10. Garbage Collector action</a>
    </li>
    <li><a href="#toc12">1.11. DB Schema action</a>
    </li>
    <li><a href="#toc13">1.12. Add files action</a>
    </li>
    </ul>
  </li>
  <li><a href="#toc14">2. Autoload</a>
    <ul>
    <li><a href="#toc15">2.1. Apps helper module</a>
      <ul>
      <li><a href="#toc16">2.1.1. Apps helper function</a>
      </li>
      <li><a href="#toc17">2.1.2. Subtables helper</a>
      </li>
      <li><a href="#toc18">2.1.3. Id to App</a>
      </li>
      <li><a href="#toc19">2.1.4. App to Id</a>
      </li>
      <li><a href="#toc20">2.1.5. Id to Table</a>
      </li>
      <li><a href="#toc21">2.1.6. App to Table</a>
      </li>
      <li><a href="#toc22">2.1.7. Table to Id</a>
      </li>
      <li><a href="#toc23">2.1.8. Table to App</a>
      </li>
      <li><a href="#toc24">2.1.9. Id to Subtables</a>
      </li>
      <li><a href="#toc25">2.1.10. App to Subtables</a>
      </li>
      <li><a href="#toc26">2.1.11. Table to Subtables</a>
      </li>
      <li><a href="#toc27">2.1.12. App Exists</a>
      </li>
      <li><a href="#toc28">2.1.13. App to Index</a>
      </li>
      <li><a href="#toc29">2.1.14. App to Control</a>
      </li>
      <li><a href="#toc30">2.1.15. App to Version</a>
      </li>
      <li><a href="#toc31">2.1.16. App to Files</a>
      </li>
      <li><a href="#toc32">2.1.17. App to Notes</a>
      </li>
      <li><a href="#toc33">2.1.18. App to Log</a>
      </li>
      <li><a href="#toc34">2.1.19. Subtable to Id</a>
      </li>
      <li><a href="#toc35">2.1.20. Subtable to App</a>
      </li>
      <li><a href="#toc36">2.1.21. Subtable to table</a>
      </li>
      <li><a href="#toc37">2.1.22. Table Exists</a>
      </li>
      <li><a href="#toc38">2.1.23. Subtable Exists</a>
      </li>
      <li><a href="#toc39">2.1.24. Id to Field</a>
      </li>
      <li><a href="#toc40">2.1.25. App to Field</a>
      </li>
      <li><a href="#toc41">2.1.26. Table to Field</a>
      </li>
      <li><a href="#toc42">2.1.27. Id to Name</a>
      </li>
      <li><a href="#toc43">2.1.28. App to Name</a>
      </li>
      <li><a href="#toc44">2.1.29. Table to Name</a>
      </li>
      <li><a href="#toc45">2.1.30. Detect apps files</a>
      </li>
      <li><a href="#toc46">2.1.31. Current app</a>
      </li>
      <li><a href="#toc47">2.1.32. Detect app file</a>
      </li>
      <li><a href="#toc48">2.1.33. Detect app folder</a>
      </li>
      <li><a href="#toc49">2.1.34. Make Apps File helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc50">2.2. Array helper module</a>
      <ul>
      <li><a href="#toc51">2.2.1. Null to array converter</a>
      </li>
      <li><a href="#toc52">2.2.2. Join attr value</a>
      </li>
      <li><a href="#toc53">2.2.3. Get Node helper</a>
      </li>
      <li><a href="#toc54">2.2.4. Get Value helper</a>
      </li>
      <li><a href="#toc55">2.2.5. Get Attr helper</a>
      </li>
      <li><a href="#toc56">2.2.6. Add Node helper</a>
      </li>
      <li><a href="#toc57">2.2.7. Set Node helper</a>
      </li>
      <li><a href="#toc58">2.2.8. Del Node helper</a>
      </li>
      <li><a href="#toc59">2.2.9. Filter helper</a>
      </li>
      <li><a href="#toc60">2.2.10. Filter Recursive helper</a>
      </li>
      <li><a href="#toc61">2.2.11. Apply Patch</a>
      </li>
      <li><a href="#toc62">2.2.12. Apply Patch Recursive helper</a>
      </li>
      <li><a href="#toc63">2.2.13. Is attr value</a>
      </li>
      <li><a href="#toc64">2.2.14. Arrays to array</a>
      </li>
      <li><a href="#toc65">2.2.15. Xpath search array</a>
      </li>
      <li><a href="#toc66">2.2.16. Xpath search first</a>
      </li>
      <li><a href="#toc67">2.2.17. Xpath search first</a>
      </li>
      <li><a href="#toc68">2.2.18. Array transpose</a>
      </li>
      <li><a href="#toc69">2.2.19. Array lowercase</a>
      </li>
      <li><a href="#toc70">2.2.20. Array key lowercase</a>
      </li>
      <li><a href="#toc71">2.2.21. Array key search</a>
      </li>
      <li><a href="#toc72">2.2.22. Explode With Quotes</a>
      </li>
      <li><a href="#toc73">2.2.23. Grep helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc74">2.3. Compatibility helper module</a>
      <ul>
      <li><a href="#toc75">2.3.1. Array Key Last</a>
      </li>
      <li><a href="#toc76">2.3.2. Array Key First</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc77">2.4. Config helper module</a>
      <ul>
      <li><a href="#toc78">2.4.1. Get config</a>
      </li>
      <li><a href="#toc79">2.4.2. Set config</a>
      </li>
      <li><a href="#toc80">2.4.3. Detect config files</a>
      </li>
      <li><a href="#toc81">2.4.4. Get config array</a>
      </li>
      <li><a href="#toc82">2.4.5. Prepare Config Files</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc83">2.5. Database helper module</a>
      <ul>
      <li><a href="#toc84">2.5.1. DB Connect</a>
      </li>
      <li><a href="#toc85">2.5.2. DB Check</a>
      </li>
      <li><a href="#toc86">2.5.3. DB Escape</a>
      </li>
      <li><a href="#toc87">2.5.4. DB Query</a>
      </li>
      <li><a href="#toc88">2.5.5. DB Fetch Row</a>
      </li>
      <li><a href="#toc89">2.5.6. DB Fetch All</a>
      </li>
      <li><a href="#toc90">2.5.7. DB Num Rows</a>
      </li>
      <li><a href="#toc91">2.5.8. DB Num Fields</a>
      </li>
      <li><a href="#toc92">2.5.9. DB Field Name</a>
      </li>
      <li><a href="#toc93">2.5.10. DB Last Insert ID</a>
      </li>
      <li><a href="#toc94">2.5.11. DB Free</a>
      </li>
      <li><a href="#toc95">2.5.12. DB Disconnect</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc96">2.6. Datetime helper module</a>
      <ul>
      <li><a href="#toc97">2.6.1. Current Date</a>
      </li>
      <li><a href="#toc98">2.6.2. Current Time</a>
      </li>
      <li><a href="#toc99">2.6.3. Current DateTime</a>
      </li>
      <li><a href="#toc100">2.6.4. Current Decimals</a>
      </li>
      <li><a href="#toc101">2.6.5. Current DateTime Decimals</a>
      </li>
      <li><a href="#toc102">2.6.6. Dateval</a>
      </li>
      <li><a href="#toc103">2.6.7. Day of a Month helper</a>
      </li>
      <li><a href="#toc104">2.6.8. Timeval</a>
      </li>
      <li><a href="#toc105">2.6.9. Datetimeval</a>
      </li>
      <li><a href="#toc106">2.6.10. Time to Seconds</a>
      </li>
      <li><a href="#toc107">2.6.11. Seconds to Time</a>
      </li>
      <li><a href="#toc108">2.6.12. Current Day Of Week</a>
      </li>
      <li><a href="#toc109">2.6.13. Datetime format</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc110">2.7. Error helper module</a>
      <ul>
      <li><a href="#toc111">2.7.1. Show PHP Error</a>
      </li>
      <li><a href="#toc112">2.7.2. Do Message Error</a>
      </li>
      <li><a href="#toc113">2.7.3. Program Handlers</a>
      </li>
      <li><a href="#toc114">2.7.4. Error Handler</a>
      </li>
      <li><a href="#toc115">2.7.5. Exception Handler</a>
      </li>
      <li><a href="#toc116">2.7.6. Shutdown Handler</a>
      </li>
      <li><a href="#toc117">2.7.7. Get code from trace</a>
      </li>
      <li><a href="#toc118">2.7.8. Show JSON Error</a>
      </li>
      <li><a href="#toc119">2.7.9. Get code from file and line</a>
      </li>
      <li><a href="#toc120">2.7.10. Detect Recursion</a>
      </li>
      <li><a href="#toc121">2.7.11. Overload error handler</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc122">2.8. Execution helper module</a>
      <ul>
      <li><a href="#toc123">2.8.1. OB Passthru</a>
      </li>
      <li><a href="#toc124">2.8.2. Check Commands</a>
      </li>
      <li><a href="#toc125">2.8.3. Is Disabled Function</a>
      </li>
      <li><a href="#toc126">2.8.4. Exec Timeout</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc127">2.9. File utils helper module</a>
      <ul>
      <li><a href="#toc128">2.9.1. Get Directory</a>
      </li>
      <li><a href="#toc129">2.9.2. Get Temp File</a>
      </li>
      <li><a href="#toc130">2.9.3. Get Cache File</a>
      </li>
      <li><a href="#toc131">2.9.4. Cache Exists</a>
      </li>
      <li><a href="#toc132">2.9.5. URL Get Contents</a>
      </li>
      <li><a href="#toc133">2.9.6. URL Get Contents helper</a>
      </li>
      <li><a href="#toc134">2.9.7. Extension</a>
      </li>
      <li><a href="#toc135">2.9.8. Encode Bar Chars File</a>
      </li>
      <li><a href="#toc136">2.9.9. Realpath Protected</a>
      </li>
      <li><a href="#toc137">2.9.10. Getcwd Protected</a>
      </li>
      <li><a href="#toc138">2.9.11. Glob Protected</a>
      </li>
      <li><a href="#toc139">2.9.12. Chmod Protected</a>
      </li>
      <li><a href="#toc140">2.9.13. Fsockopen Protected</a>
      </li>
      <li><a href="#toc141">2.9.14. File with hash</a>
      </li>
      <li><a href="#toc142">2.9.15. File with min</a>
      </li>
      <li><a href="#toc143">2.9.16. File Get Contents Protected</a>
      </li>
      <li><a href="#toc144">2.9.17. Get human size</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc145">2.10. Get data helper module</a>
      <ul>
      <li><a href="#toc146">2.10.1. Get data</a>
      </li>
      <li><a href="#toc147">2.10.2. Set data</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc148">2.11. Gettext helper module</a>
      <ul>
      <li><a href="#toc149">2.11.1. Get Text function</a>
      </li>
      <li><a href="#toc150">2.11.2. Check lang format</a>
      </li>
      <li><a href="#toc151">2.11.3. Current lang</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc152">2.12. Iniset helper module</a>
      <ul>
      <li><a href="#toc153">2.12.1. Eval Iniset</a>
      </li>
      <li><a href="#toc154">2.12.2. Eval Putenv</a>
      </li>
      <li><a href="#toc155">2.12.3. According to the documentation, putenv must return false in error cases, but</a>
      </li>
      <li><a href="#toc156">2.12.4. Eval Extras</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc157">2.13. Json helper module</a>
      <ul>
      <li><a href="#toc158">2.13.1. Terminal colors</a>
      </li>
      <li><a href="#toc159">2.13.2. Json colorize</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc160">2.14. Log helper module</a>
      <ul>
      <li><a href="#toc161">2.14.1. Check Log</a>
      </li>
      <li><a href="#toc162">2.14.2. Add Log</a>
      </li>
      <li><a href="#toc163">2.14.3. Add Trace</a>
      </li>
      <li><a href="#toc164">2.14.4. Get Trace</a>
      </li>
      <li><a href="#toc165">2.14.5. Session Backtrace</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc166">2.15. Memory helper module</a>
      <ul>
      <li><a href="#toc167">2.15.1. Memory Get Free</a>
      </li>
      <li><a href="#toc168">2.15.2. Get Time Usage</a>
      </li>
      <li><a href="#toc169">2.15.3. Get Free Time</a>
      </li>
      <li><a href="#toc170">2.15.4. Init Time Get</a>
      </li>
      <li><a href="#toc171">2.15.5. Get Time helper</a>
      </li>
      <li><a href="#toc172">2.15.6. Set Max Memory Limit</a>
      </li>
      <li><a href="#toc173">2.15.7. Set Max Execution Time</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc174">2.16. Mime helper module</a>
      <ul>
      <li><a href="#toc175">2.16.1. SaltOS Content Type</a>
      </li>
      <li><a href="#toc176">2.16.2. SaltOS Content Type first helper</a>
      </li>
      <li><a href="#toc177">2.16.3. SaltOS Content Type second helper</a>
      </li>
      <li><a href="#toc178">2.16.4. Mime inline</a>
      </li>
      <li><a href="#toc179">2.16.5. SaltOS Content Type from string</a>
      </li>
      <li><a href="#toc180">2.16.6. Mime extract</a>
      </li>
      <li><a href="#toc181">2.16.7. Mime to name</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc182">2.17. Output helper module</a>
      <ul>
      <li><a href="#toc183">2.17.1. Output Handler</a>
      </li>
      <li><a href="#toc184">2.17.2. Output header helper</a>
      </li>
      <li><a href="#toc185">2.17.3. Output Handler JSON</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc186">2.18. PCOV helper module</a>
      <ul>
      <li><a href="#toc187">2.18.1. PCOV start</a>
      </li>
      <li><a href="#toc188">2.18.2. PCOV stop</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc189">2.19. Permissions helper module</a>
      <ul>
      <li><a href="#toc190">2.19.1. Check User</a>
      </li>
      <li><a href="#toc191">2.19.2. Check SQL</a>
      </li>
      <li><a href="#toc192">2.19.3. Perms helper function</a>
      </li>
      <li><a href="#toc193">2.19.4. Id to Perm</a>
      </li>
      <li><a href="#toc194">2.19.5. Perm to Id</a>
      </li>
      <li><a href="#toc195">2.19.6. Perm Exists</a>
      </li>
      <li><a href="#toc196">2.19.7. Check App Perm Id</a>
      </li>
      <li><a href="#toc197">2.19.8. User is admin</a>
      </li>
      <li><a href="#toc198">2.19.9. Merge data actions</a>
      </li>
      <li><a href="#toc199">2.19.10. App has perm</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc200">2.20. Random helper module</a>
      <ul>
      <li><a href="#toc201">2.20.1. Init Random</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc202">2.21. Semaphore helper module</a>
      <ul>
      <li><a href="#toc203">2.21.1. Semaphore Acquire</a>
      </li>
      <li><a href="#toc204">2.21.2. Semaphore Release</a>
      </li>
      <li><a href="#toc205">2.21.3. Semaphore Shutdown</a>
      </li>
      <li><a href="#toc206">2.21.4. Semaphore File</a>
      </li>
      <li><a href="#toc207">2.21.5. Semaphore helper</a>
      </li>
      <li><a href="#toc208">2.21.6. Semaphore USleep helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc209">2.22. Server helper module</a>
      <ul>
      <li><a href="#toc210">2.22.1. Get Server</a>
      </li>
      <li><a href="#toc211">2.22.2. Set Server</a>
      </li>
      <li><a href="#toc212">2.22.3. Current hash</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc213">2.23. SQL utils helper module</a>
      <ul>
      <li><a href="#toc214">2.23.1. Parse Query</a>
      </li>
      <li><a href="#toc215">2.23.2. Parse Query Type helper</a>
      </li>
      <li><a href="#toc216">2.23.3. Parse Query Strpos helper</a>
      </li>
      <li><a href="#toc217">2.23.4. Execute Query</a>
      </li>
      <li><a href="#toc218">2.23.5. Execute Query Array</a>
      </li>
      <li><a href="#toc219">2.23.6. Get Fields</a>
      </li>
      <li><a href="#toc220">2.23.7. Get Indexes</a>
      </li>
      <li><a href="#toc221">2.23.8. Get Tables</a>
      </li>
      <li><a href="#toc222">2.23.9. Get Field Type</a>
      </li>
      <li><a href="#toc223">2.23.10. Get Field Size</a>
      </li>
      <li><a href="#toc224">2.23.11. Has Engine</a>
      </li>
      <li><a href="#toc225">2.23.12. Make Insert Query</a>
      </li>
      <li><a href="#toc226">2.23.13. Make Update Query</a>
      </li>
      <li><a href="#toc227">2.23.14. Make Where Query</a>
      </li>
      <li><a href="#toc228">2.23.15. Escape Reserved Word</a>
      </li>
      <li><a href="#toc229">2.23.16. Make Like Query</a>
      </li>
      <li><a href="#toc230">2.23.17. Make Fulltext Query Helper</a>
      </li>
      <li><a href="#toc231">2.23.18. Make Fulltext Query</a>
      </li>
      <li><a href="#toc232">2.23.19. Prepare Helper Query</a>
      </li>
      <li><a href="#toc233">2.23.20. Prepare Insert Query</a>
      </li>
      <li><a href="#toc234">2.23.21. Prepare Update Query</a>
      </li>
      <li><a href="#toc235">2.23.22. Prepare Where Query</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc236">2.24. String utils helper module</a>
      <ul>
      <li><a href="#toc237">2.24.1. Remove Bar Chars</a>
      </li>
      <li><a href="#toc238">2.24.2. Encode Bar Chars</a>
      </li>
      <li><a href="#toc239">2.24.3. Prepare Words</a>
      </li>
      <li><a href="#toc240">2.24.4. Sprintr</a>
      </li>
      <li><a href="#toc241">2.24.5. Get Unique ID MD5</a>
      </li>
      <li><a href="#toc242">2.24.6. Intelligence Cut</a>
      </li>
      <li><a href="#toc243">2.24.7. Normalize Value</a>
      </li>
      <li><a href="#toc244">2.24.8. HTML to Text</a>
      </li>
      <li><a href="#toc245">2.24.9. Get UTF-8</a>
      </li>
      <li><a href="#toc246">2.24.10. Words Exists</a>
      </li>
      <li><a href="#toc247">2.24.11. String Replace Assoc</a>
      </li>
      <li><a href="#toc248">2.24.12. Get Part From String</a>
      </li>
      <li><a href="#toc249">2.24.13. Check IDS Helper</a>
      </li>
      <li><a href="#toc250">2.24.14. Check IDS</a>
      </li>
      <li><a href="#toc251">2.24.15. Check IDS Array</a>
      </li>
      <li><a href="#toc252">2.24.16. String Replace One</a>
      </li>
      <li><a href="#toc253">2.24.17. Get String From Quotes</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc254">2.25. System helper module</a>
      <ul>
      <li><a href="#toc255">2.25.1. Check System</a>
      </li>
      <li><a href="#toc256">2.25.2. Check Directories</a>
      </li>
      <li><a href="#toc257">2.25.3. Exec Check System</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc258">2.26. Tokens helper module</a>
      <ul>
      <li><a href="#toc259">2.26.1. Get Unique Token</a>
      </li>
      <li><a href="#toc260">2.26.2. Check token format</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc261">2.27. User helper module</a>
      <ul>
      <li><a href="#toc262">2.27.1. Current Token</a>
      </li>
      <li><a href="#toc263">2.27.2. Current User</a>
      </li>
      <li><a href="#toc264">2.27.3. Current Group</a>
      </li>
      <li><a href="#toc265">2.27.4. Current Groups</a>
      </li>
      <li><a href="#toc266">2.27.5. Crontab Users</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc267">2.28. Version helper module</a>
      <ul>
      <li><a href="#toc268">2.28.1. Get Name Version Revision</a>
      </li>
      <li><a href="#toc269">2.28.2. SVN Version</a>
      </li>
      <li><a href="#toc270">2.28.3. SVN Version helper</a>
      </li>
      <li><a href="#toc271">2.28.4. GIT Version</a>
      </li>
      <li><a href="#toc272">2.28.5. GIT Version helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc273">2.29. XML to Array helper module</a>
      <ul>
      <li><a href="#toc274">2.29.1. Set Array</a>
      </li>
      <li><a href="#toc275">2.29.2. Unset Array</a>
      </li>
      <li><a href="#toc276">2.29.3. Fix Key</a>
      </li>
      <li><a href="#toc277">2.29.4. XML Files to Array</a>
      </li>
      <li><a href="#toc278">2.29.5. XML File to Array</a>
      </li>
      <li><a href="#toc279">2.29.6. XML to Array</a>
      </li>
      <li><a href="#toc280">2.29.7. XML to Struct</a>
      </li>
      <li><a href="#toc281">2.29.8. Struct to Array</a>
      </li>
      <li><a href="#toc282">2.29.9. Eval Attributes</a>
      </li>
      <li><a href="#toc283">2.29.10. Eval Bool</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc284">2.30. Yaml helper module</a>
      <ul>
      <li><a href="#toc285">2.30.1. Yaml Parse</a>
      </li>
      <li><a href="#toc286">2.30.2. Yaml Parse File</a>
      </li>
      <li><a href="#toc287">2.30.3. Yaml Emit</a>
      </li>
      <li><a href="#toc288">2.30.4. Yaml Emit File</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc289">2.31. Main execution module</a>
    </li>
    </ul>
  </li>
  <li><a href="#toc290">3. Database</a>
    <ul>
    <li><a href="#toc291">3.1. SQLite3 functions library</a>
      <ul>
      <li><a href="#toc292">3.1.1. GROUP_CONCAT</a>
      </li>
      <li><a href="#toc293">3.1.2. GROUP_CONCAT</a>
      </li>
      <li><a href="#toc294">3.1.3. REPLACE</a>
      </li>
      <li><a href="#toc295">3.1.4. LPAD</a>
      </li>
      <li><a href="#toc296">3.1.5. CONCAT</a>
      </li>
      <li><a href="#toc297">3.1.6. CONCAT_WS</a>
      </li>
      <li><a href="#toc298">3.1.7. UNIX_TIMESTAMP</a>
      </li>
      <li><a href="#toc299">3.1.8. FROM_UNIXTIME</a>
      </li>
      <li><a href="#toc300">3.1.9. YEAR</a>
      </li>
      <li><a href="#toc301">3.1.10. MONTH</a>
      </li>
      <li><a href="#toc302">3.1.11. WEEK</a>
      </li>
      <li><a href="#toc303">3.1.12. TRUNCATE</a>
      </li>
      <li><a href="#toc304">3.1.13. DAY</a>
      </li>
      <li><a href="#toc305">3.1.14. DAYOFYEAR</a>
      </li>
      <li><a href="#toc306">3.1.15. DAYOFWEEK</a>
      </li>
      <li><a href="#toc307">3.1.16. HOUR</a>
      </li>
      <li><a href="#toc308">3.1.17. MINUTE</a>
      </li>
      <li><a href="#toc309">3.1.18. SECOND</a>
      </li>
      <li><a href="#toc310">3.1.19. MD5</a>
      </li>
      <li><a href="#toc311">3.1.20. REPEAT</a>
      </li>
      <li><a href="#toc312">3.1.21. FIND_IN_SET</a>
      </li>
      <li><a href="#toc313">3.1.22. IF</a>
      </li>
      <li><a href="#toc314">3.1.23. POW</a>
      </li>
      <li><a href="#toc315">3.1.24. DATE_FORMAT</a>
      </li>
      <li><a href="#toc316">3.1.25. NOW</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc317">3.2. MySQL improved driver</a>
      <ul>
      <li><a href="#toc318">3.2.1. Database MySQL improved class</a>
      </li>
      <li><a href="#toc319">3.2.2. Private link variable</a>
      </li>
      <li><a href="#toc320">3.2.3. Constructor</a>
      </li>
      <li><a href="#toc321">3.2.4. DB Check</a>
      </li>
      <li><a href="#toc322">3.2.5. DB Escape</a>
      </li>
      <li><a href="#toc323">3.2.6. DB Query</a>
      </li>
      <li><a href="#toc324">3.2.7. DB Last Insert ID</a>
      </li>
      <li><a href="#toc325">3.2.8. DB Disconnect</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc326">3.3. PDO MsSQL driver</a>
      <ul>
      <li><a href="#toc327">3.3.1. Database PDO MsSQL class</a>
      </li>
      <li><a href="#toc328">3.3.2. Private link variable</a>
      </li>
      <li><a href="#toc329">3.3.3. Constructor</a>
      </li>
      <li><a href="#toc330">3.3.4. DB Check</a>
      </li>
      <li><a href="#toc331">3.3.5. DB Escape</a>
      </li>
      <li><a href="#toc332">3.3.6. DB Query</a>
      </li>
      <li><a href="#toc333">3.3.7. DB Last Insert ID</a>
      </li>
      <li><a href="#toc334">3.3.8. DB Disconnect</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc335">3.4. PDO MySQL driver</a>
      <ul>
      <li><a href="#toc336">3.4.1. Database PDO MySQL class</a>
      </li>
      <li><a href="#toc337">3.4.2. Private link variable</a>
      </li>
      <li><a href="#toc338">3.4.3. Constructor</a>
      </li>
      <li><a href="#toc339">3.4.4. DB Check</a>
      </li>
      <li><a href="#toc340">3.4.5. DB Escape</a>
      </li>
      <li><a href="#toc341">3.4.6. DB Query</a>
      </li>
      <li><a href="#toc342">3.4.7. DB Last Insert ID</a>
      </li>
      <li><a href="#toc343">3.4.8. DB Disconnect</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc344">3.5. PDO SQLite driver</a>
      <ul>
      <li><a href="#toc345">3.5.1. Database PDO SQLite class</a>
      </li>
      <li><a href="#toc346">3.5.2. Private link variable</a>
      </li>
      <li><a href="#toc347">3.5.3. Constructor</a>
      </li>
      <li><a href="#toc348">3.5.4. DB Check</a>
      </li>
      <li><a href="#toc349">3.5.5. DB Escape</a>
      </li>
      <li><a href="#toc350">3.5.6. DB Query</a>
      </li>
      <li><a href="#toc351">3.5.7. DB Last Insert ID</a>
      </li>
      <li><a href="#toc352">3.5.8. DB Disconnect</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc353">3.6. SQLite3 driver</a>
      <ul>
      <li><a href="#toc354">3.6.1. Database SQLite3 class</a>
      </li>
      <li><a href="#toc355">3.6.2. Private link variable</a>
      </li>
      <li><a href="#toc356">3.6.3. Constructor</a>
      </li>
      <li><a href="#toc357">3.6.4. DB Check</a>
      </li>
      <li><a href="#toc358">3.6.5. DB Escape</a>
      </li>
      <li><a href="#toc359">3.6.6. DB Query</a>
      </li>
      <li><a href="#toc360">3.6.7. DB Last Insert ID</a>
      </li>
      <li><a href="#toc361">3.6.8. DB Disconnect</a>
      </li>
      </ul>
    </li>
    </ul>
  </li>
  <li><a href="#toc362">4. Libraries</a>
    <ul>
    <li><a href="#toc363">4.1. Actions module</a>
      <ul>
      <li><a href="#toc364">4.1.1. Insert action</a>
      </li>
      <li><a href="#toc365">4.1.2. Update action</a>
      </li>
      <li><a href="#toc366">4.1.3. Delete action</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc367">4.2. Array to XML helper module</a>
      <ul>
      <li><a href="#toc368">4.2.1. Check Node Name</a>
      </li>
      <li><a href="#toc369">4.2.2. Check Attr Name</a>
      </li>
      <li><a href="#toc370">4.2.3. Write Nodes array2xml helper</a>
      </li>
      <li><a href="#toc371">4.2.4. Array to XML</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc372">4.3. Make Table ASCII</a>
      <ul>
      <li><a href="#toc373">4.3.1. Make Table ASCII</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc374">4.4. Login functions</a>
      <ul>
      <li><a href="#toc375">4.4.1. Authentication token action</a>
      </li>
      <li><a href="#toc376">4.4.2. Deauthentication token action</a>
      </li>
      <li><a href="#toc377">4.4.3. Check token action</a>
      </li>
      <li><a href="#toc378">4.4.4. Authentication update action</a>
      </li>
      <li><a href="#toc379">4.4.5. Score check</a>
      </li>
      <li><a href="#toc380">4.4.6. Old password check</a>
      </li>
      <li><a href="#toc381">4.4.7. New password check</a>
      </li>
      <li><a href="#toc382">4.4.8. Old password disable</a>
      </li>
      <li><a href="#toc383">4.4.9. New password insert</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc384">4.5. Barcode helper module</a>
      <ul>
      <li><a href="#toc385">4.5.1. BarCode image function</a>
      </li>
      <li><a href="#toc386">4.5.2. BarCode image png function</a>
      </li>
      <li><a href="#toc387">4.5.3. BarCode image svg function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc388">4.6. Browser helper module</a>
      <ul>
      <li><a href="#toc389">4.6.1. Get Browser Platform Device Type</a>
      </li>
      <li><a href="#toc390">4.6.2. Get Browser Platform Device Type</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc391">4.7. Captcha helper module</a>
      <ul>
      <li><a href="#toc392">4.7.1. Captcha Image</a>
      </li>
      <li><a href="#toc393">4.7.2. Captcha Make Number function</a>
      </li>
      <li><a href="#toc394">4.7.3. Captcha Make Math Operation function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc395">4.8. Color helper module</a>
      <ul>
      <li><a href="#toc396">4.8.1. Color To Dec function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc397">4.9. Control helper module</a>
      <ul>
      <li><a href="#toc398">4.9.1. Make Control function</a>
      </li>
      <li><a href="#toc399">4.9.2. Integrity</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc400">4.10. Cron utils helper module</a>
      <ul>
      <li><a href="#toc401">4.10.1. Cron compare helper</a>
      </li>
      <li><a href="#toc402">4.10.2. Cron is now helper</a>
      </li>
      <li><a href="#toc403">4.10.3. Cron users helper</a>
      </li>
      <li><a href="#toc404">4.10.4. Cron GC</a>
      </li>
      <li><a href="#toc405">4.10.5. Cron Exec</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc406">4.11. Database schema helper module</a>
      <ul>
      <li><a href="#toc407">4.11.1. DB Schema</a>
      </li>
      <li><a href="#toc408">4.11.2. DB Schema hash</a>
      </li>
      <li><a href="#toc409">4.11.3. DB Schema check</a>
      </li>
      <li><a href="#toc410">4.11.4. DB Static</a>
      </li>
      <li><a href="#toc411">4.11.5. DB Static hash</a>
      </li>
      <li><a href="#toc412">4.11.6. DB Static check</a>
      </li>
      <li><a href="#toc413">4.11.7. DB Static insert</a>
      </li>
      <li><a href="#toc414">4.11.8. Get Tables from DB Schema</a>
      </li>
      <li><a href="#toc415">4.11.9. Get Fields from DB Schema</a>
      </li>
      <li><a href="#toc416">4.11.10. Get Indexes from DB Schema</a>
      </li>
      <li><a href="#toc417">4.11.11. Get Ignores from DB Schema</a>
      </li>
      <li><a href="#toc418">4.11.12. Get Fulltext from DB Schema</a>
      </li>
      <li><a href="#toc419">4.11.13. Get Fkeys from DB Schema</a>
      </li>
      <li><a href="#toc420">4.11.14. DB Schema helper</a>
      </li>
      <li><a href="#toc421">4.11.15. DB Schema Auto Apps</a>
      </li>
      <li><a href="#toc422">4.11.16. DB Schema Auto Fkey</a>
      </li>
      <li><a href="#toc423">4.11.17. DB Schema Auto Name</a>
      </li>
      <li><a href="#toc424">4.11.18. Get Apps From DBStatic</a>
      </li>
      <li><a href="#toc425">4.11.19. Get Tables From DBStatic</a>
      </li>
      <li><a href="#toc426">4.11.20. Get Field From DBStatic</a>
      </li>
      <li><a href="#toc427">4.11.21. DB Static helper</a>
      </li>
      <li><a href="#toc428">4.11.22. Manifest to dbstatic</a>
      </li>
      <li><a href="#toc429">4.11.23. DB Schema Create Table</a>
      </li>
      <li><a href="#toc430">4.11.24. DB Schema Alter Table</a>
      </li>
      <li><a href="#toc431">4.11.25. DB Schema Insert From Select</a>
      </li>
      <li><a href="#toc432">4.11.26. DB Schema Drop Table</a>
      </li>
      <li><a href="#toc433">4.11.27. DB Schema Create Index</a>
      </li>
      <li><a href="#toc434">4.11.28. DB Schema Drop Index</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc435">4.12. Dependencies feature</a>
      <ul>
      <li><a href="#toc436">4.12.1. Check Dependencies</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc437">4.13. Export helper module</a>
      <ul>
      <li><a href="#toc438">4.13.1. Export File main function</a>
      </li>
      <li><a href="#toc439">4.13.2. Export File XML</a>
      </li>
      <li><a href="#toc440">4.13.3. Export File CSV</a>
      </li>
      <li><a href="#toc441">4.13.4. Export File Excel</a>
      </li>
      <li><a href="#toc442">4.13.5. Export File JSON</a>
      </li>
      <li><a href="#toc443">4.13.6. Tree to Array</a>
      </li>
      <li><a href="#toc444">4.13.7. Get Keys</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc445">4.14. Files module</a>
      <ul>
      <li><a href="#toc446">4.14.1. Check Files Old</a>
      </li>
      <li><a href="#toc447">4.14.2. Check Files New</a>
      </li>
      <li><a href="#toc448">4.14.3. Get cid</a>
      </li>
      <li><a href="#toc449">4.14.4. Get viewpdf</a>
      </li>
      <li><a href="#toc450">4.14.5. Get download</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc451">4.15. Garbage collector helper module</a>
      <ul>
      <li><a href="#toc452">4.15.1. Garbage Collector Executor</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc453">4.16. GD utils helper module</a>
      <ul>
      <li><a href="#toc454">4.16.1. Compute width</a>
      </li>
      <li><a href="#toc455">4.16.2. Image resize</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc456">4.17. GeoIP helper module</a>
      <ul>
      <li><a href="#toc457">4.17.1. Get GeoIP information</a>
      </li>
      <li><a href="#toc458">4.17.2. Get GeoIP information</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc459">4.18. Help feature</a>
      <ul>
      <li><a href="#toc460">4.18.1. Detect Help File</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc461">4.19. Import file helper module</a>
      <ul>
      <li><a href="#toc462">4.19.1. Import File main function</a>
      </li>
      <li><a href="#toc463">4.19.2. UTF8 BOM helper</a>
      </li>
      <li><a href="#toc464">4.19.3. XML to Array</a>
      </li>
      <li><a href="#toc465">4.19.4. Special Chars helper</a>
      </li>
      <li><a href="#toc466">4.19.5. CSV to Array helper</a>
      </li>
      <li><a href="#toc467">4.19.6. XLS to Array helper</a>
      </li>
      <li><a href="#toc468">4.19.7. Bytes to Array helper</a>
      </li>
      <li><a href="#toc469">4.19.8. Edi to Array helper</a>
      </li>
      <li><a href="#toc470">4.19.9. JSON to Array helper</a>
      </li>
      <li><a href="#toc471">4.19.10. Check Real Matrix helper</a>
      </li>
      <li><a href="#toc472">4.19.11. Remove Void helper</a>
      </li>
      <li><a href="#toc473">4.19.12. Array to Tree helper</a>
      </li>
      <li><a href="#toc474">4.19.13. Array Intersect</a>
      </li>
      <li><a href="#toc475">4.19.14. Array to Tree Set helper</a>
      </li>
      <li><a href="#toc476">4.19.15. Array to Tree Clean helper</a>
      </li>
      <li><a href="#toc477">4.19.16. Column to Name helper</a>
      </li>
      <li><a href="#toc478">4.19.17. Name to Column helper</a>
      </li>
      <li><a href="#toc479">4.19.18. Is Name helper</a>
      </li>
      <li><a href="#toc480">4.19.19. Cell to Column and Row helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc481">4.20. Make index helper module</a>
      <ul>
      <li><a href="#toc482">4.20.1. Make Index main function</a>
      </li>
      <li><a href="#toc483">4.20.2. Make Index helper</a>
      </li>
      <li><a href="#toc484">4.20.3. Get Field helper</a>
      </li>
      <li><a href="#toc485">4.20.4. Get Fkeys helper</a>
      </li>
      <li><a href="#toc486">4.20.5. Indexing Files</a>
      </li>
      <li><a href="#toc487">4.20.6. Indexing Apps</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc488">4.21. Log helper module</a>
      <ul>
      <li><a href="#toc489">4.21.1. Make Log function</a>
      </li>
      <li><a href="#toc490">4.21.2. Make Log Bypass function</a>
      </li>
      <li><a href="#toc491">4.21.3. Get Logs</a>
      </li>
      <li><a href="#toc492">4.21.4. Delete Log function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc493">4.22. Math utils helper module</a>
      <ul>
      <li><a href="#toc494">4.22.1. Sign function</a>
      </li>
      <li><a href="#toc495">4.22.2. Is Prime Number</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc496">4.23. Notes module</a>
      <ul>
      <li><a href="#toc497">4.23.1. Check Notes Old</a>
      </li>
      <li><a href="#toc498">4.23.2. Check Notes New</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc499">4.24. Password helper module</a>
      <ul>
      <li><a href="#toc500">4.24.1. Password Strength</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc501">4.25. PDF helper module</a>
      <ul>
      <li><a href="#toc502">4.25.1. Custom PDF class extending TCPDF</a>
      </li>
      <li><a href="#toc503">4.25.2. Initialize PDF document settings</a>
      </li>
      <li><a href="#toc504">4.25.3. Set header content and data</a>
      </li>
      <li><a href="#toc505">4.25.4. Set footer content and data</a>
      </li>
      <li><a href="#toc506">4.25.5. Override TCPDF header method</a>
      </li>
      <li><a href="#toc507">4.25.6. Override TCPDF footer method</a>
      </li>
      <li><a href="#toc508">4.25.7. Render all accumulated footers</a>
      </li>
      <li><a href="#toc509">4.25.8. Check Y position and add new page if needed</a>
      </li>
      <li><a href="#toc510">4.25.9. Evaluate dynamic value in PDF context</a>
      </li>
      <li><a href="#toc511">4.25.10. Evaluate array values in PDF context</a>
      </li>
      <li><a href="#toc512">4.25.11. Advanced string explosion with quote and parentheses awareness</a>
      </li>
      <li><a href="#toc513">4.25.12. Process PDF template tags and generate PDF content</a>
      </li>
      <li><a href="#toc514">4.25.13. Generate PDF from template file</a>
      </li>
      <li><a href="#toc515">4.25.14. Convert various file types to PDF</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc516">4.26. Push utils helper module</a>
      <ul>
      <li><a href="#toc517">4.26.1. Push insert</a>
      </li>
      <li><a href="#toc518">4.26.2. Push select</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc519">4.27. QRCode helper module</a>
      <ul>
      <li><a href="#toc520">4.27.1. QRCode image function</a>
      </li>
      <li><a href="#toc521">4.27.2. QRCode image function</a>
      </li>
      <li><a href="#toc522">4.27.3. QRCode image function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc523">4.28. Score image helper module</a>
      <ul>
      <li><a href="#toc524">4.28.1. Score Image function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc525">4.29. Security helper module</a>
      <ul>
      <li><a href="#toc526">4.29.1. Get Browser Platform Device Type</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc527">4.30. Setup helper module</a>
      <ul>
      <li><a href="#toc528">4.30.1. Setup function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc529">4.31. Send file to trash</a>
      <ul>
      <li><a href="#toc530">4.31.1. Garbage Collector Trash</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc531">4.32. Unoconv library</a>
      <ul>
      <li><a href="#toc532">4.32.1. Unoconv to PDF</a>
      </li>
      <li><a href="#toc533">4.32.2. Unoconv to TXT</a>
      </li>
      <li><a href="#toc534">4.32.3. Unoconv list</a>
      </li>
      <li><a href="#toc535">4.32.4. PDF to TXT</a>
      </li>
      <li><a href="#toc536">4.32.5. All to PDF</a>
      </li>
      <li><a href="#toc537">4.32.6. Convert</a>
      </li>
      <li><a href="#toc538">4.32.7. Image to OCR</a>
      </li>
      <li><a href="#toc539">4.32.8. PDF to OCR</a>
      </li>
      <li><a href="#toc540">4.32.9. Calculate histogram value</a>
      </li>
      <li><a href="#toc541">4.32.10. Rotate coordinates</a>
      </li>
      <li><a href="#toc542">4.32.11. Extract attributes from OCR node</a>
      </li>
      <li><a href="#toc543">4.32.12. Extract text value from OCR node</a>
      </li>
      <li><a href="#toc544">4.32.13. Convert OCR lines to character matrix</a>
      </li>
      <li><a href="#toc545">4.32.14. Reorder line coordinates</a>
      </li>
      <li><a href="#toc546">4.32.15. Convert HOCR to plain text</a>
      </li>
      <li><a href="#toc547">4.32.16. Proportional substring extraction</a>
      </li>
      <li><a href="#toc548">4.32.17. 2D proportional substring extraction</a>
      </li>
      <li><a href="#toc549">4.32.18. Remove margins from text page</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc550">4.33. Add upload file</a>
      <ul>
      <li><a href="#toc551">4.33.1. Del upload file</a>
      </li>
      <li><a href="#toc552">4.33.2. Check upload file</a>
      </li>
      <li><a href="#toc553">4.33.3. Rename upload file</a>
      </li>
      <li><a href="#toc554">4.33.4. Garbage Collector Upload</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc555">4.34. Version helper module</a>
      <ul>
      <li><a href="#toc556">4.34.1. Make Version function</a>
      </li>
      <li><a href="#toc557">4.34.2. Get Version</a>
      </li>
      <li><a href="#toc558">4.34.3. Delete Version function</a>
      </li>
      </ul>
    </li>
    </ul>
  </li>
  <li><a href="#toc559">5. Javascript</a>
    <ul>
    <li><a href="#toc560">5.1. Application helper module</a>
      <ul>
      <li><a href="#toc561">5.1.1. Application helper object</a>
      </li>
      <li><a href="#toc562">5.1.2. Modal function</a>
      </li>
      <li><a href="#toc563">5.1.3. Toast function</a>
      </li>
      <li><a href="#toc564">5.1.4. Show error helper</a>
      </li>
      <li><a href="#toc565">5.1.5. Check response helper</a>
      </li>
      <li><a href="#toc566">5.1.6. Send request helper</a>
      </li>
      <li><a href="#toc567">5.1.7. Data helper object</a>
      </li>
      <li><a href="#toc568">5.1.8. Process response helper</a>
      </li>
      <li><a href="#toc569">5.1.9. Process response helper</a>
      </li>
      <li><a href="#toc570">5.1.10. Source helper</a>
      </li>
      <li><a href="#toc571">5.1.11. Get data</a>
      </li>
      <li><a href="#toc572">5.1.12. Get data ids helper</a>
      </li>
      <li><a href="#toc573">5.1.13. Get data parse helper</a>
      </li>
      <li><a href="#toc574">5.1.14. Checkbox ids</a>
      </li>
      <li><a href="#toc575">5.1.15. Check form</a>
      </li>
      <li><a href="#toc576">5.1.16. Form disabled</a>
      </li>
      <li><a href="#toc577">5.1.17. Ajax helper</a>
      </li>
      <li><a href="#toc578">5.1.18. Online message</a>
      </li>
      <li><a href="#toc579">5.1.19. Offline message</a>
      </li>
      <li><a href="#toc580">5.1.20. Main app code</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc581">5.2. Authentication helper module</a>
      <ul>
      <li><a href="#toc582">5.2.1. Authentication helper object</a>
      </li>
      <li><a href="#toc583">5.2.2. Authenticate token function</a>
      </li>
      <li><a href="#toc584">5.2.3. Check token function</a>
      </li>
      <li><a href="#toc585">5.2.4. De-authenticate token function</a>
      </li>
      <li><a href="#toc586">5.2.5. Authenticate update function</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc587">5.3. Backup &amp; Autosave helper module</a>
      <ul>
      <li><a href="#toc588">5.3.1. Form backup helper</a>
      </li>
      <li><a href="#toc589">5.3.2. Backup object</a>
      </li>
      <li><a href="#toc590">5.3.3. Save feature</a>
      </li>
      <li><a href="#toc591">5.3.4. Restore feature</a>
      </li>
      <li><a href="#toc592">5.3.5. Selector helper</a>
      </li>
      <li><a href="#toc593">5.3.6. Autosave feature object</a>
      </li>
      <li><a href="#toc594">5.3.7. Init</a>
      </li>
      <li><a href="#toc595">5.3.8. Save</a>
      </li>
      <li><a href="#toc596">5.3.9. Restore</a>
      </li>
      <li><a href="#toc597">5.3.10. Clear</a>
      </li>
      <li><a href="#toc598">5.3.11. Purge</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc599">5.4. Bootstrap helper module</a>
      <ul>
      <li><a href="#toc600">5.4.1. Bootstrap helper object</a>
      </li>
      <li><a href="#toc601">5.4.2. Form fields constructor</a>
      </li>
      <li><a href="#toc602">5.4.3. Form_field constructor helper object</a>
      </li>
      <li><a href="#toc603">5.4.4. Div constructor helper</a>
      </li>
      <li><a href="#toc604">5.4.5. Container constructor helper</a>
      </li>
      <li><a href="#toc605">5.4.6. Row constructor helper</a>
      </li>
      <li><a href="#toc606">5.4.7. Col constructor helper</a>
      </li>
      <li><a href="#toc607">5.4.8. HR constructor helper</a>
      </li>
      <li><a href="#toc608">5.4.9. Text constructor helper</a>
      </li>
      <li><a href="#toc609">5.4.10. Hidden constructor helper</a>
      </li>
      <li><a href="#toc610">5.4.11. Integer constructor helper</a>
      </li>
      <li><a href="#toc611">5.4.12. Float constructor helper</a>
      </li>
      <li><a href="#toc612">5.4.13. Color constructor helper</a>
      </li>
      <li><a href="#toc613">5.4.14. Date constructor helper</a>
      </li>
      <li><a href="#toc614">5.4.15. Time constructor helper</a>
      </li>
      <li><a href="#toc615">5.4.16. Datetime constructor helper</a>
      </li>
      <li><a href="#toc616">5.4.17. Textarea constructor helper</a>
      </li>
      <li><a href="#toc617">5.4.18. Ckeditor constructor helper</a>
      </li>
      <li><a href="#toc618">5.4.19. Codemirror constructor helper</a>
      </li>
      <li><a href="#toc619">5.4.20. Indent helper</a>
      </li>
      <li><a href="#toc620">5.4.21. Iframe constructor helper</a>
      </li>
      <li><a href="#toc621">5.4.22. Select constructor helper</a>
      </li>
      <li><a href="#toc622">5.4.23. Multiselect constructor helper</a>
      </li>
      <li><a href="#toc623">5.4.24. Checkbox constructor helper</a>
      </li>
      <li><a href="#toc624">5.4.25. Switch constructor helper</a>
      </li>
      <li><a href="#toc625">5.4.26. Button constructor helper</a>
      </li>
      <li><a href="#toc626">5.4.27. Password constructor helper</a>
      </li>
      <li><a href="#toc627">5.4.28. File constructor helper</a>
      </li>
      <li><a href="#toc628">5.4.29. Link constructor helper</a>
      </li>
      <li><a href="#toc629">5.4.30. Label constructor helper</a>
      </li>
      <li><a href="#toc630">5.4.31. Image constructor helper</a>
      </li>
      <li><a href="#toc631">5.4.32. Excel constructor helper</a>
      </li>
      <li><a href="#toc632">5.4.33. Pdfjs constructor helper</a>
      </li>
      <li><a href="#toc633">5.4.34. Table constructor helper</a>
      </li>
      <li><a href="#toc634">5.4.35. Alert constructor helper</a>
      </li>
      <li><a href="#toc635">5.4.36. Card constructor helper</a>
      </li>
      <li><a href="#toc636">5.4.37. Chart.js constructor helper</a>
      </li>
      <li><a href="#toc637">5.4.38. Tags constructor helper</a>
      </li>
      <li><a href="#toc638">5.4.39. One tag constructor helper</a>
      </li>
      <li><a href="#toc639">5.4.40. Srcdoc helper</a>
      </li>
      <li><a href="#toc640">5.4.41. Datalist helper</a>
      </li>
      <li><a href="#toc641">5.4.42. Value helper</a>
      </li>
      <li><a href="#toc642">5.4.43. Gallery constructor helper</a>
      </li>
      <li><a href="#toc643">5.4.44. Placeholder helper</a>
      </li>
      <li><a href="#toc644">5.4.45. List widget constructor helper</a>
      </li>
      <li><a href="#toc645">5.4.46. Tabs widget constructor helper</a>
      </li>
      <li><a href="#toc646">5.4.47. Pills widget constructor helper</a>
      </li>
      <li><a href="#toc647">5.4.48. V-Pills widget constructor helper</a>
      </li>
      <li><a href="#toc648">5.4.49. Accordion widget constructor helper</a>
      </li>
      <li><a href="#toc649">5.4.50. JS Tree constructor helper</a>
      </li>
      <li><a href="#toc650">5.4.51. Dropdown constructor helper</a>
      </li>
      <li><a href="#toc651">5.4.52. Private text constructor helper</a>
      </li>
      <li><a href="#toc652">5.4.53. Private textarea constructor helper</a>
      </li>
      <li><a href="#toc653">5.4.54. Private tooltip constructor helper</a>
      </li>
      <li><a href="#toc654">5.4.55. Private tooltip hide helper</a>
      </li>
      <li><a href="#toc655">5.4.56. Label helper</a>
      </li>
      <li><a href="#toc656">5.4.57. Label Combine</a>
      </li>
      <li><a href="#toc657">5.4.58. Onclick helper</a>
      </li>
      <li><a href="#toc658">5.4.59. Onchange helper</a>
      </li>
      <li><a href="#toc659">5.4.60. Onenter helper</a>
      </li>
      <li><a href="#toc660">5.4.61. Menu constructor helper</a>
      </li>
      <li><a href="#toc661">5.4.62. Navbar constructor helper</a>
      </li>
      <li><a href="#toc662">5.4.63. Modal constructor helper object</a>
      </li>
      <li><a href="#toc663">5.4.64. Modal constructor helper</a>
      </li>
      <li><a href="#toc664">5.4.65. Offcanvas constructor helper object</a>
      </li>
      <li><a href="#toc665">5.4.66. Offcanvas constructor helper</a>
      </li>
      <li><a href="#toc666">5.4.67. Toast constructor helper</a>
      </li>
      <li><a href="#toc667">5.4.68. Accesskey listener</a>
      </li>
      <li><a href="#toc668">5.4.69. Window match media</a>
      </li>
      <li><a href="#toc669">5.4.70. Set data_bs_theme</a>
      </li>
      <li><a href="#toc670">5.4.71. Set bs theme</a>
      </li>
      <li><a href="#toc671">5.4.72. Set css theme</a>
      </li>
      <li><a href="#toc672">5.4.73. Get bs theme</a>
      </li>
      <li><a href="#toc673">5.4.74. Get css theme</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc674">5.5. Common helper module</a>
      <ul>
      <li><a href="#toc675">5.5.1. Common helper object</a>
      </li>
      <li><a href="#toc676">5.5.2. Profile screen</a>
      </li>
      <li><a href="#toc677">5.5.3. Help screen</a>
      </li>
      <li><a href="#toc678">5.5.4. Logout feature</a>
      </li>
      <li><a href="#toc679">5.5.5. Filter screen</a>
      </li>
      <li><a href="#toc680">5.5.6. Download helper</a>
      </li>
      <li><a href="#toc681">5.5.7. Delete helper</a>
      </li>
      <li><a href="#toc682">5.5.8. Version common helper</a>
      </li>
      <li><a href="#toc683">5.5.9. Log common helper</a>
      </li>
      <li><a href="#toc684">5.5.10. Edit common helper</a>
      </li>
      <li><a href="#toc685">5.5.11. Create common helper</a>
      </li>
      <li><a href="#toc686">5.5.12. Viewpdf common helper</a>
      </li>
      <li><a href="#toc687">5.5.13. Remove common helper</a>
      </li>
      <li><a href="#toc688">5.5.14. Allfiles common helper</a>
      </li>
      <li><a href="#toc689">5.5.15. Allnotes common helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc690">5.6. Core helper module</a>
      <ul>
      <li><a href="#toc691">5.6.1. Core helper object</a>
      </li>
      <li><a href="#toc692">5.6.2. Error management</a>
      </li>
      <li><a href="#toc693">5.6.3. Old error handler</a>
      </li>
      <li><a href="#toc694">5.6.4. New error handler</a>
      </li>
      <li><a href="#toc695">5.6.5. Log management</a>
      </li>
      <li><a href="#toc696">5.6.6. Check params</a>
      </li>
      <li><a href="#toc697">5.6.7. UniqID</a>
      </li>
      <li><a href="#toc698">5.6.8. When visible</a>
      </li>
      <li><a href="#toc699">5.6.9. Get keycode</a>
      </li>
      <li><a href="#toc700">5.6.10. Get keyname</a>
      </li>
      <li><a href="#toc701">5.6.11. HTML builder</a>
      </li>
      <li><a href="#toc702">5.6.12. Ajax helper array</a>
      </li>
      <li><a href="#toc703">5.6.13. AJAX</a>
      </li>
      <li><a href="#toc704">5.6.14. Fix key</a>
      </li>
      <li><a href="#toc705">5.6.15. Copy object</a>
      </li>
      <li><a href="#toc706">5.6.16. Optimizer object</a>
      </li>
      <li><a href="#toc707">5.6.17. Require helper array</a>
      </li>
      <li><a href="#toc708">5.6.18. Require feature</a>
      </li>
      <li><a href="#toc709">5.6.19. Eval Bool</a>
      </li>
      <li><a href="#toc710">5.6.20. toString function</a>
      </li>
      <li><a href="#toc711">5.6.21. Is attr value</a>
      </li>
      <li><a href="#toc712">5.6.22. Join attr value</a>
      </li>
      <li><a href="#toc713">5.6.23. Encode Bar Chars</a>
      </li>
      <li><a href="#toc714">5.6.24. Prepare Words</a>
      </li>
      <li><a href="#toc715">5.6.25. Main core code</a>
      </li>
      <li><a href="#toc716">5.6.26. Proxy feature</a>
      </li>
      <li><a href="#toc717">5.6.27. Online sync</a>
      </li>
      <li><a href="#toc718">5.6.28. Get code from file and line</a>
      </li>
      <li><a href="#toc719">5.6.29. Timestamp helper</a>
      </li>
      <li><a href="#toc720">5.6.30. Human Size</a>
      </li>
      <li><a href="#toc721">5.6.31. Check network</a>
      </li>
      <li><a href="#toc722">5.6.32. Is Number</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc723">5.7. Driver module</a>
      <ul>
      <li><a href="#toc724">5.7.1. Driver object</a>
      </li>
      <li><a href="#toc725">5.7.2. Driver init</a>
      </li>
      <li><a href="#toc726">5.7.3. Driver open</a>
      </li>
      <li><a href="#toc727">5.7.4. Driver close</a>
      </li>
      <li><a href="#toc728">5.7.5. Driver cancel</a>
      </li>
      <li><a href="#toc729">5.7.6. Driver search</a>
      </li>
      <li><a href="#toc730">5.7.7. Driver search</a>
      </li>
      <li><a href="#toc731">5.7.8. Driver more</a>
      </li>
      <li><a href="#toc732">5.7.9. Driver insert</a>
      </li>
      <li><a href="#toc733">5.7.10. Driver update</a>
      </li>
      <li><a href="#toc734">5.7.11. Driver delete</a>
      </li>
      <li><a href="#toc735">5.7.12. Driver placeholder</a>
      </li>
      <li><a href="#toc736">5.7.13. Driver styles</a>
      </li>
      <li><a href="#toc737">5.7.14. Driver search if needed</a>
      </li>
      <li><a href="#toc738">5.7.15. Driver internal object</a>
      </li>
      <li><a href="#toc739">5.7.16. Driver type1 object</a>
      </li>
      <li><a href="#toc740">5.7.17. Driver type1 template</a>
      </li>
      <li><a href="#toc741">5.7.18. Driver type1 init</a>
      </li>
      <li><a href="#toc742">5.7.19. Driver type1 open</a>
      </li>
      <li><a href="#toc743">5.7.20. Driver type1 close</a>
      </li>
      <li><a href="#toc744">5.7.21. Driver type2 object</a>
      </li>
      <li><a href="#toc745">5.7.22. Driver type2 template</a>
      </li>
      <li><a href="#toc746">5.7.23. Driver type2 init</a>
      </li>
      <li><a href="#toc747">5.7.24. Driver type2 open</a>
      </li>
      <li><a href="#toc748">5.7.25. Driver type2 close</a>
      </li>
      <li><a href="#toc749">5.7.26. Driver type3 object</a>
      </li>
      <li><a href="#toc750">5.7.27. Driver type3 template</a>
      </li>
      <li><a href="#toc751">5.7.28. Driver type3 init</a>
      </li>
      <li><a href="#toc752">5.7.29. Driver type3 open</a>
      </li>
      <li><a href="#toc753">5.7.30. Driver type3 close</a>
      </li>
      <li><a href="#toc754">5.7.31. Driver type4 object</a>
      </li>
      <li><a href="#toc755">5.7.32. Driver type4 template</a>
      </li>
      <li><a href="#toc756">5.7.33. Driver type4 init</a>
      </li>
      <li><a href="#toc757">5.7.34. Driver type4 open</a>
      </li>
      <li><a href="#toc758">5.7.35. Driver type4 close</a>
      </li>
      <li><a href="#toc759">5.7.36. Driver type5 object</a>
      </li>
      <li><a href="#toc760">5.7.37. Driver type5 template</a>
      </li>
      <li><a href="#toc761">5.7.38. Driver type5 init</a>
      </li>
      <li><a href="#toc762">5.7.39. Driver type5 open</a>
      </li>
      <li><a href="#toc763">5.7.40. Driver type5 close</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc764">5.8. Filter module</a>
      <ul>
      <li><a href="#toc765">5.8.1. Filter object</a>
      </li>
      <li><a href="#toc766">5.8.2. Filter cache</a>
      </li>
      <li><a href="#toc767">5.8.3. Init filter</a>
      </li>
      <li><a href="#toc768">5.8.4. Load filter</a>
      </li>
      <li><a href="#toc769">5.8.5. Update filter</a>
      </li>
      <li><a href="#toc770">5.8.6. Update filter</a>
      </li>
      <li><a href="#toc771">5.8.7. Filter button helper</a>
      </li>
      <li><a href="#toc772">5.8.8. Select button helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc773">5.9. Form helper module</a>
      <ul>
      <li><a href="#toc774">5.9.1. Form constructor helper object</a>
      </li>
      <li><a href="#toc775">5.9.2. Data helper object</a>
      </li>
      <li><a href="#toc776">5.9.3. Form data helper</a>
      </li>
      <li><a href="#toc777">5.9.4. Data template helper</a>
      </li>
      <li><a href="#toc778">5.9.5. Layout template helper</a>
      </li>
      <li><a href="#toc779">5.9.6. Form layout helper</a>
      </li>
      <li><a href="#toc780">5.9.7. Form layout auto helper object</a>
      </li>
      <li><a href="#toc781">5.9.8. Form layout auto helper for containers</a>
      </li>
      <li><a href="#toc782">5.9.9. Form layout auto helper for rows</a>
      </li>
      <li><a href="#toc783">5.9.10. Form layout auto helper for cols</a>
      </li>
      <li><a href="#toc784">5.9.11. Style helper array</a>
      </li>
      <li><a href="#toc785">5.9.12. Form style helper</a>
      </li>
      <li><a href="#toc786">5.9.13. Javascript helper array</a>
      </li>
      <li><a href="#toc787">5.9.14. Form javascript helper</a>
      </li>
      <li><a href="#toc788">5.9.15. Form title helper</a>
      </li>
      <li><a href="#toc789">5.9.16. Form screen helper</a>
      </li>
      <li><a href="#toc790">5.9.17. Form navbar helper</a>
      </li>
      <li><a href="#toc791">5.9.18. Load gettext helper</a>
      </li>
      <li><a href="#toc792">5.9.19. Form cache helper</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc793">5.10. Gettext helper module</a>
      <ul>
      <li><a href="#toc794">5.10.1. Gettext helper object</a>
      </li>
      <li><a href="#toc795">5.10.2. Get gettext function</a>
      </li>
      <li><a href="#toc796">5.10.3. Get Short gettext function</a>
      </li>
      <li><a href="#toc797">5.10.4. Set gettext function</a>
      </li>
      <li><a href="#toc798">5.10.5. Unset gettext and expires_at</a>
      </li>
      <li><a href="#toc799">5.10.6. Get Text function</a>
      </li>
      <li><a href="#toc800">5.10.7. T function</a>
      </li>
      <li><a href="#toc801">5.10.8. Bootstrap gettext object</a>
      </li>
      <li><a href="#toc802">5.10.9. Bootstrap field overload</a>
      </li>
      <li><a href="#toc803">5.10.10. Bootstrap modal overload</a>
      </li>
      <li><a href="#toc804">5.10.11. Bootstrap toast overload</a>
      </li>
      <li><a href="#toc805">5.10.12. Bootstrap menu overload</a>
      </li>
      <li><a href="#toc806">5.10.13. Bootstrap offcanvas overload</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc807">5.11. Hash helper module</a>
      <ul>
      <li><a href="#toc808">5.11.1. Hash helper object</a>
      </li>
      <li><a href="#toc809">5.11.2. Get hash</a>
      </li>
      <li><a href="#toc810">5.11.3. Set hash</a>
      </li>
      <li><a href="#toc811">5.11.4. Add hash</a>
      </li>
      <li><a href="#toc812">5.11.5. Hash helper</a>
      </li>
      <li><a href="#toc813">5.11.6. Url to hash</a>
      </li>
      <li><a href="#toc814">5.11.7. Change trigger</a>
      </li>
      <li><a href="#toc815">5.11.8. Hash change management</a>
      </li>
      <li><a href="#toc816">5.11.9. Before unload management</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc817">5.12. Object helper module</a>
      <ul>
      <li><a href="#toc818">5.12.1. Main object</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc819">5.13. Proxy module</a>
      <ul>
      <li><a href="#toc820">5.13.1. Console log</a>
      </li>
      <li><a href="#toc821">5.13.2. Debug function</a>
      </li>
      <li><a href="#toc822">5.13.3. Proxy function</a>
      </li>
      <li><a href="#toc823">5.13.4. Queue open</a>
      </li>
      <li><a href="#toc824">5.13.5. Queue push</a>
      </li>
      <li><a href="#toc825">5.13.6. Queue getall</a>
      </li>
      <li><a href="#toc826">5.13.7. Queue delete</a>
      </li>
      <li><a href="#toc827">5.13.8. Request serialize</a>
      </li>
      <li><a href="#toc828">5.13.9. Request unserialize</a>
      </li>
      <li><a href="#toc829">5.13.10. Human Size</a>
      </li>
      <li><a href="#toc830">5.13.11. Install binding</a>
      </li>
      <li><a href="#toc831">5.13.12. Activate binding</a>
      </li>
      <li><a href="#toc832">5.13.13. Fetch binding</a>
      </li>
      <li><a href="#toc833">5.13.14. Sync in progress flag</a>
      </li>
      <li><a href="#toc834">5.13.15. Message binding</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc835">5.14. Push &amp; favicon helper module</a>
      <ul>
      <li><a href="#toc836">5.14.1. Push constructor helper object</a>
      </li>
      <li><a href="#toc837">5.14.2. Push helper</a>
      </li>
      <li><a href="#toc838">5.14.3. Load setup</a>
      </li>
      <li><a href="#toc839">5.14.4. Online sync</a>
      </li>
      <li><a href="#toc840">5.14.5. Favicon constructor helper object</a>
      </li>
      <li><a href="#toc841">5.14.6. Favicon helper</a>
      </li>
      <li><a href="#toc842">5.14.7. Visibility Change</a>
      </li>
      <li><a href="#toc843">5.14.8. Run</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc844">5.15. Token helper module</a>
      <ul>
      <li><a href="#toc845">5.15.1. Storage helper object</a>
      </li>
      <li><a href="#toc846">5.15.2. Pathname helper string</a>
      </li>
      <li><a href="#toc847">5.15.3. Get key</a>
      </li>
      <li><a href="#toc848">5.15.4. Get Item</a>
      </li>
      <li><a href="#toc849">5.15.5. Set Item</a>
      </li>
      <li><a href="#toc850">5.15.6. Remove Item</a>
      </li>
      <li><a href="#toc851">5.15.7. Clear</a>
      </li>
      <li><a href="#toc852">5.15.8. Get Item With Timestamp</a>
      </li>
      <li><a href="#toc853">5.15.9. Set Item With Timestamp</a>
      </li>
      <li><a href="#toc854">5.15.10. Purge With Timestamp</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc855">5.16. Token helper module</a>
      <ul>
      <li><a href="#toc856">5.16.1. Token helper object</a>
      </li>
      <li><a href="#toc857">5.16.2. Get token function</a>
      </li>
      <li><a href="#toc858">5.16.3. Get expires_at function</a>
      </li>
      <li><a href="#toc859">5.16.4. Set token and expires_at</a>
      </li>
      <li><a href="#toc860">5.16.5. Unset token and expires_at</a>
      </li>
      </ul>
    </li>
    <li><a href="#toc861">5.17. Window helper module</a>
      <ul>
      <li><a href="#toc862">5.17.1. Window communication helper object</a>
      </li>
      <li><a href="#toc863">5.17.2. Open window</a>
      </li>
      <li><a href="#toc864">5.17.3. Close window</a>
      </li>
      <li><a href="#toc865">5.17.4. Listeners helper object</a>
      </li>
      <li><a href="#toc866">5.17.5. Set listener</a>
      </li>
      <li><a href="#toc867">5.17.6. Unset listener</a>
      </li>
      <li><a href="#toc868">5.17.7. Send message</a>
      </li>
      <li><a href="#toc869">5.17.8. Storage management</a>
      </li>
      </ul>
    </li>
    </ul>
  </li>
  </ul>

</div>
</nav>
<div class="body" id="body">

<section id="toc1">
<h1>1. Actions</h1>

<section id="toc2">
<h2>1.1. Add log action</h2>

<pre>
api/php/action/add.php
</pre>

<p>
This file implements the addlog action, requires a POST JSON request
with an element in the json that contains the message to be added
</p>

<ul>
<li>@msg =&gt; message that you want to add to the log file
</li>
</ul>

<p>
Add error action
</p>
<p>
This file implements the adderror action, requires a POST JSON request
with the follow elements: jserror, details and backtrace, this action
is called from window.onerror in order to store the details of the js
error
</p>

<ul>
<li>@jserror   =&gt; text used as title in the error report
</li>
<li>@details   =&gt; text used as details in the error report
</li>
<li>@backtrace =&gt; array with the backtrace used in the error report
</li>
</ul>

</section>
<section id="toc3">
<h2>1.2. Application action</h2>

<pre>
api/php/action/app.php
</pre>

<p>
This file implements the app action, requires a GET REST request
and the order of the elements are:
</p>

<ul>
<li>@1 =&gt; the app that you want to execute
</li>
<li>@2 =&gt; the action that tou want to use, if the app only contains
      one action, this parameter is not necesary
</li>
<li>@3 =&gt; the id used in some actions, for example, to get the data
      of specific customer using the id
</li>
</ul>

</section>
<section id="toc4">
<h2>1.3. Authentication helper module</h2>

<pre>
api/php/action/auth.php
</pre>

<p>
This file contains all needed code to do authentications with all features suck as the
main authentication using a user and password pair, the checktoken and the deauthtoken
to control it.
</p>

</section>
<section id="toc5">
<h2>1.4. Garbage Collector action</h2>

<pre>
api/php/action/cron.php
</pre>

<p>
This action executes the gc_exec function in the gc.php library, the execution
of this accion only is allowed from the command line
</p>

</section>
<section id="toc6">
<h2>1.5. Garbage Collector action</h2>

<pre>
api/php/action/gc.php
</pre>

<p>
This action executes the gc_exec function in the gc.php library, the execution
of this accion only is allowed from the command line
</p>

</section>
<section id="toc7">
<h2>1.6. BarCode action</h2>

<pre>
api/php/action/image.php
</pre>

<p>
This action allow to generate a barcode, you can pass the desired
message that you want to convert in barcode
</p>

<ul>
<li>@msg    =&gt; the msg that you want to codify in the qrcode
</li>
<li>@format =&gt; the format used to the result, only can be png or json
</li>
</ul>

<ul>
<li>@w =&gt; width of each unit's bar of the barcode
</li>
<li>@h =&gt; height of the barcode (without margins and text footer)
</li>
<li>@m =&gt; margin of the barcode (white area that surround the barcode)
</li>
<li>@s =&gt; size of the footer text, not used if zero
</li>
<li>@t =&gt; type of the barcode, C128 is the most common type used
</li>
</ul>

<p>
QRCode action
</p>
<p>
This action allow to generate a qrcode with the SaltOS logo embedded
in the center of the image, you can pass the desired message that you
want to convert in qrcode.
</p>

<ul>
<li>@msg    =&gt; the msg that you want to codify in the qrcode
</li>
<li>@format =&gt; the format used to the result, only can be png or json
</li>
</ul>

<ul>
<li>@s =&gt; size of each pixel used in the qrcode
</li>
<li>@m =&gt; margin of the qrcode (white area that that surround the qrcode)
</li>
<li>@l =&gt; level error correction: L (low), M (medium), Q (better), H (best)
</li>
</ul>

<p>
Captcha action
</p>
<p>
This action allo to retrieve the captcha of a randomly number or math
operation, used to prevent massive requests, can perform the action of
create the captcha image and return the result as a simple image or as
a json image
</p>

<ul>
<li>@type   =&gt; the type used to the result, only can be number or math
</li>
<li>@format =&gt; the format used to the result, only can be png or json
</li>
</ul>

<ul>
<li>@width     =&gt; the width of the generated image
</li>
<li>@height    =&gt; the height of the generated image
</li>
<li>@letter    =&gt; the size of the letters of the generated image
</li>
<li>@number    =&gt; the size of the numbers of the generated image
</li>
<li>@angle     =&gt; the angle allowed to rotate the letters and numbers
</li>
<li>@color     =&gt; the color user to paint the code
</li>
<li>@bgcolor   =&gt; the background color of the image
</li>
<li>@fgcolor   =&gt; the color used to paint the letters of the background of the image
</li>
<li>@period    =&gt; parameter for the wave transformation
</li>
<li>@amplitude =&gt; parameter for the wave transformation
</li>
<li>@blur      =&gt; true or false to enable or disable the blur effect
</li>
</ul>

<p>
Score action
</p>
<p>
This action allo to retrieve the score of a password, intended to be used
as helper previously to the authupdate call, can perform the action of
compute the score and return the result as a simple image or as a json
image
</p>

<ul>
<li>@pass   =&gt; the password that you want to compute the score
</li>
<li>@format =&gt; the format used to the result, only can be png or json
</li>
</ul>

<ul>
<li>@width  =&gt; the width of the generated image
</li>
<li>@height =&gt; the height of the generated image
</li>
<li>@size   =&gt; the size of the font of the generated image
</li>
</ul>

</section>
<section id="toc8">
<h2>1.7. Make indexing action</h2>

<pre>
api/php/action/indexing.php
</pre>

<p>
This fie contains useful functions related to the indexing action that internally uses the
mroonga engine to search in the fulltext string generated by this action
</p>

</section>
<section id="toc9">
<h2>1.8. Make indexing action</h2>

<pre>
api/php/action/integrity.php
</pre>

<p>
This fie contains useful functions related to the indexing action that internally uses the
mroonga engine to search in the fulltext string generated by this action
</p>

</section>
<section id="toc10">
<h2>1.9. Ping action</h2>

<pre>
api/php/action/ping.php
</pre>

<p>
This file implements the ping action, intended to be used by the check_network
feature from the web app that expects this specific output
</p>

</section>
<section id="toc11">
<h2>1.10. Garbage Collector action</h2>

<pre>
api/php/action/push.php
</pre>

<p>
This action executes the gc_exec function in the gc.php library, the execution
of this accion only is allowed from the command line
</p>

</section>
<section id="toc12">
<h2>1.11. DB Schema action</h2>

<pre>
api/php/action/setup.php
</pre>

<p>
This action executes the db_schema and db_static functions in the dbschema.php
library, the execution of this accion only is allowed from the command line
</p>

</section>
<section id="toc13">
<h2>1.12. Add files action</h2>

<pre>
api/php/action/upload.php
</pre>

<p>
This file implements the delete files action, requires a POST JSON request
with an array of files, and each array must contain the follow entries:
id, name, size, type, data, error, file, hash
</p>
<p>
This action checks that not error is found, get the data and clear the
data element of the array, check the prefix of the data using the type,
check the size of the data, and then, set the file and hash to the
array and store the file in the upload directory
</p>
<p>
This action checks that not error is found, checks the file element, the
size of the file, the hash of the file, and then, remove the file and
clear the file and hash element of the array
</p>

<ul>
<li>@file  =&gt; array that contains the follow elements:
</li>
<li>@id    =&gt; unique id that is used by the client to identify the response
</li>
<li>@app   =&gt; the hash, used to know the app from where the file is uploaded
</li>
<li>@name  =&gt; the name of the file
</li>
<li>@size  =&gt; the size of the file
</li>
<li>@type  =&gt; the type of the file
</li>
<li>@data  =&gt; the contents of the file encoded as inline base64
</li>
<li>@error =&gt; the error in case of errors
</li>
<li>@file  =&gt; this field is used here to put the local filename used in the file
</li>
<li>@hash  =&gt; this field contains the hash of the contents of the file
</li>
</ul>

</section>
</section>
<section id="toc14">
<h1>2. Autoload</h1>

<section id="toc15">
<h2>2.1. Apps helper module</h2>

<pre>
api/php/autoload/apps.php
</pre>

<p>
This file contains functions intended to be used as hepers of other functions, allowing to convert
between formats as the name of the app to and app id, or viceversa
</p>

<section id="toc16">
<h3>2.1.1. Apps helper function</h3>

<pre>
function __apps($fn, $arg)
</pre>

<p>
This function is used by the XXX2YYY functions as helper, it stores the
dictionary of all conversions and resolves the data using it
</p>

<ul>
<li>@fn  =&gt; the caller function
</li>
<li>@arg =&gt; the argument passed to the function
</li>
</ul>

</section>
<section id="toc17">
<h3>2.1.2. Subtables helper</h3>

<pre>
function __apps_subtables_helper($subtables)
</pre>

<p>
This function helps the follow apps to returns the subtables information into
a structure instead of string, this is very helpfull by the code that consumes
this information, allow to use it quickly without parsing the original string.
</p>

<ul>
<li>@subtables =&gt; the string that contains the subtables specification
</li>
</ul>

</section>
<section id="toc18">
<h3>2.1.3. Id to App</h3>

<pre>
function id2app($id)
</pre>

<p>
This function resolves the code of the app from the app id
</p>

<ul>
<li>@id =&gt; the app id used to resolve the code
</li>
</ul>

</section>
<section id="toc19">
<h3>2.1.4. App to Id</h3>

<pre>
function app2id($app)
</pre>

<p>
This function resolves the id of the app from the app code
</p>

<ul>
<li>@app =&gt; the code used to resolve the id
</li>
</ul>

</section>
<section id="toc20">
<h3>2.1.5. Id to Table</h3>

<pre>
function id2table($id)
</pre>

<p>
This function resolves the table of the app from the app id
</p>

<ul>
<li>@id =&gt; the app id used to resolve the table
</li>
</ul>

</section>
<section id="toc21">
<h3>2.1.6. App to Table</h3>

<pre>
function app2table($app)
</pre>

<p>
This function resolves the table of the app from the app code
</p>

<ul>
<li>@app =&gt; the app code used to resolve the table
</li>
</ul>

</section>
<section id="toc22">
<h3>2.1.7. Table to Id</h3>

<pre>
function table2id($table)
</pre>

<p>
This function resolves the id of the app from the app table
</p>

<ul>
<li>@table =&gt; the app table used to resolve the id
</li>
</ul>

</section>
<section id="toc23">
<h3>2.1.8. Table to App</h3>

<pre>
function table2app($table)
</pre>

<p>
This function resolves the code of the app from the app table
</p>

<ul>
<li>@table =&gt; the app table used to resolve the app code
</li>
</ul>

</section>
<section id="toc24">
<h3>2.1.9. Id to Subtables</h3>

<pre>
function id2subtables($id)
</pre>

<p>
This function resolves the subtables of the app from the app id
</p>

<ul>
<li>@id =&gt; the app id used to resolve the subtables
</li>
</ul>

</section>
<section id="toc25">
<h3>2.1.10. App to Subtables</h3>

<pre>
function app2subtables($app)
</pre>

<p>
This function resolves the subtables of the app from the app code
</p>

<ul>
<li>@app =&gt; the app code used to resolve the subtables
</li>
</ul>

</section>
<section id="toc26">
<h3>2.1.11. Table to Subtables</h3>

<pre>
function table2subtables($table)
</pre>

<p>
This function resolves the subtables of the app from the app table
</p>

<ul>
<li>@table =&gt; the app table used to resolve the subtables
</li>
</ul>

</section>
<section id="toc27">
<h3>2.1.12. App Exists</h3>

<pre>
function app_exists($app)
</pre>

<p>
This function detect if an app exists
</p>

<ul>
<li>@app =&gt; the app that you want to check if exists
</li>
</ul>

</section>
<section id="toc28">
<h3>2.1.13. App to Index</h3>

<pre>
function app2index($app)
</pre>

<p>
This function returns the has_index of the app
</p>

<ul>
<li>@app =&gt; the app code used to resolve the index
</li>
</ul>

</section>
<section id="toc29">
<h3>2.1.14. App to Control</h3>

<pre>
function app2control($app)
</pre>

<p>
This function returns the has_control of the app
</p>

<ul>
<li>@app =&gt; the app code used to resolve the control
</li>
</ul>

</section>
<section id="toc30">
<h3>2.1.15. App to Version</h3>

<pre>
function app2version($app)
</pre>

<p>
This function returns the has_version of the app
</p>

<ul>
<li>@app =&gt; the app code used to resolve the version
</li>
</ul>

</section>
<section id="toc31">
<h3>2.1.16. App to Files</h3>

<pre>
function app2files($app)
</pre>

<p>
This function returns the has_files of the app
</p>

<ul>
<li>@app =&gt; the app code used to resolve the files
</li>
</ul>

</section>
<section id="toc32">
<h3>2.1.17. App to Notes</h3>

<pre>
function app2notes($app)
</pre>

<p>
This function returns the has_notes of the app
</p>

<ul>
<li>@app =&gt; the app code used to resolve the notes
</li>
</ul>

</section>
<section id="toc33">
<h3>2.1.18. App to Log</h3>

<pre>
function app2log($app)
</pre>

<p>
This function returns the has_log of the app
</p>

<ul>
<li>@app =&gt; the app code used to resolve the log
</li>
</ul>

</section>
<section id="toc34">
<h3>2.1.19. Subtable to Id</h3>

<pre>
function subtable2id($subtable)
</pre>

<p>
This function resolves the id of the app from the subtable
</p>

<ul>
<li>@subtable =&gt; the app subtable used to resolve the id
</li>
</ul>

</section>
<section id="toc35">
<h3>2.1.20. Subtable to App</h3>

<pre>
function subtable2app($subtable)
</pre>

<p>
This function resolves the code of the app from the app subtable
</p>

<ul>
<li>@subtable =&gt; the app subtable used to resolve the app code
</li>
</ul>

</section>
<section id="toc36">
<h3>2.1.21. Subtable to table</h3>

<pre>
function subtable2table($subtable)
</pre>

<p>
This function resolves the table of the app from the app subtable
</p>

<ul>
<li>@subtable =&gt; the app subtable used to resolve the table
</li>
</ul>

</section>
<section id="toc37">
<h3>2.1.22. Table Exists</h3>

<pre>
function table_exists($table)
</pre>

<p>
This function detect if a table exists
</p>

<ul>
<li>@table =&gt; the table that you want to check if exists
</li>
</ul>

</section>
<section id="toc38">
<h3>2.1.23. Subtable Exists</h3>

<pre>
function subtable_exists($subtable)
</pre>

<p>
This function detect if a subtable exists
</p>

<ul>
<li>@subtable =&gt; the subtable that you want to check if exists
</li>
</ul>

</section>
<section id="toc39">
<h3>2.1.24. Id to Field</h3>

<pre>
function id2field($id)
</pre>

<p>
This function resolves the field of the app from the app id
</p>

<ul>
<li>@id =&gt; the app id used to resolve the field
</li>
</ul>

</section>
<section id="toc40">
<h3>2.1.25. App to Field</h3>

<pre>
function app2field($app)
</pre>

<p>
This function resolves the field of the app from the app code
</p>

<ul>
<li>@app =&gt; the app code used to resolve the field
</li>
</ul>

</section>
<section id="toc41">
<h3>2.1.26. Table to Field</h3>

<pre>
function table2field($table)
</pre>

<p>
This function resolves the field of the app from the app table
</p>

<ul>
<li>@table =&gt; the app table used to resolve the field
</li>
</ul>

</section>
<section id="toc42">
<h3>2.1.27. Id to Name</h3>

<pre>
function id2name($id)
</pre>

<p>
This function resolves the name of the app from the app id
</p>

<ul>
<li>@id =&gt; the app id used to resolve the name
</li>
</ul>

</section>
<section id="toc43">
<h3>2.1.28. App to Name</h3>

<pre>
function app2name($app)
</pre>

<p>
This function resolves the name of the app from the app code
</p>

<ul>
<li>@app =&gt; the app code used to resolve the name
</li>
</ul>

</section>
<section id="toc44">
<h3>2.1.29. Table to Name</h3>

<pre>
function table2name($table)
</pre>

<p>
This function resolves the name of the app from the app table
</p>

<ul>
<li>@table =&gt; the app table used to resolve the name
</li>
</ul>

</section>
<section id="toc45">
<h3>2.1.30. Detect apps files</h3>

<pre>
function detect_apps_files($file)
</pre>

<p>
This function returns the files found in the main path and in the apps path
</p>

<ul>
<li>@file =&gt; the pattern used to search files
</li>
</ul>

</section>
<section id="toc46">
<h3>2.1.31. Current app</h3>

<pre>
function current_app()
</pre>

<p>
This function returns the current app as string
</p>

</section>
<section id="toc47">
<h3>2.1.32. Detect app file</h3>

<pre>
function detect_app_file($app)
</pre>

<p>
This function returns the path found for the requested app
</p>

<ul>
<li>@app =&gt; the app that wants to retrieve the file path
</li>
</ul>

<p>
Notes:
</p>
<p>
If the app uses the yaml specification instead of the xml, this
function call the make_app_file_helper function with the yaml file
to get the xml file that must to be used in the app layer
</p>

</section>
<section id="toc48">
<h3>2.1.33. Detect app folder</h3>

<pre>
function detect_app_folder($app)
</pre>

<p>
This function returns the path found for the requested app
</p>

<ul>
<li>@app =&gt; the app that wants to retrieve the folder path
</li>
</ul>

</section>
<section id="toc49">
<h3>2.1.34. Make Apps File helper</h3>

<pre>
function make_app_file_helper($yamlfile)
</pre>

<p>
function call the make_app_file function defined in the required
field of the yaml file to generate the equivalent xml file used
as app file and returns the path to the cached file
</p>

<ul>
<li>@yamlfile =&gt; the yaml file desired to be converted to xml
</li>
</ul>

</section>
</section>
<section id="toc50">
<h2>2.2. Array helper module</h2>

<pre>
api/php/autoload/array.php
</pre>

<p>
This file contain useful array functions, too we have added some features
that historically appear in the import module, they allow to modify arrays
using xpath notation, apply filters and patchs or simply, manipulate the
data stored in an array of the form row/rows.
</p>

<section id="toc51">
<h3>2.2.1. Null to array converter</h3>

<pre>
function array_protected($x)
</pre>

<p>
This function convert all nulls into an array, is intended to be
used as helper for example in the glob output, to force to have
an array in all cases
</p>

<ul>
<li>@arr =&gt; the input, generally must to be an array, if a null is passed,
        then a void array will be returned
</li>
</ul>

</section>
<section id="toc52">
<h3>2.2.2. Join attr value</h3>

<pre>
function join_attr_value($array)
</pre>

<p>
This function allow to join the #attr and value to get only an associative
array, it is intended to be used to simplify the specification of some elements
and to simplify the usage of this elements in the client side
</p>

<ul>
<li>@array =&gt; the input that can contains an array with #attr and value
</li>
</ul>

</section>
<section id="toc53">
<h3>2.2.3. Get Node helper</h3>

<pre>
function __array_getnode($path, $array)
</pre>

<p>
This function is a helper used to get a node in a xml structure
</p>

<ul>
<li>@path  =&gt; a path of the desired node
</li>
<li>@array =&gt; the array with nodes of the xml structure
</li>
</ul>

<p>
Returns the contents of the node of the specified path
</p>

</section>
<section id="toc54">
<h3>2.2.4. Get Value helper</h3>

<pre>
function __array_getvalue($array)
</pre>

<p>
This function is a helper used to get a value if exists of a node structure
</p>

<ul>
<li>@array =&gt; an array
</li>
</ul>

<p>
Retusn the value if exists, otherwise the same input
</p>

</section>
<section id="toc55">
<h3>2.2.5. Get Attr helper</h3>

<pre>
function __array_getattr($elem, $array)
</pre>

<p>
This function is a helper used to get a attr element if exists of a node structure
</p>

<ul>
<li>@elem  =&gt; a string representing an element
</li>
<li>@array =&gt; an array containing the node
</li>
</ul>

<p>
Returns the attr if exists, otherwise null
</p>

</section>
<section id="toc56">
<h3>2.2.6. Add Node helper</h3>

<pre>
function __array_addnode($path, &amp;$array, $value)
</pre>

<p>
This function is used to add data into a xml structure
</p>

<ul>
<li>@path  =&gt; the desired path where do you want to add the data
</li>
<li>@array =&gt; the array with the xml structure
</li>
<li>@value =&gt; the value that do you want to add
</li>
</ul>

<p>
true if the function can add the data, false otherwise
</p>

</section>
<section id="toc57">
<h3>2.2.7. Set Node helper</h3>

<pre>
function __array_setnode($path, &amp;$array, $value)
</pre>

<p>
This function is used to set data into a xml structure
</p>

<ul>
<li>@path  =&gt; the desired path where do you want to put the data,
</li>
<li>@array =&gt; the array with the xml structure
</li>
<li>@value =&gt; the value that do you want to put
</li>
</ul>

<p>
Returns true if the function can set the value, false otherwise
</p>

</section>
<section id="toc58">
<h3>2.2.8. Del Node helper</h3>

<pre>
function __array_delnode($path, &amp;$array)
</pre>

<p>
This function is used to remove data of the xml structure
</p>

<ul>
<li>@path  =&gt; the desired path where do you want to remove
</li>
<li>@array =&gt; the array with the xml structure
</li>
</ul>

<p>
Returns true if the function can remove the path, false otherwise
</p>

</section>
<section id="toc59">
<h3>2.2.9. Filter helper</h3>

<pre>
function __array_filter($array, $filter, $eval = false)
</pre>

<p>
This function tries to apply a filter to a tree array, too allow to use
the evaluation system to allow to pass as filter an expression like this
A=M23
</p>

<ul>
<li>@array  =&gt; the tree array that you want to apply the filter
</li>
<li>@filter =&gt; the filter to apply
</li>
<li>@eval   =&gt; set to true if you want to enable the eval feature
</li>
</ul>

</section>
<section id="toc60">
<h3>2.2.10. Filter Recursive helper</h3>

<pre>
function __array_filter_rec($node, $filter, $eval, $parent = [])
</pre>

<p>
This function is a helper of the previous function and is able to to the
same but with recursivity
</p>

<ul>
<li>@node   =&gt; the tree node that you want to filter
</li>
<li>@filter =&gt; the filter to apply
</li>
<li>@eval   =&gt; set to 1 if you want to enable the eval feature
</li>
<li>@parent =&gt; this parameter is intended to be used internaly by the function
</li>
</ul>

</section>
<section id="toc61">
<h3>2.2.11. Apply Patch</h3>

<pre>
function __array_apply_patch(&amp;$array, $key, $val)
</pre>

<p>
This function is able to apply a patch in the tree array, this allow to
update the desired branch of the tree using a xpath notation
</p>

<ul>
<li>@array =&gt; the array that you want to apply the patch
</li>
<li>@key   =&gt; the xpath where you want to apply the patch
</li>
<li>@val   =&gt; the val that you want to put in the desired xpath
</li>
</ul>

</section>
<section id="toc62">
<h3>2.2.12. Apply Patch Recursive helper</h3>

<pre>
function __array_apply_patch_rec(&amp;$array, $key, $val)
</pre>

<p>
This function is a helper of the previous function and is able to to the
same but with recursivity
</p>

<ul>
<li>@array =&gt; the array that you want to apply the patch
</li>
<li>@key   =&gt; the xpath where you want to apply the patch
</li>
<li>@val   =&gt; the val that you want to put in the desired xpath
</li>
</ul>

</section>
<section id="toc63">
<h3>2.2.13. Is attr value</h3>

<pre>
function is_attr_value($array)
</pre>

<p>
This function return true if the data argument is an array with #attr and value
</p>

<ul>
<li>@array =&gt; the array that wants to check
</li>
</ul>

</section>
<section id="toc64">
<h3>2.2.14. Arrays to array</h3>

<pre>
function arrays2array()
</pre>

<p>
This function internally implements the old xml_join feature that allow to merge
multiple files into one using the fix_key of the keys in the first level as key
to join.
</p>
<p>
$args =&gt; This function process dynamically all arguments
</p>
<p>
Notes:
</p>

<ul>
<li>This function is derived from the xmlfiles2array that get all files and process
  the contents to join with a certain logics
</li>
<li>In a commit, this function become to be the main joining function and xmlfiles2array
  uses it to do the real job
</li>
</ul>

</section>
<section id="toc65">
<h3>2.2.15. Xpath search array</h3>

<pre>
function xpath_search_array($xpath, $array)
</pre>

<p>
This function is intended to do searches using the xpath notation
like list[id=table]/actions, the main idea is that this function can
returns an array with all occurrences because the same xpath can choose
more that one result
</p>

<ul>
<li>@xpath =&gt; the string containing the search xpath
</li>
<li>@array =&gt; the array that contains the search data
</li>
</ul>

</section>
<section id="toc66">
<h3>2.2.16. Xpath search first</h3>

<pre>
function xpath_search_first($xpath, $array)
</pre>

<p>
This function is intended to returns the first result
of the array returned by the xpath_search_first function
</p>

<ul>
<li>@xpath =&gt; the string containing the search xpath
</li>
<li>@array =&gt; the array that contains the search data
</li>
</ul>

<p>
Notes:
</p>
<p>
In case of not occurrences, null is returned
</p>

</section>
<section id="toc67">
<h3>2.2.17. Xpath search first</h3>

<pre>
function xpath_search_first_value($xpath, $array)
</pre>

<p>
This function is intended to returns the value of the first
result obtained from the xpath_search_first function
</p>

<ul>
<li>@xpath =&gt; the string containing the search xpath
</li>
<li>@array =&gt; the array that contains the search data
</li>
</ul>

<p>
Notes:
</p>
<p>
In case of not occurrences, null is returned
</p>

</section>
<section id="toc68">
<h3>2.2.18. Array transpose</h3>

<pre>
function array_transpose($input)
</pre>

<p>
This function returns a transposed array, intended to be used
when needs an array of cols instead of rows, for example, ideal
to be used in the excel widget
</p>
<p>
The expected output must to be the same input array but swaping
the first and second indeces level, in other words, this function
is able to convert arrays from A*B to B*A dimensions
</p>

<ul>
<li>@input =&gt; the input array
</li>
</ul>

</section>
<section id="toc69">
<h3>2.2.19. Array lowercase</h3>

<pre>
function array_lowercase($array)
</pre>

<p>
This function do the same that strtolower but apply it to all array values
</p>

<ul>
<li>@array =&gt; the array that you want to convert to lower case
</li>
</ul>

</section>
<section id="toc70">
<h3>2.2.20. Array key lowercase</h3>

<pre>
function array_key_lowercase($array)
</pre>

<p>
This function do the same that the array_lowercase but only apply to all
keys of the array
</p>

<ul>
<li>@array =&gt; the array that you want to convert to lower case
</li>
</ul>

</section>
<section id="toc71">
<h3>2.2.21. Array key search</h3>

<pre>
function array_key_search($needed, $array)
</pre>

<p>
This function allow to search keys in the array using a case insensitive search
</p>

<ul>
<li>@needed =&gt; the desired key used in the case insensitive search
</li>
<li>@array  =&gt; the array where do you want to found the key
</li>
</ul>

<p>
Notes:
</p>
<p>
In case of not found the desired key, the original needed param is returned
</p>

</section>
<section id="toc72">
<h3>2.2.22. Explode With Quotes</h3>

<pre>
function explode_with_quotes($separator, $str, $limit = 0)
</pre>

<p>
This function tries to do the same things that the original explode but add
the quotes feature, don't break an string contained in a single or double
quotes, this allow to implement features like a search that forces specific
strings with spaces
</p>

<ul>
<li>@separator =&gt; the delimiter character used in the explode feature
</li>
<li>@str       =&gt; the string that you want to explode
</li>
<li>@limit     =&gt; the number of elements that can contains the result
</li>
</ul>

</section>
<section id="toc73">
<h3>2.2.23. Grep helper</h3>

<pre>
function array_grep($input, $pattern, $invert = false)
</pre>

<p>
This function emulates the grep command, is able to invert the pattern
selection and returns the same array with the grep applied, tries to do
the grep ignoring case and ignoring extended chars and is able to search
words ignoring accents
</p>

<ul>
<li>@input   =&gt; the input array
</li>
<li>@pattern =&gt; the search pattern
</li>
<li>@invert  =&gt; default to false to search, true to invert the selection
</li>
</ul>

</section>
</section>
<section id="toc74">
<h2>2.3. Compatibility helper module</h2>

<pre>
api/php/autoload/compat.php
</pre>

<p>
This file add some functions used by SaltOS that can not be found in all allowed versions of PHP
</p>

<section id="toc75">
<h3>2.3.1. Array Key Last</h3>

<pre>
function array_key_last(array $array)
</pre>

<p>
This function appear in PHP 7.3, and for previous version SaltOS
uses this code
</p>

<ul>
<li>@array =&gt; the array where you want to obtain the last key
</li>
</ul>

<p>
Notes:
</p>
<p>
Code copied from the follow web:
<a href="https://www.php.net/manual/es/function.array-key-last.php#124007">https://www.php.net/manual/es/function.array-key-last.php#124007</a>
</p>

</section>
<section id="toc76">
<h3>2.3.2. Array Key First</h3>

<pre>
function array_key_first(array $arr)
</pre>

<p>
This function appear in PHP 7.3, and for previous version SaltOS
uses this code
</p>

<ul>
<li>@array =&gt; the array where you want to obtain the first key
</li>
</ul>

<p>
Notes:
</p>
<p>
Code copied from the follow web:
<a href="https://www.php.net/manual/es/function.array-key-last.php#124007">https://www.php.net/manual/es/function.array-key-last.php#124007</a>
</p>

</section>
</section>
<section id="toc77">
<h2>2.4. Config helper module</h2>

<pre>
api/php/autoload/config.php
</pre>

<p>
This fie contains useful functions related to configuration features
</p>

<section id="toc78">
<h3>2.4.1. Get config</h3>

<pre>
function get_config($key, $user_id = -1)
</pre>

<p>
This function is intended to be used to retrieve values from the config
system, as first level, the function try to get the value from the
tbl_config, and if it is not found, then the function try to get the
values from the config file.
</p>

<ul>
<li>@key     =&gt; the key that you want to retrieve the value
</li>
<li>@user_id =&gt; the user_id used in the first search step
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is a new release of the olds getConfig and getDefault,
depending of the user_id argument, it tries to search in the config file or
in the database, for negative values the function uses the config file and
for zero or positive values, tries to search it in the database
</p>
<p>
To prevent errors in case of duplicates, we are using the ORDER BY id ASC
LIMIT 1, this allow to get and set only the first register found by the
select query
</p>

</section>
<section id="toc79">
<h3>2.4.2. Set config</h3>

<pre>
function set_config($key, $val, $user_id = -1)
</pre>

<p>
This function sets a value to a config key, the data will be stored in the
database using the tbl_config for zero or positive values of user_id, and
in the memory of the config file for negative user_id values
</p>

<ul>
<li>@key     =&gt; the key that you want to set
</li>
<li>@val     =&gt; the value that you want to set
</li>
<li>@user_id =&gt; the user_id used as filter
</li>
</ul>

<p>
Notes:
</p>
<p>
If null val is passed as argument, then the entry of the config or database
is removed, the main idea is to use the same method used by the setcookie
that allow to remove entries by setting the value to null
</p>
<p>
To prevent errors in case of duplicates, we are using the ORDER BY id ASC
LIMIT 1, this allow to get and set only the first register found by the
select query
</p>

</section>
<section id="toc80">
<h3>2.4.3. Detect config files</h3>

<pre>
function detect_config_files($file)
</pre>

<p>
This function returns the files found in the main path, in the apps path and in the files path
</p>

<ul>
<li>@file =&gt; the pattern used to search files
</li>
</ul>

</section>
<section id="toc81">
<h3>2.4.4. Get config array</h3>

<pre>
function get_config_array($prefix, $user_id)
</pre>

<p>
This function is intended to retrieve the configuration associated to an user
using a prefix for all keys.
</p>

<ul>
<li>@prefix  =&gt; the prefix used in the keys of the config
</li>
<li>@user_id =&gt; the user_id used in the search query
</li>
</ul>

</section>
<section id="toc82">
<h3>2.4.5. Prepare Config Files</h3>

<pre>
function prepare_config_files($array)
</pre>

<p>
This function tries to join all config files into one unique structure, to do it
joins nodes with the same key, for example, you can use the data/files/config.xml
file to set the specific database configuration and overwrite the db/pdo_mysql or
the db/type, the main idea is to replace the nodes of the second level because the
arrays2array function join previously the differents files into one structure usin
the first level to do the join, and only adds the repeated overload without take
decisions about overwrite the contents like this function do
</p>

<ul>
<li>@array =&gt; the main array that you want to prepare as config array
</li>
</ul>

</section>
</section>
<section id="toc83">
<h2>2.5. Database helper module</h2>

<pre>
api/php/autoload/database.php
</pre>

<p>
This fie contains useful functions related to database, allow to connect, check queries, execute
queries, disconnect, retrieve rows and manipulate resultsets of the database
</p>

<section id="toc84">
<h3>2.5.1. DB Connect</h3>

<pre>
function db_connect($args = null)
</pre>

<p>
This function is intended to stablish the connection to the database
</p>

<ul>
<li>@args =&gt; is an array with key val pairs
</li>
<li>@host =&gt; the host for the connection
</li>
<li>@port =&gt; the port used for the connection
</li>
<li>@name =&gt; name of the database for the connection
</li>
<li>@user =&gt; user used to stablish the connection
</li>
<li>@pass =&gt; pass used to stablish the connection
</li>
<li>@file =&gt; the file that contains the database
</li>
</ul>

<p>
Notes:
</p>
<p>
The parameters can be different depending of each database driver, in general the arguments can
be the host, port, name, user and pass for database's servers and only file for the sqlite database
</p>
<p>
If the args argument is null, the the function try to use the configuration stored in the config file
and depending of the argument presense, it will return the database object or store it in the config
to be used by the nexts functions of this php file
</p>

</section>
<section id="toc85">
<h3>2.5.2. DB Check</h3>

<pre>
function db_check($query, $params = [])
</pre>

<p>
This function is intended to check that the query execution will not trigger an error
</p>

<ul>
<li>@query =&gt; the query that you want to validate
</li>
</ul>

</section>
<section id="toc86">
<h3>2.5.3. DB Escape</h3>

<pre>
function db_escape($str)
</pre>

<p>
This function is intended to escape the special chars to sanitize the string to be used
in a sql query
</p>

<ul>
<li>@str =&gt; the string that you want to sanitize
</li>
</ul>

</section>
<section id="toc87">
<h3>2.5.4. DB Query</h3>

<pre>
function db_query($query, ...$args)
</pre>

<p>
This public function is intended to execute the query and returns the resultset
</p>

<ul>
<li>@query =&gt; the query that you want to execute
</li>
<li>@fetch =&gt; the type of fetch that you want to use, can be auto, query, column or concat
</li>
</ul>

<p>
Notes:
</p>
<p>
The fetch argument can perform an speed up in the execution of the retrieve action, and
can modify how the result is returned
</p>
<p>
auto: this fetch method try to detect if the resultset contains one or more columns, and
sets the fetch to column (if the resultset only contains one column) or to query (otherwise)
</p>
<p>
query: this fetch method returns all resultset as an array of rows, and each row contain the
pair of key val with the name of the field and the value of the field
</p>
<p>
column: this fetch method returns an array where each element is each value of the field of
the each row, this is useful when for example do you want to get all ids of a query, with
this method you can obtain an array with each value of the array is an id of the resultset
</p>
<p>
concat: this fetch method is an special mode intended to speed up the retrieve of large
arrays, this is useful when you want to get all ids of a query and you want to get a big
sized array, in this case, is more efficient to get an string separated by commas with all
ids instead of an array where each element is an id
</p>

</section>
<section id="toc88">
<h3>2.5.5. DB Fetch Row</h3>

<pre>
function db_fetch_row(&amp;$result)
</pre>

<p>
This function returns the next row of the resultset queue
</p>

<ul>
<li>@result =&gt; this argument is passed by reference and contains the resultset queue
           obtained by the db_query
</li>
</ul>

</section>
<section id="toc89">
<h3>2.5.6. DB Fetch All</h3>

<pre>
function db_fetch_all(&amp;$result)
</pre>

<p>
This function returns all rows of the resultset queue
</p>

<ul>
<li>@result =&gt; this argument is passed by reference and contains the resultset queue
           obtained by the db_query
</li>
</ul>

</section>
<section id="toc90">
<h3>2.5.7. DB Num Rows</h3>

<pre>
function db_num_rows($result)
</pre>

<p>
This function returns the total number of the results in the resultset queue
</p>

<ul>
<li>@result =&gt; this argument is passed by reference and contains the resultset queue
           obtained by the db_query
</li>
</ul>

</section>
<section id="toc91">
<h3>2.5.8. DB Num Fields</h3>

<pre>
function db_num_fields($result)
</pre>

<p>
This function returns the number of fields of the resultset queue
</p>

<ul>
<li>@result =&gt; this argument is passed by reference and contains the resultset queue
           obtained by the db_query
</li>
</ul>

</section>
<section id="toc92">
<h3>2.5.9. DB Field Name</h3>

<pre>
function db_field_name($result, $index)
</pre>

<p>
This function returns the name of the field identified by the index field
</p>

<ul>
<li>@result =&gt; this argument is passed by reference and contains the resultset queue
           obtained by the db_query
</li>
</ul>

</section>
<section id="toc93">
<h3>2.5.10. DB Last Insert ID</h3>

<pre>
function db_last_insert_id()
</pre>

<p>
This function returns the last insert id
</p>

</section>
<section id="toc94">
<h3>2.5.11. DB Free</h3>

<pre>
function db_free(&amp;$result)
</pre>

<p>
This function releases all memory used by the resultset queue
</p>

<ul>
<li>@result =&gt; this argument is passed by reference and contains the resultset queue
           obtained by the db_query
</li>
</ul>

</section>
<section id="toc95">
<h3>2.5.12. DB Disconnect</h3>

<pre>
function db_disconnect()
</pre>

<p>
This function close the database connection and sets the link to null
</p>

</section>
</section>
<section id="toc96">
<h2>2.6. Datetime helper module</h2>

<pre>
api/php/autoload/datetime.php
</pre>

<p>
This fie contains useful functions related to datetime, allow to get current timestamp in various
formats, allow to evaluate timestamps and some helper more
</p>

<section id="toc97">
<h3>2.6.1. Current Date</h3>

<pre>
function current_date($offset = 0)
</pre>

<p>
This function returns the current date in a YYYY-MM-DD format, this is used
by a lot of functions in SaltOS, allow to specify a bias used to move the
current time mark
</p>

<ul>
<li>@offset =&gt; the bias added to the current time mark
</li>
</ul>

</section>
<section id="toc98">
<h3>2.6.2. Current Time</h3>

<pre>
function current_time($offset = 0)
</pre>

<p>
This function returns the current time in a HH:II:SS format, this is used
by a lot of functions in SaltOS, allow to specify a bias used to move the
current time mark
</p>

<ul>
<li>@offset =&gt; the bias added to the current time mark
</li>
</ul>

</section>
<section id="toc99">
<h3>2.6.3. Current DateTime</h3>

<pre>
function current_datetime($offset = 0)
</pre>

<p>
This function returns the current date and time in a YYYY-MM-SS HH:II:SS format,
this is used by a lot of functions in SaltOS, allow to specify a bias used to
move the current time mark
</p>

<ul>
<li>@offset =&gt; the bias added to the current time mark
</li>
</ul>

</section>
<section id="toc100">
<h3>2.6.4. Current Decimals</h3>

<pre>
function current_decimals($offset = 0, $size = 4)
</pre>

<p>
This function returns the current decimals to be added to the seconds as a
decimal part, this function uses the microtime function to get this level of
precision that can not be obtained using the original date and time functions
</p>

<ul>
<li>@offset =&gt; the bias added to the current time mark
</li>
<li>@size   =&gt; the size of the returned decimal part
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is used by current_datetime_decimals, and don't have more uses
that provice more precision in the logs files
</p>

</section>
<section id="toc101">
<h3>2.6.5. Current DateTime Decimals</h3>

<pre>
function current_datetime_decimals($offset = 0, $size = 4)
</pre>

<p>
This function returns the current date and time with decimals in the seconds
in a YYYY-MM-DD HH:II:SS.XXXX format, useful when do you want to log information
more accuracy to debug issues, for example
</p>

<ul>
<li>@offset =&gt; the bias added to the current time mark
</li>
<li>@size   =&gt; the size used by the decimal part
</li>
</ul>

</section>
<section id="toc102">
<h3>2.6.6. Dateval</h3>

<pre>
function dateval($value)
</pre>

<p>
This function try to do the same thing that intval or strval, but for date
values, to do this, this function try to separate all elements and identify
the year position and the other elements, the result will be of the format
YYYY-MM-DD
</p>

<ul>
<li>@value =&gt; the input value to validate
</li>
</ul>

<p>
Notes:
</p>
<p>
This function try to cast the year, month and day from 0000-00-00 to valid
values, this is because the databases accepts the 0000-00-00 date and is used
as emulated null, the month are limited to 12 and the day is limited to the
days of the month and year, this is useful because the dates that are more
greather that zero, will have a valid and an existing value
</p>

</section>
<section id="toc103">
<h3>2.6.7. Day of a Month helper</h3>

<pre>
function __days_of_a_month($year, $month)
</pre>

<p>
This function is a helper used by other date and datetime functions, this
is useful because allow to fix problems in dates that use days out of range
</p>

<ul>
<li>@year  =&gt; year that you want to use in the validation
</li>
<li>@month =&gt; month that you want to use in the validation
</li>
</ul>

</section>
<section id="toc104">
<h3>2.6.8. Timeval</h3>

<pre>
function timeval($value)
</pre>

<p>
This function try to do the same thing that intval or strval, but for time
values, to do this, this function try to separate all elements and identify
the elements, the result will be of the format HH:II:SS
</p>

<ul>
<li>@value =&gt; the input value to validate
</li>
</ul>

</section>
<section id="toc105">
<h3>2.6.9. Datetimeval</h3>

<pre>
function datetimeval($value)
</pre>

<p>
This function try to do the same thing that intval or strval, but for datetime
values, to do this, this function try to separate all elements and identify
the year position and the other elements, the result will be of the format
YYYY-MM-DD HH:II:SS
</p>

<ul>
<li>@value =&gt; the input value to validate
</li>
</ul>

<p>
Notes:
</p>
<p>
This function try to cast the year, month and day from 0000-00-00 to valid
values, this is because the databases accepts the 0000-00-00 date and is used
as emulated null, the month are limited to 12 and the day is limited to the
days of the month and year, this is useful because the dates that are more
greather that zero, will have a valid and an existing value
</p>

</section>
<section id="toc106">
<h3>2.6.10. Time to Seconds</h3>

<pre>
function __time2secs($time)
</pre>

<p>
This function converts the time format into seconds
</p>

<ul>
<li>@time =&gt; time to be converted into seconds, the format will be HH:II:SS
</li>
</ul>

</section>
<section id="toc107">
<h3>2.6.11. Seconds to Time</h3>

<pre>
function __secs2time($secs)
</pre>

<p>
This function converts the seconds into time format
</p>

<ul>
<li>@secs =&gt; seconds to be converted to time format, the format will be a number
</li>
</ul>

</section>
<section id="toc108">
<h3>2.6.12. Current Day Of Week</h3>

<pre>
function current_dow($offset = 0)
</pre>

<p>
This function returns the current day of week as integer between 1 and 7
range, this is used by some functions in SaltOS, allow to specify a bias
used to move the current time mark
</p>

<ul>
<li>@offset =&gt; the bias added to the current time mark
</li>
</ul>

</section>
<section id="toc109">
<h3>2.6.13. Datetime format</h3>

<pre>
function datetime_format($x)
</pre>

<p>
This function returns the datetime using the europe format for d/m/Y instead of Y-m-d
</p>

<ul>
<li>@x =&gt; the datetime string that you want to convert
</li>
</ul>

</section>
</section>
<section id="toc110">
<h2>2.7. Error helper module</h2>

<pre>
api/php/autoload/error.php
</pre>

<p>
This fie contains useful functions related to error management, allow to trigger and manage
errors, too contains the code used for the error and exception handlers
</p>

<section id="toc111">
<h3>2.7.1. Show PHP Error</h3>

<pre>
function show_php_error($array)
</pre>

<p>
This function allow to SaltOS to trigger the errors in a multiple levels:
</p>
<p>
1) Check if the error is caused by a memory allocation error, and in this case, try
to setup more memory to continue executing the error function, sometimes if the system
is using all memory, this function can not do all tasks and don't know whats be happening
</p>
<p>
2) Add some extra traces if they are not found in the input array
</p>
<p>
3) Create a human readable message in text and json format, the text will be used
to log the error using a regular file and the json will be used as stdout response
</p>
<p>
4) If the error is caused by a deprecation, the error will be logged in the log file
but the execution of the code will continue (if it can continue!!!)
</p>
<p>
5) Try to categorize the error and log the text in the specific log file, this part
is optimized to prevent the addition of repeated errors using a hash as a trick
</p>
<p>
6) Send a json to the stdout using the output handler.
</p>
<p>
THs input @array can contain pairs of key val:
</p>

<ul>
<li>@dberror    =&gt; The text used in the DB Error section
</li>
<li>@phperror   =&gt; The text used in the PHP Error section
</li>
<li>@xmlerror   =&gt; The text used in the XML Error section
</li>
<li>@jserror    =&gt; The text used in the JS Error section
</li>
<li>@dbwarning  =&gt; The text used in the DB Warning section
</li>
<li>@phpwarning =&gt; The text used in the PHP Warning section
</li>
<li>@xmlwarning =&gt; The text used in the XML Warning section
</li>
<li>@jswarning  =&gt; The text used in the JS Warning section
</li>
<li>@source     =&gt; The text used in the Source section
</li>
<li>@exception  =&gt; The text used in the Exception section
</li>
<li>@details    =&gt; The text used in the Details section
</li>
<li>@query      =&gt; The text used in the Query section
</li>
<li>@backtrace  =&gt; The text used in the Backtrace section
</li>
<li>@debug      =&gt; The text used in the Debug section
</li>
</ul>

<p>
Notes:
</p>
<p>
The unset for the pid and the time keys of the debug array is justificate
because each execution modify the pid and the time entries and break the
optimization of the hash with the checklog to prevent repetitions in the
log file
</p>

</section>
<section id="toc112">
<h3>2.7.2. Do Message Error</h3>

<pre>
function do_message_error($array)
</pre>

<p>
This function acts as a helper of the show_php_error, is intended to build
the text and the json messages used to the log file and for the stdout channel
</p>
<p>
THs input @array can contain pairs of key val:
</p>

<ul>
<li>@dberror    =&gt; The text used in the DB Error section
</li>
<li>@phperror   =&gt; The text used in the PHP Error section
</li>
<li>@xmlerror   =&gt; The text used in the XML Error section
</li>
<li>@jserror    =&gt; The text used in the JS Error section
</li>
<li>@dbwarning  =&gt; The text used in the DB Warning section
</li>
<li>@phpwarning =&gt; The text used in the PHP Warning section
</li>
<li>@xmlwarning =&gt; The text used in the XML Warning section
</li>
<li>@jswarning  =&gt; The text used in the JS Warning section
</li>
<li>@source     =&gt; The text used in the Source section
</li>
<li>@exception  =&gt; The text used in the Exception section
</li>
<li>@details    =&gt; The text used in the Details section
</li>
<li>@query      =&gt; The text used in the Query section
</li>
<li>@backtrace  =&gt; The text used in the Backtrace section
</li>
<li>@debug      =&gt; The text used in the Debug section
</li>
</ul>

<p>
Returns an array with the text and the json formated output ready to be used
in the log file and in the stdout channel
</p>

</section>
<section id="toc113">
<h3>2.7.3. Program Handlers</h3>

<pre>
function program_handlers()
</pre>

<p>
This function program all error handlers
</p>

</section>
<section id="toc114">
<h3>2.7.4. Error Handler</h3>

<pre>
function __error_handler($type, $message, $file, $line)
</pre>

<p>
This function is the callback function used by the set_error_handler
</p>
<p>
Ths arguments are defined by the set_error_handler:
</p>

<ul>
<li>@type    =&gt; The code of the error
</li>
<li>@message =&gt; The descriptive message of the error
</li>
<li>@file    =&gt; The filename of the file that trigger the error
</li>
<li>@line    =&gt; The line where the error will occurred
</li>
</ul>

</section>
<section id="toc115">
<h3>2.7.5. Exception Handler</h3>

<pre>
function __exception_handler($e)
</pre>

<p>
This function is the callback function used by the set_exception_handler
</p>
<p>
Ths arguments are defined by the set_exception_handler:
</p>

<ul>
<li>@e =&gt; object that contains the getMessage, getCode, getFile, getLine and getTrace
      methods
</li>
</ul>

</section>
<section id="toc116">
<h3>2.7.6. Shutdown Handler</h3>

<pre>
function __shutdown_handler()
</pre>

<p>
This function is the callback function used by the register_shutdown_function, try to
detect if an error is the cause of the shutdown of the script, note that a correct
execution will execute this function and only it must to trigger an error if a real
error is in the stack of the errors events, to do it this function uses the error_get_last
to check if the value in in the list of typified errors
</p>

</section>
<section id="toc117">
<h3>2.7.7. Get code from trace</h3>

<pre>
function __get_code_from_trace()
</pre>

<p>
This function acts as helper of the show_json_error, and try to get the filename and the line
where the error will be triggered, for example, an error triggered from the index.php at line
23 will generate a code index:23, this information will be useful for our technical service
to help the users when live issues with our API
</p>

<ul>
<li>@trace =&gt; the array returned by the debug_backtrace function
</li>
<li>@index =&gt; the position of the array used to get the filename and the line
</li>
</ul>

<p>
Notes:
</p>
<p>
This function gets the arguments dinamically, this allow to send for example the array with
the trace, the desired index or both datas in your prefered order, the trick to detect each
param is to expect an array for the trace and a number for the index.
</p>

</section>
<section id="toc118">
<h3>2.7.8. Show JSON Error</h3>

<pre>
function show_json_error($msg, $logout = false)
</pre>

<p>
This function is triggered from the code in a controlate errors, the idea is to have
a simple way to send controled errors to the user using a json output channel, and to
do it, we have this function that can be called with a simple message and the code
is created automatically to help the backtrace of the issues
</p>

<ul>
<li>@msg    =&gt; this contains a simple text that is used in the json output
</li>
<li>@logout =&gt; this allow to send the logout flag to force to show the login screen
</li>
</ul>

</section>
<section id="toc119">
<h3>2.7.9. Get code from file and line</h3>

<pre>
function __get_code_from_file_and_line($file, $line)
</pre>

<p>
This function returns the string that contains the PATHINFO_FILENAME and the line to idenfify
the launcher of an error, for example
</p>

<ul>
<li>@file =&gt; filename used to obtain the first part of the code
</li>
<li>@line =&gt; line used to construct the last part of the code
</li>
</ul>

</section>
<section id="toc120">
<h3>2.7.10. Detect Recursion</h3>

<pre>
function detect_recursion($fn)
</pre>

<p>
This function allow to SaltOS to detect the recursin, to do it, uses the debug_backtrace
function that returns all information about the execution of the current function, the
main idea of this function is to detect in what lines of the backtrace appear the file
or the function, and returns the count of times that appear
</p>

<ul>
<li>@fn =&gt; the name of the function or file, can be multiples functions or files separated
       by a comma
</li>
</ul>

</section>
<section id="toc121">
<h3>2.7.11. Overload error handler</h3>

<pre>
function overload_error_handler($words)
</pre>

<p>
This function allow to add a new error handler that is able to ignore certain errors
that contains the words used as argument, this is usefull in cases where php trigger
an uncontrolable error that not are possible to control using other techniques like
try/catch or using the documented specification
</p>

<ul>
<li>@words =&gt; the list of words that must to contain the error desired to be ignored
</li>
</ul>

</section>
</section>
<section id="toc122">
<h2>2.8. Execution helper module</h2>

<pre>
api/php/autoload/exec.php
</pre>

<p>
This fie contains useful functions related to execution of external programs, allow to execute,
check commands and manage some features as the cache usage or the timeout used in each execution
</p>

<section id="toc123">
<h3>2.8.1. OB Passthru</h3>

<pre>
function ob_passthru($cmd, $expires = 0)
</pre>

<p>
This function is a join of ob_start and passthru, the main idea
is to execute a program using the command line and get the
output (only stdout and not stderr) and return the data
</p>

<ul>
<li>@cmd     =&gt; the command line that you want to execute
</li>
<li>@expires =&gt; the expires time used to compute if the cache is valid
</li>
</ul>

<p>
This funtion tries to execute the command using some of the
provided methods, passthru, system, exec and shell_exec, another
feature is that the function detects what command are available
to use
</p>

</section>
<section id="toc124">
<h3>2.8.2. Check Commands</h3>

<pre>
function check_commands($commands, $expires = -1)
</pre>

<p>
This function tries to validate if the commands are available
in the system, to do it, uses the unix command witch
</p>

<ul>
<li>@commands =&gt; the commands that you want to check if are they available
</li>
<li>@expires  =&gt; the expires time used to compute if the cache is valid
</li>
</ul>

</section>
<section id="toc125">
<h3>2.8.3. Is Disabled Function</h3>

<pre>
function is_disabled_function($fn)
</pre>

<p>
This function check if the argument contains a disabled
function, this feature uses the variables disable_functions
and suhosin.executor.func.blacklist to get the list of all
disabled functions
</p>

<ul>
<li>@fn =&gt; the function that you want to check if is it disabled
</li>
</ul>

<p>
Notes:
</p>
<p>
As an extra feature, this function can receive two arguments
to add and del functions to the static $array, this is usefull
for utest to check the correctness of the function
</p>

</section>
<section id="toc126">
<h3>2.8.4. Exec Timeout</h3>

<pre>
function __exec_timeout($cmd)
</pre>

<p>
This helper function allow to execute commands using the external
command timeout, this unix command allow to define the timeout for
an execution of other command, and when the timeout is reached, then
break the execution killing the process
</p>

<ul>
<li>@cmd =&gt; the command that you want to execute with a timeout control
</li>
</ul>

<p>
Returns the string that contains the command with ths timeout control
</p>

</section>
</section>
<section id="toc127">
<h2>2.9. File utils helper module</h2>

<pre>
api/php/autoload/file.php
</pre>

<p>
This fie contains useful functions related to the file usage, allow to manage directories, files,
caches, paths, permissions, remote files and more
</p>

<section id="toc128">
<h3>2.9.1. Get Directory</h3>

<pre>
function get_directory($key)
</pre>

<p>
This function returns the directory configured to the key requested, too can define a default
value, useful when the configuration still not loaded and SaltOS need some directory to do
something as store data in the log file, for example
</p>

<ul>
<li>@key =&gt; the key used in get_config to request the configured directory
</li>
</ul>

</section>
<section id="toc129">
<h3>2.9.2. Get Temp File</h3>

<pre>
function get_temp_file($ext = '')
</pre>

<p>
This function is intended to get a unique temporary file, used for temporary
purposes as put contents to be used as input in a command
</p>

<ul>
<li>@ext =&gt; the extension of the temporary file, useful for some commands that
        try to detect the contents using the extension
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses the dirs/tempdir config key
</p>

</section>
<section id="toc130">
<h3>2.9.3. Get Cache File</h3>

<pre>
function get_cache_file($data, $ext = '')
</pre>

<p>
This function is intended to get a cache filename, used for caching purposes
</p>

<ul>
<li>@data =&gt; data used to compute the hash used by the cache, can be an string or
         an array with lot of contents
</li>
<li>@ext  =&gt; extension of the cache filename
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses the dirs/cachedir config key
</p>

</section>
<section id="toc131">
<h3>2.9.4. Cache Exists</h3>

<pre>
function cache_exists($cache, $files)
</pre>

<p>
This function check the existence of valid cache by comparing the timestamp
of the filemtime between the cache file and all files of the second argument
</p>

<ul>
<li>@cache =&gt; cache filename
</li>
<li>@files =&gt; array of files that are considered as dependencies of the cache
</li>
</ul>

</section>
<section id="toc132">
<h3>2.9.5. URL Get Contents</h3>

<pre>
function url_get_contents($url)
</pre>

<p>
This file is an equivalent of the file_get_contents but intended to be used
for request remote files using protocols as http or https
</p>

<ul>
<li>@url =&gt; the url that you want to retrieve
</li>
</ul>

<p>
Notes:
</p>
<p>
This function only returns the body of the request, if you are interested
to get the headers of the request, try to use the __url_get_contents
</p>

</section>
<section id="toc133">
<h3>2.9.6. URL Get Contents helper</h3>

<pre>
function __url_get_contents($url, $args = [])
</pre>

<p>
This file is an equivalent of the file_get_contents but intended to be used
for request remote files using protocols as http or https
</p>

<ul>
<li>@url     =&gt; the url that you want to retrieve
</li>
<li>@args    =&gt; Array of arguments, explained in the follow lines
</li>
<li>@cookies =&gt; an array with the cookies to be restored before send the request
</li>
<li>@_method =&gt; method used in the request
</li>
<li>@values  =&gt; an array with the post values, useful when you want to send a POST
            request with pairs of variables and values
</li>
<li>@headers =&gt; an array with the headers to be send in the request
</li>
<li>@body    =&gt; the full body used of the request, useful when you want to send a
            json file in the body instead of pairs of keys vals
</li>
</ul>

<p>
This function returns an array with four elements, body, headers, cookies and code
</p>

</section>
<section id="toc134">
<h3>2.9.7. Extension</h3>

<pre>
function extension($file)
</pre>

<p>
This function returns the PATHINFO_EXTENSION of the file
</p>

<ul>
<li>@file =&gt; file used in the pathinfo call
</li>
</ul>

</section>
<section id="toc135">
<h3>2.9.8. Encode Bar Chars File</h3>

<pre>
function encode_bad_chars_file($file)
</pre>

<p>
This function is equivalent to encode_bad_chars but intended to be used
with filenames, in this case, the extension and the rest of the filename
will be encoded separately and the return value will contain the dot
separating the filename with the extension
</p>

<ul>
<li>@file =&gt; filename used in the encode process
</li>
</ul>

</section>
<section id="toc136">
<h3>2.9.9. Realpath Protected</h3>

<pre>
function realpath_protected($path)
</pre>

<p>
This function returns the realpath of the path, this version of the function
allow to return the path of an unexistent file, this is useful when do you
want to get the realpath of a unexistent file, for example, to the output of
a command that must to generate the file but at the moment of the execution
of this function the file is not found
</p>

<ul>
<li>@path =&gt; path used in the realpath call
</li>
</ul>

</section>
<section id="toc137">
<h3>2.9.10. Getcwd Protected</h3>

<pre>
function getcwd_protected()
</pre>

<p>
This function returns the same result that the getcwd function but checking
that the result is not an slash, this is an issue in some cases caused by
permissions problems, and a good solution for this cases is to get the directory
of the script as current work directory
</p>

</section>
<section id="toc138">
<h3>2.9.11. Glob Protected</h3>

<pre>
function glob_protected($pattern)
</pre>

<p>
This function returns the same result that the glob function but checking
that the result is an array, if glob fails or not get a files by the pattern,
can return other values that an array, and this can cause problems if you are
expecting an array to iterate in each element, this function prevent this
problem
</p>

<ul>
<li>@pattern =&gt; pattern used in the glob command
</li>
</ul>

</section>
<section id="toc139">
<h3>2.9.12. Chmod Protected</h3>

<pre>
function chmod_protected($file, $mode)
</pre>

<p>
This function tries to change the mode of the file using the chmod function
only if the fileperms of the file are different that the requested mode and
the fileowner of the file is the same user that is executing the script
</p>

<ul>
<li>@file =&gt; file used by the chmod function
</li>
<li>@mode =&gt; mode used by the chmod function
</li>
</ul>

</section>
<section id="toc140">
<h3>2.9.13. Fsockopen Protected</h3>

<pre>
function fsockopen_protected($hostname, $port, &amp;$errno = 0, &amp;$errstr = '', $timeout = null)
</pre>

<p>
This function is only used by the httpclient library to avois problems with
the certificates validations
</p>
<p>
Ths arguments is the same that the fsockopen function, in this case, the
function uses the stream_socket_client to emulate the original fsockopen
</p>

</section>
<section id="toc141">
<h3>2.9.14. File with hash</h3>

<pre>
function file_with_hash($file)
</pre>

<p>
This function returns the name of the file adding as argument the hash
of the file for the http/https requests, this allow to helps the browser
to know when the file has changed
</p>

<ul>
<li>@file =&gt; the file that you want to add the hash querystring argument
</li>
</ul>

</section>
<section id="toc142">
<h3>2.9.15. File with min</h3>

<pre>
function file_with_min($file)
</pre>

<p>
This function returns the name of the file adding the .min. between the
filename and the extension of the file if the .min. file exists
</p>

<ul>
<li>@file =&gt; the file that you want to add the .min. part if exists
</li>
</ul>

</section>
<section id="toc143">
<h3>2.9.16. File Get Contents Protected</h3>

<pre>
function file_get_contents_protected(...$args)
</pre>

<p>
This function call the original file_get_contents and returns the buffer
returned by the original function, the main idea of this function is to
protect the caller to prevent I/O errors like "nohup php index.php" when
</p>

<ul>
<li>@args =&gt; the original arguments are passed to the file_get_contents
</li>
</ul>

</section>
<section id="toc144">
<h3>2.9.17. Get human size</h3>

<pre>
function get_human_size($size, $pre = '', $post = '')
</pre>

<p>
This function returns an string containing the size in human format
</p>

<ul>
<li>@size =&gt; the number of bytes to convert to human format
</li>
<li>@pre  =&gt; string added between the number and the unit letter
post  =&gt; string added after the unit letter at the end
</li>
</ul>

</section>
</section>
<section id="toc145">
<h2>2.10. Get data helper module</h2>

<pre>
api/php/autoload/getdata.php
</pre>

<p>
This fie contains useful functions related to the $_DATA global variable, allow to get and set
values in the global $_DATA variable using xpath as key
</p>

<section id="toc146">
<h3>2.10.1. Get data</h3>

<pre>
function get_data($key)
</pre>

<p>
This function is intended to be used to retrieve values from the
data system
</p>

<ul>
<li>@key =&gt; the key that you want to retrieve the value
</li>
</ul>

<p>
Notes:
</p>
<p>
If you request the key rest/-1, then the function returns the last
value of the rest, intended to get the last value of the rest array,
too you can get the rest array using negative indexes beginning
from the last position
</p>

</section>
<section id="toc147">
<h3>2.10.2. Set data</h3>

<pre>
function set_data($key, $val)
</pre>

<p>
This function sets a value in the data system for the specified key
</p>

<ul>
<li>@key =&gt; the key that you want to set
</li>
<li>@val =&gt; the value that you want to set
</li>
</ul>

<p>
Notes:
</p>
<p>
If null val is passed as argument, then the entry of the data is removed,
the main idea is to use the same method used by the setcookie that allow
to remove entries by setting the value to null
</p>

</section>
</section>
<section id="toc148">
<h2>2.11. Gettext helper module</h2>

<pre>
api/php/autoload/gettext.php
</pre>

<p>
This fie contains useful functions related to gettext funcionality, allow to manage the
SaltOS translations using a merged system of the unix locales and the old SaltOS translations
system.
</p>

<section id="toc149">
<h3>2.11.1. Get Text function</h3>

<pre>
function T($text = '')
</pre>

<p>
This function replaces the gettext abreviation _() using the SaltOS gettext
feature, is based in the original system of the old SaltOS with improvements
to do more open as the GNU gettext
</p>

<ul>
<li>@text =&gt; The text that you want to translate
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses multiples locales at same time, SaltOS provides a basic set of
usefull strings and each application can add and overwrite more strings, this is
the same feature that old SaltOS provides
</p>
<p>
If you call the function without argument, the function returns the gettext
dictionary intended to populate the clients gettext module and contains the
app, the lang and the locales for the app and lang.
</p>

</section>
<section id="toc150">
<h3>2.11.2. Check lang format</h3>

<pre>
function check_lang_format($lang)
</pre>

<p>
This function checks the correctness of the lang and returns a valid
string that can be used safely as lang in other sites
</p>

<ul>
<li>@lang =&gt; the lang that you want to process
</li>
</ul>

</section>
<section id="toc151">
<h3>2.11.3. Current lang</h3>

<pre>
function current_lang()
</pre>

<p>
This function returns the current lang
</p>

</section>
</section>
<section id="toc152">
<h2>2.12. Iniset helper module</h2>

<pre>
api/php/autoload/iniset.php
</pre>

<p>
This fie contains useful functions related to the evaluation of the iniset, puntenv and extra
directives configures in the config.xml file
</p>

<section id="toc153">
<h3>2.12.1. Eval Iniset</h3>

<pre>
function eval_iniset($array)
</pre>

<p>
This function evaluates the iniset section of the config file, is intended
to execute all ini_set commands detecting the current values and determining
if is needed to change or not the current setting, is able to understand
boolean values as On/Off, and too is able to set keys as mbstring.internal_encoding
or mbstring.detect_order that must to be set by using another mb_* functions
</p>

<ul>
<li>@array =&gt; the array with the pairs of keys vals
</li>
</ul>

</section>
<section id="toc154">
<h3>2.12.2. Eval Putenv</h3>

<pre>
function eval_putenv($array)
</pre>

<p>
This function evaluates the putenv section of the config file, is intended
to execute all putenv commands detecting the current values and determining
if is needed to change or not the current setting
</p>

<ul>
<li>@array =&gt; the array with the pairs of keys vals
</li>
</ul>

</section>
<section id="toc155">
<h3>2.12.3. According to the documentation, putenv must return false in error cases, but</h3>

<pre>
if ($key == '' || putenv("$key=$val") === false) {
</pre>

<p>
putenv(): Argument #1 ($assignment) must have a valid syntax (code 0)
</p>
<p>
For this reason, the show_php_error placed after the putenv that must to
be executed when putenv returns false never can be executed.
</p>
<p>
As trick, I have added the void key condition to force a case that executes
the show_php_error
</p>

</section>
<section id="toc156">
<h3>2.12.4. Eval Extras</h3>

<pre>
function eval_extras($array)
</pre>

<p>
This function evaluates the extra init requirements, intended for the multibyte
functions and for the gettext initialization process
</p>

<ul>
<li>@array =&gt; the array with the pairs of keys vals
</li>
</ul>

</section>
</section>
<section id="toc157">
<h2>2.13. Json helper module</h2>

<pre>
api/php/autoload/json.php
</pre>

<p>
This fie contains useful functions related to colors
</p>

<section id="toc158">
<h3>2.13.1. Terminal colors</h3>

<pre>
define('__COLORS_MAP__', [
</pre>

<p>
This define sets the colors array used in the next functions
</p>

</section>
<section id="toc159">
<h3>2.13.2. Json colorize</h3>

<pre>
function json_colorize($json)
</pre>

<p>
This funcion is able to colorize a json fragment to dump into a tty terminal
</p>

<ul>
<li>@json =&gt; the json code that you want to colorize
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses a trick to convert numbers in scientific notation to an old
decimal style, to do it, detects numbers with the e letter and print using the
places, ensuring precision up to the typical limit of a double type in C, which
supports approximately 15-17 significant digits
</p>

</section>
</section>
<section id="toc160">
<h2>2.14. Log helper module</h2>

<pre>
api/php/autoload/log.php
</pre>

<p>
This fie contains useful functions related to the logs files, allowing to add and check contents
to the logs file, useful for debug purposes
</p>

<section id="toc161">
<h3>2.14.1. Check Log</h3>

<pre>
function checklog($hash, $file)
</pre>

<p>
This function is a helper for the show_php_error, allow to detect repetitions
of the same text in the log file to prevent to add repeated lines, the usage
is very simple, only requires a hash and a file to check that the hash is not
found in the contents of the file, you can think in this function as a grep
replacement that is able to found the hash in the file
</p>

<ul>
<li>@hash =&gt; the pattern that you want to search in the file
</li>
<li>@file =&gt; the file where search the pattern
</li>
</ul>

</section>
<section id="toc162">
<h3>2.14.2. Add Log</h3>

<pre>
function addlog($msg, $file = '')
</pre>

<p>
This function add messages to the specified log file
</p>

<ul>
<li>@msg  =&gt; message that you want to add to the log file
</li>
<li>@file =&gt; the log file that you want to use without directory
</li>
</ul>

<p>
Notes:
</p>
<p>
If not file is specified, the debug/logfile (saltos.log) is used by default
</p>
<p>
The logs files are stored in the logsdir (/data/logs)
</p>
<p>
This function performs the log rotation is the maxfilesize is reached
</p>

</section>
<section id="toc163">
<h3>2.14.3. Add Trace</h3>

<pre>
function addtrace($array, $file)
</pre>

<p>
This function performs the addlog to the file using as input the array, the
main idea is to pass the same array that the used in the show_php_error, the
difference is that addtrace, only add the backtrace and debug to the array
and then, saves the log to the specified file
</p>

<ul>
<li>@array =&gt; the array that can contains the same info that show_php_error
</li>
<li>@file  =&gt; the file where do you want to store the log contents
</li>
</ul>

</section>
<section id="toc164">
<h3>2.14.4. Get Trace</h3>

<pre>
function gettrace(...$args)
</pre>

<p>
This function get an array as show_php_error, add the backtrace and debug
information and convert all array into a string
</p>

<ul>
<li>@array =&gt; the array that can contains the same info that show_php_error
</li>
<li>@full  =&gt; add the full debug backtrace instead of the generic partial
</li>
</ul>

<p>
This differentiation is because the full debug backtrace can break the
checklog feature because the time and pid can be different in each
execution
</p>

</section>
<section id="toc165">
<h3>2.14.5. Session Backtrace</h3>

<pre>
function session_backtrace()
</pre>

<p>
Returns a string with the pid, sessid and current datetime with decimals
</p>
<p>
Notes:
</p>
<p>
The fields of this array allow to do low level debug processes, this data is
generally used by the semaphores and some forced addtrace calls, but causes
problems in the error reporting because break the hash and checklog optimization
</p>

</section>
</section>
<section id="toc166">
<h2>2.15. Memory helper module</h2>

<pre>
api/php/autoload/memory.php
</pre>

<p>
This fie contains useful functions related to memory and time usage, allow to control the usage
of time and/or memory of a process, intended to prevent crashes in processes that requires more
time or memory resources that the defined by the system limits
</p>

<section id="toc167">
<h3>2.15.1. Memory Get Free</h3>

<pre>
function memory_get_free($bytes = false)
</pre>

<p>
This function returns the free memory in bytes or the percentage of the memory_limit
</p>

<ul>
<li>@bytes =&gt; if true, returns the free bytes, if false, returns the percentage
</li>
</ul>

</section>
<section id="toc168">
<h3>2.15.2. Get Time Usage</h3>

<pre>
function time_get_usage($secs = false)
</pre>

<p>
This function returns the time usage in seconds or in percentage of the max_execution_time
</p>

<ul>
<li>@secs =&gt; if true, returns the used seconds, if false, returns the percentage
</li>
</ul>

</section>
<section id="toc169">
<h3>2.15.3. Get Free Time</h3>

<pre>
function time_get_free($secs = false)
</pre>

<p>
This function returns the free time in seconds or in percentage of the max_execution_time
</p>

<ul>
<li>@secs =&gt; if true, returns the used seconds, if false, returns the percentage
</li>
</ul>

</section>
<section id="toc170">
<h3>2.15.4. Init Time Get</h3>

<pre>
function init_timer()
</pre>

<p>
This function call the helper to initialize the static ini to the current microtime
</p>

</section>
<section id="toc171">
<h3>2.15.5. Get Time helper</h3>

<pre>
function __time_get_helper($fn, $secs)
</pre>

<p>
This function is a helper of the time_get_usage and time_get_free functions, is used to
check the time usage and the free time that remain to finish the execution of the script
</p>

</section>
<section id="toc172">
<h3>2.15.6. Set Max Memory Limit</h3>

<pre>
function set_max_memory_limit()
</pre>

<p>
This function is intended to do a ini_set with a more greather value to allow an
exceptionally amount of memory usage
</p>

</section>
<section id="toc173">
<h3>2.15.7. Set Max Execution Time</h3>

<pre>
function set_max_execution_time()
</pre>

<p>
This function is intended to do a ini_set with a more greather value to allow an
exceptionally amount of execution time
</p>

</section>
</section>
<section id="toc174">
<h2>2.16. Mime helper module</h2>

<pre>
api/php/autoload/mime.php
</pre>

<p>
This file contains the mimetype feature provided by saltos using different techniques
suck as the extension file, using the mime_content_type or the finfo_file functions.
</p>

<section id="toc175">
<h3>2.16.1. SaltOS Content Type</h3>

<pre>
function saltos_content_type($file)
</pre>

<p>
This function is intended to returns the mime content-type string using different
techniques.
</p>

<ul>
<li>@file =&gt; the file of which you want to know the content-type
</li>
</ul>

</section>
<section id="toc176">
<h3>2.16.2. SaltOS Content Type first helper</h3>

<pre>
function saltos_content_type0($mime)
</pre>

<p>
This function returns the first part of the content-type, for example, if you
pass the string image/jpeg, this function will returns the string image.
</p>

<ul>
<li>@mime =&gt; the mime that you want to process
</li>
</ul>

</section>
<section id="toc177">
<h3>2.16.3. SaltOS Content Type second helper</h3>

<pre>
function saltos_content_type1($mime)
</pre>

<p>
This function returns the second part of the content-type, for example, if you
pass the string image/jpeg, this function will returns the string jpeg.
</p>

<ul>
<li>@mime =&gt; the mime that you want to process
</li>
</ul>

</section>
<section id="toc178">
<h3>2.16.4. Mime inline</h3>

<pre>
function mime_inline($type, $data)
</pre>

<p>
This function returns the inline mime fragment of string that contains the mime
and the encoded in base64 data, intended to embed it in img tags, for example.
</p>

<ul>
<li>@type =&gt; the mime type (image/png for example)
</li>
<li>@data =&gt; the contents of the data that must to be encoded in base64
</li>
</ul>

</section>
<section id="toc179">
<h3>2.16.5. SaltOS Content Type from string</h3>

<pre>
function saltos_content_type_from_string($buffer)
</pre>

<p>
This function tries to return content-type of the buffer contents
</p>

<ul>
<li>@buffer =&gt; the data that contains the image or other thing that you want to know
           the content-type.
</li>
</ul>

</section>
<section id="toc180">
<h3>2.16.6. Mime extract</h3>

<pre>
function mime_extract($data)
</pre>

<p>
This function tries to do the invert action that mime_inline, the main idea
is to return the type and data used in the inline image, for example
</p>

<ul>
<li>@data =&gt; an inline image in the format of data:image/png;base64,xxxxx
</li>
</ul>

</section>
<section id="toc181">
<h3>2.16.7. Mime to name</h3>

<pre>
function mime2name($type)
</pre>

<p>
This function returns a valid filename for the type used in the argument
</p>

<ul>
<li>@type =&gt; the content-type that you want to use to get the filename
</li>
</ul>

<p>
Notes:
</p>

<ul>
<li>This function contains some special cases that contains special chars
</li>
</ul>

</section>
</section>
<section id="toc182">
<h2>2.17. Output helper module</h2>

<pre>
api/php/autoload/output.php
</pre>

<p>
This fie contains useful functions related to the output of the SaltOS, allow to send contents to
the clients using the specified format and configuration, useful to return contents, too implement
a specific output for the json format that is the most format used by the new SaltOS
</p>

<section id="toc183">
<h3>2.17.1. Output Handler</h3>

<pre>
function output_handler($array)
</pre>

<p>
This function is intended to send data to the output channel, and can have
the follow arguments:
</p>

<ul>
<li>@array =&gt; array with the follow pairs of key val
</li>
<li>@file  =&gt; file that contains the contents that you want to send
</li>
<li>@data  =&gt; contents that you want to send to the output channel
</li>
<li>@type  =&gt; content type header used
</li>
<li>@cache =&gt; boolean to enable the cache usage, includes the etag algorithm
</li>
<li>@name  =&gt; the filename used in the content disposition attachment header
</li>
<li>@extra =&gt; headers that you can add to the transfer
</li>
</ul>

</section>
<section id="toc184">
<h3>2.17.2. Output header helper</h3>

<pre>
function __output_header($header, $replace = true)
</pre>

<p>
This function is a filter to ignore the headers when CLI SAPI is detected
</p>

<ul>
<li>@header  =&gt; The header that do you want to send to the client
</li>
<li>@replace =&gt; The boolean used as replace in the original function, true by default
</li>
</ul>

</section>
<section id="toc185">
<h3>2.17.3. Output Handler JSON</h3>

<pre>
function output_handler_json($array)
</pre>

<p>
This function allow to quickly send json output, the unique argument that it
requires is the data that you want to send
</p>

<ul>
<li>@array =&gt; content to convert to json and send to the output channel
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is able to generate a pretty output when stdout is connected to
a terminal, intended to be used by humans, in other cases, the output will be
minified.
</p>

</section>
</section>
<section id="toc186">
<h2>2.18. PCOV helper module</h2>

<pre>
api/php/autoload/pcov.php
</pre>

<p>
This fie contains useful functions related to the pcov module used to
measure the coverage of the unit tests
</p>

<section id="toc187">
<h3>2.18.1. PCOV start</h3>

<pre>
function pcov_start()
</pre>

<p>
This function start the pcov recording to allow the measuring of the
coverage in the unit tests.
</p>

</section>
<section id="toc188">
<h3>2.18.2. PCOV stop</h3>

<pre>
function pcov_stop()
</pre>

<p>
This function stop the pcov recording that allow the measuring of the
coverage in the unit tests and puts in the output file the collected
data in a serialized format
</p>

</section>
</section>
<section id="toc189">
<h2>2.19. Permissions helper module</h2>

<pre>
api/php/autoload/perms.php
</pre>

<p>
This fie contains useful functions related to permissions, allow to apply permissions in php core
or in sql queries, to do it, uses all permissions tables and predefined configurations, more info
in each function
</p>

<section id="toc190">
<h3>2.19.1. Check User</h3>

<pre>
function check_user($app, $perm)
</pre>

<p>
This function checks the permissions using the tables apps_perms,
users_apps_perms and groups_apps_perms, to do it, this function uses
the user_id and groups_id (note that groups_id contains all groups
where the user is associated), and try to check that the permissions
permutations exists in the apps_perms, if some permission is found
in the users and groups tables and it is not found in the apps_perms,
an integrity error is launched.
</p>

<ul>
<li>@app  =&gt; the app to check
</li>
<li>@perm =&gt; the perm to check
</li>
</ul>

</section>
<section id="toc191">
<h3>2.19.2. Check SQL</h3>

<pre>
function check_sql($app, $perm)
</pre>

<p>
This function returns the fragment of SQL intended to filter by app and
perm for the current user
</p>

<ul>
<li>@app  =&gt; the app to check
</li>
<li>@perm =&gt; the perm to check
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns the portion of sql used to check permissions
associated to an user with a specific permission and to an specific
register, as an optimization, it detects if the all owner is on and
return a true expression to improve the performance
</p>

</section>
<section id="toc192">
<h3>2.19.3. Perms helper function</h3>

<pre>
function __perms($fn, $arg)
</pre>

<p>
This function is used by the XXX2YYY functions as helper, it stores the
dictionary of all conversions and resolves the data using it
</p>

<ul>
<li>@fn  =&gt; the caller function
</li>
<li>@arg =&gt; the argument passed to the function
</li>
</ul>

</section>
<section id="toc193">
<h3>2.19.4. Id to Perm</h3>

<pre>
function id2perm($id)
</pre>

<p>
This function resolves the code of the perm from the perm id
</p>

<ul>
<li>@id =&gt; the id used to resolve the perm
</li>
</ul>

</section>
<section id="toc194">
<h3>2.19.5. Perm to Id</h3>

<pre>
function perm2id($perm)
</pre>

<p>
This function resolves the id of the perm from the perm code
</p>

<ul>
<li>@perm =&gt; the perm code used to resolve the id
</li>
</ul>

<p>
Notes:
</p>
<p>
This function can return an integer or an array of integers, depending
if the app is using the owner parameter or not
</p>

</section>
<section id="toc195">
<h3>2.19.6. Perm Exists</h3>

<pre>
function perm_exists($perm)
</pre>

<p>
This function detect if a perm exists
</p>

<ul>
<li>@perm =&gt; the perm that you want to check if exists
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns true if a perm exists, and in case of the usage
of the owner parameter, the function will return true for a perm that
contains the owner and for the perm without the owner, for exampe, this
function returns true for perm list and form perm list|user
</p>

</section>
<section id="toc196">
<h3>2.19.7. Check App Perm Id</h3>

<pre>
function check_app_perm_id($app, $perm, $id = null)
</pre>

<p>
This function returns true if the app, the perm and the id accomplishes the
expected level of permissions, it is intended to be used before the execution
of each action, to guarantee the security
</p>

<ul>
<li>@app  =&gt; the app to check
</li>
<li>@perm =&gt; the perm to check
</li>
<li>@id   =&gt; the id to check, if needed, you can omit in the create case
</li>
</ul>

</section>
<section id="toc197">
<h3>2.19.8. User is admin</h3>

<pre>
function __user_is_admin($app)
</pre>

<p>
This function returns true if the current user has all perms for the app
</p>

</section>
<section id="toc198">
<h3>2.19.9. Merge data actions</h3>

<pre>
function merge_data_actions($data, $actions)
</pre>

<p>
This function merge the rows of a table or list with the specified actions
</p>

<ul>
<li>@data    =&gt; the data of the table or list widget
</li>
<li>@actions =&gt; the desired actions to use in the table or list widget
</li>
</ul>

</section>
<section id="toc199">
<h3>2.19.10. App has perm</h3>

<pre>
function __app_has_perm($app, $perm)
</pre>

<p>
This function checks that the app has the requested perm, used by the
merge_data_actions to validate the existence of a permission in the
application.
</p>

<ul>
<li>@app  =&gt; the app to check
</li>
<li>@perm =&gt; the perm to check
</li>
</ul>

</section>
</section>
<section id="toc200">
<h2>2.20. Random helper module</h2>

<pre>
api/php/autoload/random.php
</pre>

<p>
This fie contains useful functions related to random number generator, currently only initialize
the internal generator, but in the future we can add more features if it is needed
</p>

<section id="toc201">
<h3>2.20.1. Init Random</h3>

<pre>
function init_random()
</pre>

<p>
This function initialize the random number generator
</p>
<p>
Notes:
</p>
<p>
This function previously sets the seed using the microtime, but reading
the srand php documentation, I see that the seed is not needed because
if it is not provided, a randomly seed is used by default
</p>

</section>
</section>
<section id="toc202">
<h2>2.21. Semaphore helper module</h2>

<pre>
api/php/autoload/semaphores.php
</pre>

<p>
This fie contains useful functions related to semaphores, allow to create and use semaphores
for acquiring and release semaphores that guaranty the exclusivity of the code execution
</p>

<section id="toc203">
<h3>2.21.1. Semaphore Acquire</h3>

<pre>
function semaphore_acquire($name = '', $timeout = INF)
</pre>

<p>
This function implement the acquire of a semaphore
</p>

<ul>
<li>@name    =&gt; the name of the semaphore
</li>
<li>@timeout =&gt; the timeout used in waiting operations
</li>
</ul>

</section>
<section id="toc204">
<h3>2.21.2. Semaphore Release</h3>

<pre>
function semaphore_release($name = '')
</pre>

<p>
This function implement the release of the semaphore
</p>

<ul>
<li>@name =&gt; the name of the semaphore
</li>
</ul>

</section>
<section id="toc205">
<h3>2.21.3. Semaphore Shutdown</h3>

<pre>
function semaphore_shutdown()
</pre>

<p>
This function implement the shutdown of all semaphores, to do it,
the function will iterate in each semaphore to release and set to
null the semaphore pointer
</p>

</section>
<section id="toc206">
<h3>2.21.4. Semaphore File</h3>

<pre>
function semaphore_file($name = '')
</pre>

<p>
This function returns the associated semaphore file used by the
named semaphore, useful for debug purposes
</p>

<ul>
<li>@name =&gt; the name of the semaphore
</li>
</ul>

</section>
<section id="toc207">
<h3>2.21.5. Semaphore helper</h3>

<pre>
function __semaphore_helper($fn, $name, $timeout)
</pre>

<p>
This function implements the real semaphore functionalities, includes
the code to do an acquire, the release, the shutdown and to get the
file, is programmed as a function instead of a class by historical
motivation, in reality, the statics fds acts as a properties of a
class and each if stripos acts as a methods of a class
</p>

<ul>
<li>@fn      =&gt; the function name that call the helper, to detect the feature
</li>
<li>@name    =&gt; the name of the semaphore
</li>
<li>@timeout =&gt; the timeout used in waiting operations
</li>
</ul>

</section>
<section id="toc208">
<h3>2.21.6. Semaphore USleep helper</h3>

<pre>
function __semaphore_usleep($usec)
</pre>

<p>
This function implements an usleep (micro sleeper) using sockets, this
allow to break the execution of the function if a signal is received by
the process, in reality, the feature is powered by the socket_select that
is allowed to wait for read and write operations with a very precise
timeout.
</p>
<p>
The returned value will be the difference between the end less the start,
in other words, the returned value is the ellapsed time sleeped by the
function
</p>

<ul>
<li>@usec =&gt; the micro seconds that you want to sleep
</li>
</ul>

</section>
</section>
<section id="toc209">
<h2>2.22. Server helper module</h2>

<pre>
api/php/autoload/server.php
</pre>

<p>
This fie contains useful functions related to the $_SERVER global variable, currently only publish
a getter function, but in the future, can store more features if it is needed
</p>

<section id="toc210">
<h3>2.22.1. Get Server</h3>

<pre>
function get_server($key)
</pre>

<p>
This function returns the server variable requested by index if it exists
</p>

<ul>
<li>@key =&gt; the index key used to get the value of the server
</li>
</ul>

</section>
<section id="toc211">
<h3>2.22.2. Set Server</h3>

<pre>
function set_server($key, $val)
</pre>

<p>
This function is intended to replace some server variabe in runtime mode
</p>

<ul>
<li>@key =&gt; the index key used to get the value of the server
</li>
<li>@val =&gt; the value that you want to set in the server array
</li>
</ul>

</section>
<section id="toc212">
<h3>2.22.3. Current hash</h3>

<pre>
function current_hash()
</pre>

<p>
This function tries to do the same like current_user but for the hash parameter
obtained from the QUERY_STRING server variable
</p>

</section>
</section>
<section id="toc213">
<h2>2.23. SQL utils helper module</h2>

<pre>
api/php/autoload/sql.php
</pre>

<p>
This fie contains useful functions related to SQL queries, allow to help modules that requires
the entire management of the database (create tables, drop tables, create indexes, and more),
too allow to prepare sql queries suck inserts, updates or wheres fragments that are procected
to external injections, for example, by escaping all special characters.
</p>
<p>
Too it provides functions to do subparts of the where queries suck as special likes combinations
or match again combinations for the fulltext search engine, see all detailed information by
reading the list of functions of this module
</p>

<section id="toc214">
<h3>2.23.1. Parse Query</h3>

<pre>
function parse_query($query, $type = '')
</pre>

<p>
This function is intended to apply the query filters defined by the users
when write queries for multiples db engines as MySQL and/or SQLite, for
example, if you want to write a fragment of SQL with one version for MySQL
and another version for SQLite, you can do / *MYSQL ... * // *SQLite ... * /
</p>
<p>
Note that the previous example add a spaces between the bar and the asterisc
because we can not put comments inside another comment!!!
</p>

<ul>
<li>@query =&gt; the query that must be parsed
</li>
<li>@type  =&gt; the db type that you want to allow by the filters
</li>
</ul>

</section>
<section id="toc215">
<h3>2.23.2. Parse Query Type helper</h3>

<pre>
function __parse_query_type()
</pre>

<p>
This function returns the type used by parse_query using as detector the
dbtype of the config file, currently only allow to return MYSQL and/or SQLITE
</p>

</section>
<section id="toc216">
<h3>2.23.3. Parse Query Strpos helper</h3>

<pre>
function __parse_query_strpos($haystack, $needle, $offset = 0)
</pre>

<p>
This function is the same that strpos, but with some improvements required
by the parse_query funcion, the idea is to use the strpos functionality, but
controlling that the found position must acomplish some constraints as the
number of simple and double quotes must to be even
</p>
<p>
The arguments are the same that the strpos function
</p>

<ul>
<li>@haystack =&gt; string where search the needle
</li>
<li>@needle   =&gt; the needle text that must be found in the haystack
</li>
<li>@offset   =&gt; bias applied to begin the search of the needle
</li>
</ul>

</section>
<section id="toc217">
<h3>2.23.4. Execute Query</h3>

<pre>
function execute_query($query, $params = null)
</pre>

<p>
This function executes the query and depending in the result, returns the
resultset trying to do the more good combination in the return data
</p>

<ul>
<li>@query =&gt; the SQL query that you want to execute
</li>
</ul>

<p>
Note that the db_query is executed with the "auto" fetch mode, this causes
that the db_query returns an array with one dimension if the query only
generates a resultset with only one column, or returns an array with two
dimensions if the query generates a resultest with more that one column
</p>
<p>
To be more practice:
</p>
<p>
If you execute a query that select one field and only returns one row,
the return value will be the value of the field
</p>
<p>
If you execute a query that select one field and returns more that one
row, the return value will be an array of one dimension with all values
of this field
</p>
<p>
If you execute a query that select multiples fields and only return one
row, the return value will be an array of one dimension with all fields
</p>
<p>
Ig you execute a query that select multiples fields and returns more that
one row, the return value will be an array of two dimensions with all rows
and each row with all fields
</p>
<p>
Be carefully to use the output of this command in an foreach, for example
because you can get for the same query differents output types, if you
need to be more standarized in the output types, see the execute_query_array
</p>

</section>
<section id="toc218">
<h3>2.23.5. Execute Query Array</h3>

<pre>
function execute_query_array($query, $params = null)
</pre>

<p>
This function is the same that execute_query but guarantee that for the
same query, you get the same output type if the resultet contains one
row or more rows, useful is you want to use the output of this function
in a foreach, for example
</p>

<ul>
<li>@query =&gt; the SQL query that you want to execute
</li>
</ul>

</section>
<section id="toc219">
<h3>2.23.6. Get Fields</h3>

<pre>
function get_fields($table)
</pre>

<p>
This function returns the fields of the requested table
</p>

<ul>
<li>@table =&gt; the table where that you want to know the fields
</li>
</ul>

</section>
<section id="toc220">
<h3>2.23.7. Get Indexes</h3>

<pre>
function get_indexes($table)
</pre>

<p>
This function returns the indexes of the requested table
</p>

<ul>
<li>@table =&gt; the table where that you want to know the indexes
</li>
</ul>

</section>
<section id="toc221">
<h3>2.23.8. Get Tables</h3>

<pre>
function get_tables()
</pre>

<p>
This function returns the tables of the database
</p>

</section>
<section id="toc222">
<h3>2.23.9. Get Field Type</h3>

<pre>
function get_field_type($type)
</pre>

<p>
This function returns an standarized type for the specific types used in
the real database, for example, returns string if the field is of TEXT type
</p>

<ul>
<li>@type =&gt; the real type in the database
</li>
</ul>

</section>
<section id="toc223">
<h3>2.23.10. Get Field Size</h3>

<pre>
function get_field_size($type)
</pre>

<p>
This function returns the size for the types used in the database, for
example, returns 65535 if the field is of TEXT type
</p>

<ul>
<li>@type =&gt; the real type in the database
</li>
</ul>

<p>
Notes:
</p>
<p>
In general, type1 is used to detect the size of text fields, the type2
is used for VARCHAR(X) that specify the size of the VARCHAR in the type2
parameter.
</p>

</section>
<section id="toc224">
<h3>2.23.11. Has Engine</h3>

<pre>
function __has_engine($engine)
</pre>

<p>
This function allow to SaltOS to ask to the database if an enxine is
availabie
</p>

<ul>
<li>@engine =&gt; the engine that you want to get information about existence
</li>
</ul>

</section>
<section id="toc225">
<h3>2.23.12. Make Insert Query</h3>

<pre>
function make_insert_query($table, $array)
</pre>

<p>
Returns the insert query for the table with all fields specified by the
array param
</p>

<ul>
<li>@table =&gt; table where you want to add the register
</li>
<li>@array =&gt; array with key val pairs that represent the field and the value
          of the field
</li>
</ul>

<p>
Notes:
</p>
<p>
This function tries to cast each value to their data type getting this
information from dbschema config, you can pass in array all fields that
you want and not is needed to put all fields of the table, only the
fields that appear in the array will be used in the insert, if some
field is not a part of the fields of the table, an error will be
triggered
</p>
<p>
This function uses the array_key_exists instead of isset because the
check of the $array[$name] fails when the item exists but is false or
null, for example
</p>

</section>
<section id="toc226">
<h3>2.23.13. Make Update Query</h3>

<pre>
function make_update_query($table, $array, $where)
</pre>

<p>
Returns the update query for the table with all fields specified by the
array param and using the specified where
</p>

<ul>
<li>@table =&gt; table where you want to update the register
</li>
<li>@array =&gt; array with key val pairs that represent the field and the value of
          the field
</li>
<li>@where =&gt; array with key val pairs that represent the field and the value of
          the field used in the where part of the query
</li>
</ul>

<p>
Notes:
</p>
<p>
This function tries to cast each value to their data type getting this
information from dbschema config, you can pass in array all fields that
you want and not is needed to put all fields of the table, only the
fields that appear in the array will be used in the update, if some
field is not a part of the fields of the table, an error will be
triggered
</p>
<p>
This function uses the array_key_exists instead of isset because the
check of the $array[$name] fails when the item exists but is false or
null, for example
</p>

</section>
<section id="toc227">
<h3>2.23.14. Make Where Query</h3>

<pre>
function make_where_query($table, $array)
</pre>

<p>
This function allow to create where sentences joinin all fields by AND
</p>

<ul>
<li>@table =&gt; table where you want to apply the where
</li>
<li>@array =&gt; array with key val pairs that represent the field and the value of
          the field
</li>
</ul>

<p>
Notes:
</p>
<p>
The keys normally contains the name of the field, but if you need to use
a different comparison operator, you can use the field name and add the
operator that you want to use in the comparison, the allowed comparison
operators are &gt;, &lt;, =, &gt;=, &lt;=, !=
</p>

</section>
<section id="toc228">
<h3>2.23.15. Escape Reserved Word</h3>

<pre>
function escape_reserved_word($word)
</pre>

<p>
This function tries to escape the reserved words that can not be used
in sql queries as field names or table names, currently is only used
to escape field names but in a future, if it is needed, can be added
to escape table names too
</p>

<ul>
<li>@word =&gt; the word that must to be escape if needed
</li>
</ul>

<p>
Notes:
</p>
<p>
If you use an array as argument, then the function is applied to all
elements of the array.
</p>

</section>
<section id="toc229">
<h3>2.23.16. Make Like Query</h3>

<pre>
function make_like_query($keys, $values, $args = [])
</pre>

<p>
This function is intended to returns the sql fragment to be added to
the where condition to filter for the specified keys and values
</p>

<ul>
<li>@keys    =&gt; an string with comma separated field names
</li>
<li>@values  =&gt; the value of the input search
</li>
<li>@minsize =&gt; the minimal size of the length used in each like
</li>
<li>@default =&gt; sql fraement returned if some thing was wrong
</li>
</ul>

<p>
Notes:
</p>
<p>
This function generates a sequence of (like or like) and (like and like)
and is able to understand the prefix plus or minus in each word of the
search string, this allow to the function to use the like or not like
depending the sign of the word, and too to use the disjunction or
conjunction in each like group
</p>

</section>
<section id="toc230">
<h3>2.23.17. Make Fulltext Query Helper</h3>

<pre>
function __make_fulltext_query_helper($values, $args = [])
</pre>

<p>
This function is similar to the make_like_query, but uses the match agains
clausule instead of the like clausule, the match agaings is used for
fulltext searches and generally, this function is not intended to be used
directly, it must acts as a helper of the make_fulltext_query
</p>

<ul>
<li>@values  =&gt; the value of the input search
</li>
<li>@minsize =&gt; the minimal size of the length used in each like
</li>
<li>@default =&gt; sql fraement returned if some thing was wrong
</li>
</ul>

<p>
Notes:
</p>
<p>
This function differs between the make_like_query in the idea that this
function only is used to search using fulltext indexes and in one unique
field named search
</p>

</section>
<section id="toc231">
<h3>2.23.18. Make Fulltext Query</h3>

<pre>
function make_fulltext_query($values, $app, $args = [])
</pre>

<p>
While the two version returns the fragment that must to be added to the
query that search in the table that contains the search field, this function
allow to specify the same that the two version with two fields more, the
app and the prefix to be added to the id field of the in subquery
</p>

<ul>
<li>@values  =&gt; the value of the input search
</li>
<li>@app     =&gt; the app used to detect the indexing table
</li>
<li>@prefix  =&gt; the prefix added to the id used in the in subquery
</li>
<li>@minsize =&gt; the minimal size of the length used in each like
</li>
<li>@default =&gt; sql fraement returned if some thing was wrong
</li>
</ul>

</section>
<section id="toc232">
<h3>2.23.19. Prepare Helper Query</h3>

<pre>
function __prepare_helper_query($table, $array)
</pre>

<p>
This function allow to get the names and values used internaly by the
prepare_insert_query, prepare_update_query and prepare_where_query, the
main idea is to get the fields of the table and computes the intersect
with the array provided with data, and using the spec of the table
prepare the values with the needed type cast
</p>

<ul>
<li>@table =&gt; the table where to you want to use the data
</li>
<li>@array =&gt; the array that contains the data
</li>
</ul>

</section>
<section id="toc233">
<h3>2.23.20. Prepare Insert Query</h3>

<pre>
function prepare_insert_query($table, $array)
</pre>

<p>
Returns the prepared insert query for the table with all fields specified
by the array param
</p>

<ul>
<li>@table =&gt; table where you want to add the register
</li>
<li>@array =&gt; array with key val pairs that represent the field and the value
          of the field
</li>
</ul>

</section>
<section id="toc234">
<h3>2.23.21. Prepare Update Query</h3>

<pre>
function prepare_update_query($table, $array, $where = [])
</pre>

<p>
Returns the prepared update query for the table with all fields specified
by the array param and using the specified where
</p>

<ul>
<li>@table =&gt; table where you want to update the register
</li>
<li>@array =&gt; array with key val pairs that represent the field and the value of
          the field
</li>
<li>@where =&gt; array with key val pairs that represent the field and the value of
          the field used in the where part of the query
</li>
</ul>

</section>
<section id="toc235">
<h3>2.23.22. Prepare Where Query</h3>

<pre>
function prepare_where_query($table, $array)
</pre>

<p>
This function allow to create where sentences joinin all fields by AND
</p>

<ul>
<li>@table =&gt; table where you want to apply the where
</li>
<li>@array =&gt; array with key val pairs that represent the field and the value of
          the field
</li>
</ul>

</section>
</section>
<section id="toc236">
<h2>2.24. String utils helper module</h2>

<pre>
api/php/autoload/strings.php
</pre>

<p>
This fie contains useful functions related to strings manipulations, suck as get the test in
UTF8, remove bad chars, of apply filters to the text, manipulate texts of other related tasks
with strings
</p>

<section id="toc237">
<h3>2.24.1. Remove Bar Chars</h3>

<pre>
function remove_bad_chars($temp, $pad = '')
</pre>

<p>
This function removes chars from keycodes 0 to 31 except 9, 10, 13 (tab,
newline, return)
</p>

<ul>
<li>@temp =&gt; input string that you want to fix
</li>
<li>@pad  =&gt; padding string used as replacement for bar chars (void by default)
</li>
</ul>

</section>
<section id="toc238">
<h3>2.24.2. Encode Bar Chars</h3>

<pre>
function encode_bad_chars($cad, $pad = '_', $extra = '')
</pre>

<p>
This function tries to replace accenteds chars and other extended chars into
an ascii chars, to do it, they define an array with the pairs of chars to
do a quick replace, too is converted all to lower and are removed all chars
that are out of range (valid range are from 0-9 and from a-z), the function
allow to specify an extra parameter to add extra chars that must to be
allowed in the output, all other chars will be converted to the padding
argument, as a bonus extra, all padding repetitions will be removed to
only allow one pading char at time
</p>

<ul>
<li>@cad   =&gt; the input string to encode
</li>
<li>@pad   =&gt; the padding char using to replace the bar chars
</li>
<li>@extra =&gt; the list of chars allowed to appear in the output
</li>
</ul>

</section>
<section id="toc239">
<h3>2.24.3. Prepare Words</h3>

<pre>
function trim_words($cad, $pad = ' ')
</pre>

<p>
This function allow to prepare words removing repetitions in the padding char
</p>

<ul>
<li>@cad =&gt; the input string to prepare
</li>
<li>@pad =&gt; the padding char using to replace the repetitions
</li>
</ul>

<p>
Notes:
</p>
<p>
Apart of remove repetitions of the padding char, the function will try to
remove padding chars in the start and in the end of the string
</p>

</section>
<section id="toc240">
<h3>2.24.4. Sprintr</h3>

<pre>
function sprintr($array)
</pre>

<p>
This function is an improved version of the print_r, allow to convert an
array into a string removing some extra lines that not contain information,
lines that contains only contains an open or close parenthesis, or nothing,
are removed, optimizing the output string
</p>

<ul>
<li>@array =&gt; the array that do you want to convert into string
</li>
</ul>

</section>
<section id="toc241">
<h3>2.24.5. Get Unique ID MD5</h3>

<pre>
function get_unique_id_md5()
</pre>

<p>
This function returns an unique hash using the random generator
</p>

</section>
<section id="toc242">
<h3>2.24.6. Intelligence Cut</h3>

<pre>
function intelligence_cut($txt, $max, $end = '...')
</pre>

<p>
This function allow to cut text by searching spaces to prevent to break words
</p>

<ul>
<li>@txt =&gt; the text that you want to cut
</li>
<li>@max =&gt; the size of the expected output text
</li>
<li>@end =&gt; the suffix added if the text is cutted
</li>
</ul>

</section>
<section id="toc243">
<h3>2.24.7. Normalize Value</h3>

<pre>
function normalize_value($value)
</pre>

<p>
This function allow to detect the last letter to detect what magnitude is
using (K, M or G) and multiply the numeric part by the needed factor to
get the number without factor
</p>

<ul>
<li>@value =&gt; the string that contain the number, for example "123k"
</li>
</ul>

</section>
<section id="toc244">
<h3>2.24.8. HTML to Text</h3>

<pre>
function html2text($html)
</pre>

<p>
This function uses the html2text roundcube function to convert html to
plain text, this code have the issue that requires the error_reporting(0)
because it have a lot of errors causes by use nondefined variables, for
example
</p>

<ul>
<li>@html =&gt; the html code that you want to convert to plain text
</li>
</ul>

</section>
<section id="toc245">
<h3>2.24.9. Get UTF-8</h3>

<pre>
function getutf8($str)
</pre>

<p>
This function returns the string codified in a UTF-8 encoding
</p>

<ul>
<li>@str =&gt; the input string that you want to covnert to UTF-8
</li>
</ul>

</section>
<section id="toc246">
<h3>2.24.10. Words Exists</h3>

<pre>
function words_exists($words, $buffer)
</pre>

<p>
This function check that all words exists in the buffer
</p>

<ul>
<li>@words  =&gt; the string that contains words separated by spaces
</li>
<li>@buffer =&gt; the string where we must to found the words
</li>
</ul>

</section>
<section id="toc247">
<h3>2.24.11. String Replace Assoc</h3>

<pre>
function str_replace_assoc($array, $cad)
</pre>

<p>
This function do the same that str_replace, but using only one associative
array, using the keys as search and the values as replace, intended only
to do more prerry the code
</p>

<ul>
<li>@array =&gt; the associative array with the pairs keys vals
</li>
<li>@cad   =&gt; the string that you want to apply the replacement
</li>
</ul>

<p>
Notes:
</p>
<p>
This function can be replaced by strtr in the two arguments option, the
difference is that str_replace is more efficient that strtr because the
strtr tries to prepare the replacement list by ordering by size the
replace_pairs and too to prevent repeated replacements in previously
replacements, you can see test_strtr.php for more info
</p>

</section>
<section id="toc248">
<h3>2.24.12. Get Part From String</h3>

<pre>
function get_part_from_string($input, $delim, $index)
</pre>

<p>
This function explodes de input using delim and returns the element of the
index position, if the index is negative, then returns the element beginning
from the end
</p>

<ul>
<li>@input =&gt; the string that you want to cut in parts
</li>
<li>@delim =&gt; the delimiter char used to cut in parts
</li>
<li>@index =&gt; the index that you want to request of the explode result
</li>
</ul>

</section>
<section id="toc249">
<h3>2.24.13. Check IDS Helper</h3>

<pre>
function __check_ids_helper()
</pre>

<p>
This function checks the correctness of the list of ids and returns a valid
list available to be used in sql queries or as an array of valid ids
</p>

<ul>
<li>@ids =&gt; the string containing the list of ids
</li>
</ul>

</section>
<section id="toc250">
<h3>2.24.14. Check IDS</h3>

<pre>
function check_ids(...$args)
</pre>

<p>
This function checks the correctness of the list of ids and returns a valid
list available to be used in sql queries
</p>

<ul>
<li>@ids =&gt; the string containing the list of ids
</li>
</ul>

</section>
<section id="toc251">
<h3>2.24.15. Check IDS Array</h3>

<pre>
function check_ids_array(...$args)
</pre>

<p>
This function checks the correctness of the list of ids and returns a valid
list available to be used as array of valid ids
</p>

<ul>
<li>@ids =&gt; the string containing the list of ids
</li>
</ul>

</section>
<section id="toc252">
<h3>2.24.16. String Replace One</h3>

<pre>
function str_replace_one($from, $to, $cad)
</pre>

<p>
This function tries to do the same that str_repalce but only for the first
occurrence
</p>

<ul>
<li>@from =&gt; the string used as search
</li>
<li>@to   =&gt; the string that you want to use as replacement
</li>
<li>@cad  =&gt; the string that you want to modify
</li>
</ul>

<p>
Notes:
</p>
<p>
This function can be replaced by preg_replace, but this implementation is
more efficient, see the test_replace.php for more info
</p>

</section>
<section id="toc253">
<h3>2.24.17. Get String From Quotes</h3>

<pre>
function get_string_from_quotes($val)
</pre>

<p>
This string tries to return the string contained in a single or double
quotes, indended to be used for example in the construction of the where
used by the search engine
</p>

<ul>
<li>@val =&gt; the string that you want to process
</li>
</ul>

</section>
</section>
<section id="toc254">
<h2>2.25. System helper module</h2>

<pre>
api/php/autoload/system.php
</pre>

<p>
This fie contains useful functions related to system checks, allow to detect dependencies not
installed on the system, or misconfigurations on the SaltOS installation
</p>

<section id="toc255">
<h3>2.25.1. Check System</h3>

<pre>
function check_system()
</pre>

<p>
This function checks the system to detect if all knowed dependencies are found in the system, to do it,
defines an array with the type (class or function), the name and some extra info for the error message
that is triggered if the dependency is not satisfied
</p>

</section>
<section id="toc256">
<h3>2.25.2. Check Directories</h3>

<pre>
function check_directories()
</pre>

<p>
Check all directories of the data directory to validate that the process can write inside it
</p>

</section>
<section id="toc257">
<h3>2.25.3. Exec Check System</h3>

<pre>
function exec_check_system()
</pre>

<p>
This function executes the check system function and trigger an error if needed
</p>

</section>
</section>
<section id="toc258">
<h2>2.26. Tokens helper module</h2>

<pre>
api/php/autoload/tokens.php
</pre>

<p>
This fie contains the functions related to the tokens usage and manipulations
</p>

<section id="toc259">
<h3>2.26.1. Get Unique Token</h3>

<pre>
function get_unique_token()
</pre>

<p>
This function returns a string with a new and unique token
</p>

</section>
<section id="toc260">
<h3>2.26.2. Check token format</h3>

<pre>
function check_token_format($token)
</pre>

<p>
This function checks the correctness of the token and returns a valid
string that can be used safely as token in sql queries
</p>

<ul>
<li>@token =&gt; the token that you want to process
</li>
</ul>

</section>
</section>
<section id="toc261">
<h2>2.27. User helper module</h2>

<pre>
api/php/autoload/user.php
</pre>

<p>
This file contains the functions associated to the user validation, to
improve the performance, all functions are using a cache based trick
that performs an important speed up
</p>

<section id="toc262">
<h3>2.27.1. Current Token</h3>

<pre>
function current_token()
</pre>

<p>
This function returns the id of the current token, this info is retrieved
using the token of the request, for security reasons, this validation only
can be performed by the same origin that execute the login action
</p>

</section>
<section id="toc263">
<h3>2.27.2. Current User</h3>

<pre>
function current_user()
</pre>

<p>
This function returns the id of the current user, this info is retrieved
using the token of the request
</p>
<p>
Notes:
</p>
<p>
This function allow to authenticate using the token_id provided by the
current_token function and using the server/user variable in the data
structure that contains the desired login when executed using the cli
sapi.
</p>

</section>
<section id="toc264">
<h3>2.27.3. Current Group</h3>

<pre>
function current_group()
</pre>

<p>
This function returns the id of the current group, this info is retrieved
using the token of the request
</p>

</section>
<section id="toc265">
<h3>2.27.4. Current Groups</h3>

<pre>
function current_groups()
</pre>

<p>
This function returns the id of all current groups, this info is retrieved
using the token of the request and the main idea of this function is to
returns the list of all groups associated to the current user to facily the
permissions checks
</p>

</section>
<section id="toc266">
<h3>2.27.5. Crontab Users</h3>

<pre>
function crontab_users()
</pre>

<p>
This function executes the maintenance queries to update the active field
in the passwords and tokens tables, it's intended to be used as helper
</p>
<p>
Notes:
</p>
<p>
This function uses an internal static variable to detect repeated executions
and only accepts the first execution, this is to prevent that multiples calls
to other actions and functions that requires the integrity of the passwords
and tokens
</p>

</section>
</section>
<section id="toc267">
<h2>2.28. Version helper module</h2>

<pre>
api/php/autoload/version.php
</pre>

<p>
This fie contains useful functions related to the version of the SaltOS of the php engine
</p>

<section id="toc268">
<h3>2.28.1. Get Name Version Revision</h3>

<pre>
function get_name_version_revision($full = false)
</pre>

<p>
This function returns a string with the SaltOS name, version, revision and
copyright if needed
</p>

<ul>
<li>@full =&gt; boolean to specify if you want to add the copyright to the output
</li>
</ul>

</section>
<section id="toc269">
<h3>2.28.2. SVN Version</h3>

<pre>
function svnversion($dir = null)
</pre>

<p>
This function tries to return the svn version of the project
</p>

<ul>
<li>@dir =&gt; allow to specify where do you want to execute the svnversion command
</li>
</ul>

</section>
<section id="toc270">
<h3>2.28.3. SVN Version helper</h3>

<pre>
function __svnversion_helper($dir)
</pre>

<p>
This function tries to return the svn version of the project
</p>

<ul>
<li>@dir =&gt; allow to specify where do you want to execute the svnversion command
</li>
</ul>

</section>
<section id="toc271">
<h3>2.28.4. GIT Version</h3>

<pre>
function gitversion($dir = null)
</pre>

<p>
This function tries to return the git version of the project
</p>

<ul>
<li>@dir =&gt; allow to specify where do you want to execute the gitversion command
</li>
</ul>

</section>
<section id="toc272">
<h3>2.28.5. GIT Version helper</h3>

<pre>
function __gitversion_helper($dir)
</pre>

<p>
This function tries to return the git version of the project
</p>

<ul>
<li>@dir =&gt; allow to specify where do you want to execute the gitversion command
</li>
</ul>

</section>
</section>
<section id="toc273">
<h2>2.29. XML to Array helper module</h2>

<pre>
api/php/autoload/xml2array.php
</pre>

<p>
This fie contains useful functions related to the xml manipulation, this code is a part of the
main version of the SaltOS because the main idea defined some years ago continues active, if you
compare this code, you can see more accuracy in the specification to be more specific and precise
but this code is a part of all the SaltOS versions
</p>

<section id="toc274">
<h3>2.29.1. Set Array</h3>

<pre>
function set_array(&amp;$array, $name, $value)
</pre>

<p>
This function allow to specify multiples entries in an array with the same key,
to do this, the function will add #num where num is a unique number, in reality
if you want to set multiples entries for the key "test", you get in reality an
array with entries as "test", "test#1", "test#2"
</p>
<p>
This function works in concordance of the fix_key, that is able to get the key
as "test#1" and return only "test" that is the original key without the suffix
added to allow multiples instances of the same key in an associative array
</p>

<ul>
<li>@array =&gt; array that you want to add the key with the value (by reference)
</li>
<li>@name  =&gt; the key used in the array, if exists, it will try to add the suffix to
          prevent collisions
</li>
<li>@value =&gt; the value that you want to set in this position of the array
</li>
</ul>

</section>
<section id="toc275">
<h3>2.29.2. Unset Array</h3>

<pre>
function unset_array(&amp;$array, $name)
</pre>

<p>
This function remove all entries of the array that matches with the name of
the key, for example, if you specify the name "test", the function unset all
entries as "test" or begin by "test#", in the example of the previous function
will remove "test", "test#1" and "test#2"
</p>

<ul>
<li>@array =&gt; array that you want to remove the key (by reference)
</li>
<li>@name  =&gt; the key used in the array and as prefix of the entries of the array
</li>
</ul>

</section>
<section id="toc276">
<h3>2.29.3. Fix Key</h3>

<pre>
function fix_key($arg)
</pre>

<p>
This function returns the "real" part of the key removing the suffix added to
prevent collisions in the associative array, for the above example, if you request
the fix_key of the "test#2", the function will returns "test"
</p>

<ul>
<li>@arg =&gt; the name of the key that you want to remove the suffix part (if exists)
</li>
</ul>

</section>
<section id="toc277">
<h3>2.29.4. XML Files to Array</h3>

<pre>
function xmlfiles2array($files, $usecache = true)
</pre>

<p>
This function allow to convert all XML files to an array, allow to use cache to
optimize repetitive calls of the same file
</p>
<p>
As an special mention, this function internally implements the old xml_join feature
that allow to merge multiple files into one using the fix_key of the keys in the first
level as key to join.
</p>

<ul>
<li>@files    =&gt; the files that you want to convert from xml to array
</li>
<li>@usecache =&gt; if do you want to enable the cache feature
</li>
</ul>

<p>
Notes:
</p>

<ul>
<li>The arrays2array function is derived from this function that get all arguments and
  process the contents to join with a certain logics
</li>
</ul>

</section>
<section id="toc278">
<h3>2.29.5. XML File to Array</h3>

<pre>
function xmlfile2array($file, $usecache = true)
</pre>

<p>
This function allow to convert a XML file to an array, allow to use cache to
optimize repetitive calls of the same file
</p>
<p>
As an special mention, this function internally uses semaphores to prevent
multiple instances of the same execution with the same file, too uses a cache
management to optimize the usage
</p>

<ul>
<li>@file     =&gt; the file that you want to convert from xml to array
</li>
<li>@usecache =&gt; if do you want to enable the cache feature
</li>
</ul>

</section>
<section id="toc279">
<h3>2.29.6. XML to Array</h3>

<pre>
function xml2array($xml, $file = '')
</pre>

<p>
This function allow to convert a XML string to an array
</p>

<ul>
<li>@xml  =&gt; xml code to be converted to an array
</li>
<li>@file =&gt; filename of the contents, only used when an errors occurs
</li>
</ul>

</section>
<section id="toc280">
<h3>2.29.7. XML to Struct</h3>

<pre>
function xml2struct($xml, $file = '')
</pre>

<p>
This function is a helper of the xml2array function, the main purpose of this
function is to convert the xml string into a struct to be processed by the
struct2array function
</p>
<p>
The motivation to use the xml_parse_into_struct function is that this function
is the more quick to parse xml files, after a lot of tests, the more quickly
execution is to use the xml_parse_into_struct, reverse the array and then
program a simple recursive function that convert a unidimensional array into
a tree
</p>
<p>
At the begining of this function, we will try to detect the enconding of the
xml file, the main objective is to convert all xml to UTF-8 that is the default
enconding of SaltOS
</p>
<p>
The returned value is the result of the xml_parse_into_struct function, that is
the key of this feature and this function
</p>

<ul>
<li>@xml  =&gt; xml fragment that must be converted into struct
</li>
<li>@file =&gt; the source filename, it is used only to generate error reports
</li>
</ul>

</section>
<section id="toc281">
<h3>2.29.8. Struct to Array</h3>

<pre>
function struct2array(&amp;$data, $file = '')
</pre>

<p>
This function is the second part in the xml2array convertsion, here, the function
receives an unidimensional array with commands to open, close, and their respective
values and attributes, with this information, this function is able to generate a
tree with the xml converted to an array tree
</p>

<ul>
<li>@data =&gt; the struct array, by reference
</li>
<li>@file =&gt; the source filename, it is used only to generate error reports
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses recursivity to accomplish the objetive, returns the portion
of xml between the open and close command, in each call, the data array passed
by reference will decrement in size because the array_pop removes the last element
of the array
</p>
<p>
Remember that previously of call this function, the array is reversed, this is
because is more efficient to do a reverse and then pops instead of use directly
the array_shift to get the next element, the reason is that array_shift must to
reorder all keys of the resulted array and this add a very big cost if the xml
is big, this problem was detected in 2014 and was optimized by add the reverse
and the pop instead of only shift
</p>

</section>
<section id="toc282">
<h3>2.29.9. Eval Attributes</h3>

<pre>
function eval_attr($array, $recursive = true)
</pre>

<p>
This function is very special in SaltOS, is part of the initial code an
is used by a lot of parts of the program, currently are using a simplified
version of the original function and have improvements that allow to return
arrays with attributes without evaluate and without causing an error, this
allow to define xml with attributes that can be used by other processes and
SaltOS only interpret three attributes
</p>

<ul>
<li>@array =&gt; the array that contains a tree representation of the xml
</li>
</ul>

<p>
The three attributes are:
</p>

<ul>
<li>@eval =&gt; this attribute must be a boolean and allow to evaluate the value
of the node
</li>
</ul>

<ul>
<li>@ifeval =&gt; this attribute must contains an expression that must evaluate as
true or false, and allow to maintain or remove the entire node thas contains
the ifeval attribute, this is useful when you need a node in some conditions
</li>
</ul>

<ul>
<li>@require =&gt; this attribute allow to SaltOS to add code to the current exec
context and is intended to load code that will then be used by the eval feature
</li>
</ul>

<p>
The great change between the eval_attr of the previous versions of SaltOS is
that this version only accepts three internal commands and the other
attributes can be maintained in order to be used by other processes
(internally or externally)
</p>

</section>
<section id="toc283">
<h3>2.29.10. Eval Bool</h3>

<pre>
function eval_bool($arg)
</pre>

<p>
This function returns a boolean depending on the input evaluation, the main idea
is to get an string, for example, and determine if must be considered true or false
otherwise will finish in an error
</p>
<p>
The valid inputs are the strings one, zero, void, true, false, on, off, yes and no
</p>

<ul>
<li>@arg =&gt; the value that do you want to evaluates as boolean
</li>
</ul>

</section>
</section>
<section id="toc284">
<h2>2.30. Yaml helper module</h2>

<pre>
api/php/autoload/yaml.php
</pre>

<p>
This file provide the functions provided by the php-yaml package, intended
to be used by setups that can not install this package.
</p>

<section id="toc285">
<h3>2.30.1. Yaml Parse</h3>

<pre>
function yaml_parse(string $yaml)
</pre>

<p>
Parse a YAML string into a PHP array.
</p>

<ul>
<li>@yaml =&gt; The YAML string.
</li>
</ul>

</section>
<section id="toc286">
<h3>2.30.2. Yaml Parse File</h3>

<pre>
function yaml_parse_file(string $filename)
</pre>

<p>
Parse a YAML file into a PHP array
</p>

<ul>
<li>@filename =&gt; The path to the YAML file
</li>
</ul>

</section>
<section id="toc287">
<h3>2.30.3. Yaml Emit</h3>

<pre>
function yaml_emit(array $data, int $inline = 2, int $indent = 4)
</pre>

<p>
Emit an array as a YAML string.
</p>

<ul>
<li>@data   =&gt; The data to convert to YAML.
</li>
<li>@inline =&gt; The level at which to start inlining YAML (default: 2).
</li>
<li>@indent =&gt; The number of spaces to use for indentation (default: 4).
</li>
</ul>

</section>
<section id="toc288">
<h3>2.30.4. Yaml Emit File</h3>

<pre>
function yaml_emit_file(string $filename, array $data, int $inline = 2, int $indent = 4)
</pre>

<p>
Emit an array as a YAML file
</p>

<ul>
<li>@filename =&gt; The path to save the YAML file
</li>
<li>@data     =&gt; The data to convert to YAML
</li>
<li>@inline   =&gt; The level at which to start inlining YAML (default: 2)
</li>
<li>@indent   =&gt; The number of spaces to use for indentation (default: 4)
</li>
</ul>

</section>
</section>
<section id="toc289">
<h2>2.31. Main execution module</h2>

<pre>
api/php/autoload/zindex.php
</pre>

<p>
This file contains the old index.php file, this was moved here to simplify the index.php and to
allow some php checks found in the current index.php
</p>
<p>
This code implements the main method to access to the SaltOS API using rest and json requests, to
use it, you can use the follow methods:
</p>
<p>
1) Rest using GET requests
</p>
<p>
This kind of requests requires that you send a GET request with a querystring of the follow
form:
</p>

<ul>
<li>@<a href="https://127.0.0.1/saltos/code4/?app/invoices/view/2">https://127.0.0.1/saltos/code4/?app/invoices/view/2</a>
</li>
</ul>

<p>
And the system process it of the follow form:
</p>

<ul>
<li>@rest/1 =&gt; invoices
</li>
<li>@rest/2 =&gt; view
</li>
<li>@rest/3 =&gt; 2
</li>
</ul>

<p>
And you can programm any action that uses these parameters to do the desired task
</p>
<p>
2) Json using POST requests
</p>
<p>
This other kind of requests requires that you send a POST request with the appropiate header
for the content-type as application/json and a json in the body of the request, with this
call, saltos can map all contents of the json to the json/????? variables.
</p>
<p>
As an extra bonus, this module defines some useful server variables used in a lot of
features of saltos, like the follow vars:
</p>

<ul>
<li>@request_method =&gt; can be GET or POST
</li>
<li>@content_type   =&gt; used to check the content type for the JSON requests
</li>
<li>@token          =&gt; used to validate the HTTP_TOKEN send as authentication
</li>
<li>@remote_addr    =&gt; used internally for security reasons
</li>
<li>@user_agent     =&gt; used internally for security reasons
</li>
</ul>

<p>
As a brief resume, you can use the follow keys in get_data or set_data:
</p>

<ul>
<li>@rest                  =&gt; to get an array with all rest data, for the above example they
                          must return some thing like this:
                          ["app", "invoices", "view", "2"]
</li>
<li>@rest/1                =&gt; to get only the element that contains "invoices"
</li>
<li>@rest/2                =&gt; to get only the element that contains "view"
</li>
<li>@rest/3                =&gt; to get only the element that contains "2"
</li>
<li>@json                  =&gt; to get an array with all json data, for the above example they
                          must return some thing like this: ["user"=&gt;"xxx", "pass"=&gt;"xxx"]
</li>
<li>@json/user             =&gt; to get only the element that contains the user
</li>
<li>@json/pass             =&gt; to get only the element that contains the pass
</li>
<li>@server                =&gt; to get an array with all server data
</li>
<li>@server/request_method =&gt; can be GET or POST
</li>
<li>@server/content_type   =&gt; used to check the content type for the JSON requests
</li>
<li>@server/token          =&gt; used to validate the HTTP_TOKEN send as authentication
</li>
<li>@server/remote_addr    =&gt; used internally for security reasons
</li>
<li>@server/user_agent     =&gt; used internally for security reasons
</li>
</ul>

</section>
</section>
<section id="toc290">
<h1>3. Database</h1>

<section id="toc291">
<h2>3.1. SQLite3 functions library</h2>

<pre>
api/php/database/libsqlite.php
</pre>

<p>
SQLite's database allow to define external functions that can be used from the SQL language,
this is a great feature that allow to use SQLite as MySQL, and using this feature of the
database, the SQLite drivers use the libsqlite to add a lot of features found in MySQL and
used in a lot of queries by SaltOS
</p>
<p>
More info about this feature by searching:
</p>

<ul>
<li>@PDO     =&gt; sqliteCreateFunction/sqliteCreateAggregate
</li>
<li>@SQLite3 =&gt; createFunction/createAggregate
</li>
</ul>

<section id="toc292">
<h3>3.1.1. GROUP_CONCAT</h3>

<pre>
function __libsqlite_group_concat_step($context, $rows, $string, $separator = ',')
</pre>

<p>
This function add the GROUP_CONCAT to the SQLite database
</p>

</section>
<section id="toc293">
<h3>3.1.2. GROUP_CONCAT</h3>

<pre>
function __libsqlite_group_concat_finalize($context, $rows)
</pre>

<p>
This function add the GROUP_CONCAT to the SQLite database
</p>

</section>
<section id="toc294">
<h3>3.1.3. REPLACE</h3>

<pre>
function __libsqlite_replace($subject, $search, $replace)
</pre>

<p>
This function add the REPLACE to the SQLite database
</p>

</section>
<section id="toc295">
<h3>3.1.4. LPAD</h3>

<pre>
function __libsqlite_lpad($input, $length, $char)
</pre>

<p>
This function add the LPAD to the SQLite database
</p>

</section>
<section id="toc296">
<h3>3.1.5. CONCAT</h3>

<pre>
function __libsqlite_concat(...$args)
</pre>

<p>
This function add the CONCAT to the SQLite database
</p>

</section>
<section id="toc297">
<h3>3.1.6. CONCAT_WS</h3>

<pre>
function __libsqlite_concat_ws(...$args)
</pre>

<p>
This function add the CONCAT_WS to the SQLite database
</p>

</section>
<section id="toc298">
<h3>3.1.7. UNIX_TIMESTAMP</h3>

<pre>
function __libsqlite_unix_timestamp($date)
</pre>

<p>
This function add the UNIX_TIMESTAMP to the SQLite database
</p>

</section>
<section id="toc299">
<h3>3.1.8. FROM_UNIXTIME</h3>

<pre>
function __libsqlite_from_unixtime($timestamp)
</pre>

<p>
This function add the FROM_UNIXTIME to the SQLite database
</p>

</section>
<section id="toc300">
<h3>3.1.9. YEAR</h3>

<pre>
function __libsqlite_year($date)
</pre>

<p>
This function add the YEAR to the SQLite database
</p>

</section>
<section id="toc301">
<h3>3.1.10. MONTH</h3>

<pre>
function __libsqlite_month($date)
</pre>

<p>
This function add the MONTH to the SQLite database
</p>

</section>
<section id="toc302">
<h3>3.1.11. WEEK</h3>

<pre>
function __libsqlite_week($date, $mode = 0)
</pre>

<p>
This function add the WEEK to the SQLite database
</p>

</section>
<section id="toc303">
<h3>3.1.12. TRUNCATE</h3>

<pre>
function __libsqlite_truncate($n, $d)
</pre>

<p>
This function add the TRUNCATE to the SQLite database
</p>

</section>
<section id="toc304">
<h3>3.1.13. DAY</h3>

<pre>
function __libsqlite_day($date)
</pre>

<p>
This function add the DAY to the SQLite database
</p>

</section>
<section id="toc305">
<h3>3.1.14. DAYOFYEAR</h3>

<pre>
function __libsqlite_dayofyear($date)
</pre>

<p>
This function add the DAYOFYEAR to the SQLite database
</p>

</section>
<section id="toc306">
<h3>3.1.15. DAYOFWEEK</h3>

<pre>
function __libsqlite_dayofweek($date)
</pre>

<p>
This function add the DAYOFWEEK to the SQLite database
</p>

</section>
<section id="toc307">
<h3>3.1.16. HOUR</h3>

<pre>
function __libsqlite_hour($date)
</pre>

<p>
This function add the HOUR to the SQLite database
</p>

</section>
<section id="toc308">
<h3>3.1.17. MINUTE</h3>

<pre>
function __libsqlite_minute($date)
</pre>

<p>
This function add the MINUTE to the SQLite database
</p>

</section>
<section id="toc309">
<h3>3.1.18. SECOND</h3>

<pre>
function __libsqlite_second($date)
</pre>

<p>
This function add the SECOND to the SQLite database
</p>

</section>
<section id="toc310">
<h3>3.1.19. MD5</h3>

<pre>
function __libsqlite_md5($temp)
</pre>

<p>
This function add the MD5 to the SQLite database
</p>

</section>
<section id="toc311">
<h3>3.1.20. REPEAT</h3>

<pre>
function __libsqlite_repeat($str, $count)
</pre>

<p>
This function add the REPEAT to the SQLite database
</p>

</section>
<section id="toc312">
<h3>3.1.21. FIND_IN_SET</h3>

<pre>
function __libsqlite_find_in_set($str, $strlist)
</pre>

<p>
This function add the FIND_IN_SET to the SQLite database
</p>

</section>
<section id="toc313">
<h3>3.1.22. IF</h3>

<pre>
function __libsqlite_if($condition, $value_if_true, $value_if_false)
</pre>

<p>
This function add the IF to the SQLite database
</p>

</section>
<section id="toc314">
<h3>3.1.23. POW</h3>

<pre>
function __libsqlite_pow($base, $exp)
</pre>

<p>
This function add the POW to the SQLite database
</p>

</section>
<section id="toc315">
<h3>3.1.24. DATE_FORMAT</h3>

<pre>
function __libsqlite_date_format($date, $format)
</pre>

<p>
This function add the DATE_FORMAT to the SQLite database
</p>

</section>
<section id="toc316">
<h3>3.1.25. NOW</h3>

<pre>
function __libsqlite_now()
</pre>

<p>
This function add the NOW to the SQLite database
</p>

</section>
</section>
<section id="toc317">
<h2>3.2. MySQL improved driver</h2>

<pre>
api/php/database/mysqli.php
</pre>

<p>
This file implements the MySQL improved driver. This driver was coded later that the initial
mysql driver and contains lots of improvements respect to the old mysql driver. The old mysql
driver was removed in the PHP 7.0 release.
</p>

<section id="toc318">
<h3>3.2.1. Database MySQL improved class</h3>

<pre>
class database_mysqli
</pre>

<p>
This class allow to SaltOS to connect to MySQL databases using the MySQL improved driver
</p>

</section>
<section id="toc319">
<h3>3.2.2. Private link variable</h3>

<pre>
private $link = null;
</pre>

<p>
This private variable contains the link to the database
</p>

</section>
<section id="toc320">
<h3>3.2.3. Constructor</h3>

<pre>
public function __construct($args)
</pre>

<p>
This public function is intended to stablish the connection to the database
</p>

<ul>
<li>@args =&gt; is an array with key val pairs
</li>
<li>@host =&gt; the host for the connection
</li>
<li>@port =&gt; the port used for the connection
</li>
<li>@name =&gt; name of the database for the connection
</li>
<li>@user =&gt; user used to stablish the connection
</li>
<li>@pass =&gt; pass used to stablish the connection
</li>
</ul>

<p>
Notes of this driver:
</p>
<p>
MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT are the same that PDO::ERRMODE_EXCEPTION
MYSQLI_USE_RESULT is the same that PDO::MYSQL_ATTR_USE_BUFFERED_QUERY = false
</p>

</section>
<section id="toc321">
<h3>3.2.4. DB Check</h3>

<pre>
public function db_check($query, $params = [])
</pre>

<p>
This public function is intended to check that the query execution will not trigger an error
</p>

<ul>
<li>@query =&gt; the query that you want to validate
</li>
</ul>

</section>
<section id="toc322">
<h3>3.2.5. DB Escape</h3>

<pre>
public function db_escape($str)
</pre>

<p>
This public function is intended to escape the special chars to sanitize the string to be used
in a sql query
</p>

<ul>
<li>@str =&gt; the string that you want to sanitize
</li>
</ul>

</section>
<section id="toc323">
<h3>3.2.6. DB Query</h3>

<pre>
public function db_query($query, ...$args)
</pre>

<p>
This public function is intended to execute the query and returns the resultset
</p>

<ul>
<li>@query =&gt; the query that you want to execute
</li>
<li>@fetch =&gt; the type of fetch that you want to use, can be auto, query, column or concat
</li>
</ul>

<p>
Notes:
</p>
<p>
The fetch argument can perform an speed up in the execution of the retrieve action, and
can modify how the result is returned
</p>
<p>
auto: this fetch method try to detect if the resultset contains one or more columns, and
sets the fetch to column (if the resultset only contains one column) or to query (otherwise)
</p>
<p>
query: this fetch method returns all resultset as an array of rows, and each row contain the
pair of key val with the name of the field and the value of the field
</p>
<p>
column: this fetch method returns an array where each element is each value of the field of
the each row, this is useful when for example do you want to get all ids of a query, with
this method you can obtain an array with each value of the array is an id of the resultset
</p>
<p>
concat: this fetch method is an special mode intended to speed up the retrieve of large
arrays, this is useful when you want to get all ids of a query and you want to get a big
sized array, in this case, is more efficient to get an string separated by commas with all
ids instead of an array where each element is an id
</p>

</section>
<section id="toc324">
<h3>3.2.7. DB Last Insert ID</h3>

<pre>
public function db_last_insert_id()
</pre>

<p>
This function returns the last insert id
</p>

</section>
<section id="toc325">
<h3>3.2.8. DB Disconnect</h3>

<pre>
public function db_disconnect()
</pre>

<p>
This function close the database connection and sets the link to null
</p>

</section>
</section>
<section id="toc326">
<h2>3.3. PDO MsSQL driver</h2>

<pre>
api/php/database/pdo_mssql.php
</pre>

<p>
This file implements the MySQL improved driver. This driver uses the dblib library to connect
with SQL servers.
</p>

<section id="toc327">
<h3>3.3.1. Database PDO MsSQL class</h3>

<pre>
class database_pdo_mssql
</pre>

<p>
This class allow to SaltOS to connect to MsSQL databases using the PDO driver
</p>

</section>
<section id="toc328">
<h3>3.3.2. Private link variable</h3>

<pre>
private $link = null;
</pre>

<p>
This private variable contains the link to the database
</p>

</section>
<section id="toc329">
<h3>3.3.3. Constructor</h3>

<pre>
public function __construct($args)
</pre>

<p>
This public function is intended to stablish the connection to the database
</p>

<ul>
<li>@args =&gt; is an array with key val pairs
</li>
<li>@host =&gt; the host for the connection
</li>
<li>@port =&gt; the port used for the connection
</li>
<li>@name =&gt; name of the database for the connection
</li>
<li>@user =&gt; user used to stablish the connection
</li>
<li>@pass =&gt; pass used to stablish the connection
</li>
</ul>

</section>
<section id="toc330">
<h3>3.3.4. DB Check</h3>

<pre>
public function db_check($query, $params = [])
</pre>

<p>
This public function is intended to check that the query execution will not trigger an error
</p>

<ul>
<li>@query =&gt; the query that you want to validate
</li>
</ul>

</section>
<section id="toc331">
<h3>3.3.5. DB Escape</h3>

<pre>
public function db_escape($str)
</pre>

<p>
This public function is intended to escape the special chars to sanitize the string to be used
in a sql query
</p>

<ul>
<li>@str =&gt; the string that you want to sanitize
</li>
</ul>

<p>
Notes:
</p>
<p>
This driver adds a simple quotes at the beginning and at the finish of ths string, by this
reason this function returns the substr(1, -1) of the quoted string.
</p>

</section>
<section id="toc332">
<h3>3.3.6. DB Query</h3>

<pre>
public function db_query($query, ...$args)
</pre>

<p>
This public function is intended to execute the query and returns the resultset
</p>

<ul>
<li>@query =&gt; the query that you want to execute
</li>
<li>@fetch =&gt; the type of fetch that you want to use, can be auto, query, column or concat
</li>
</ul>

<p>
Notes:
</p>
<p>
The fetch argument can perform an speed up in the execution of the retrieve action, and
can modify how the result is returned
</p>
<p>
auto: this fetch method try to detect if the resultset contains one or more columns, and
sets the fetch to column (if the resultset only contains one column) or to query (otherwise)
</p>
<p>
query: this fetch method returns all resultset as an array of rows, and each row contain the
pair of key val with the name of the field and the value of the field
</p>
<p>
column: this fetch method returns an array where each element is each value of the field of
the each row, this is useful when for example do you want to get all ids of a query, with
this method you can obtain an array with each value of the array is an id of the resultset
</p>
<p>
concat: this fetch method is an special mode intended to speed up the retrieve of large
arrays, this is useful when you want to get all ids of a query and you want to get a big
sized array, in this case, is more efficient to get an string separated by commas with all
ids instead of an array where each element is an id
</p>

</section>
<section id="toc333">
<h3>3.3.7. DB Last Insert ID</h3>

<pre>
public function db_last_insert_id()
</pre>

<p>
This function returns the last insert id
</p>

</section>
<section id="toc334">
<h3>3.3.8. DB Disconnect</h3>

<pre>
public function db_disconnect()
</pre>

<p>
This function close the database connection and sets the link to null
</p>

</section>
</section>
<section id="toc335">
<h2>3.4. PDO MySQL driver</h2>

<pre>
api/php/database/pdo_mysql.php
</pre>

<p>
This file implements the MySQL improved driver. This is the recommended driver when you want
to use MySQL servers, it uses the PDO extension and alow to connect to MySQL servers with a
good performance.
</p>

<section id="toc336">
<h3>3.4.1. Database PDO MySQL class</h3>

<pre>
class database_pdo_mysql
</pre>

<p>
This class allow to SaltOS to connect to MySQL databases using the PDO driver
</p>

</section>
<section id="toc337">
<h3>3.4.2. Private link variable</h3>

<pre>
private $link = null;
</pre>

<p>
This private variable contains the link to the database
</p>

</section>
<section id="toc338">
<h3>3.4.3. Constructor</h3>

<pre>
public function __construct($args)
</pre>

<p>
This public function is intended to stablish the connection to the database
</p>

<ul>
<li>@args =&gt; is an array with key val pairs
</li>
<li>@host =&gt; the host for the connection
</li>
<li>@port =&gt; the port used for the connection
</li>
<li>@name =&gt; name of the database for the connection
</li>
<li>@user =&gt; user used to stablish the connection
</li>
<li>@pass =&gt; pass used to stablish the connection
</li>
</ul>

</section>
<section id="toc339">
<h3>3.4.4. DB Check</h3>

<pre>
public function db_check($query, $params = [])
</pre>

<p>
This public function is intended to check that the query execution will not trigger an error
</p>

<ul>
<li>@query =&gt; the query that you want to validate
</li>
</ul>

</section>
<section id="toc340">
<h3>3.4.5. DB Escape</h3>

<pre>
public function db_escape($str)
</pre>

<p>
This public function is intended to escape the special chars to sanitize the string to be used
in a sql query
</p>

<ul>
<li>@str =&gt; the string that you want to sanitize
</li>
</ul>

<p>
Notes:
</p>
<p>
This driver adds a simple quotes at the beginning and at the finish of ths string, by this
reason this function returns the substr(1, -1) of the quoted string.
</p>

</section>
<section id="toc341">
<h3>3.4.6. DB Query</h3>

<pre>
public function db_query($query, ...$args)
</pre>

<p>
This public function is intended to execute the query and returns the resultset
</p>

<ul>
<li>@query =&gt; the query that you want to execute
</li>
<li>@fetch =&gt; the type of fetch that you want to use, can be auto, query, column or concat
</li>
</ul>

<p>
Notes:
</p>
<p>
The fetch argument can perform an speed up in the execution of the retrieve action, and
can modify how the result is returned
</p>
<p>
auto: this fetch method try to detect if the resultset contains one or more columns, and
sets the fetch to column (if the resultset only contains one column) or to query (otherwise)
</p>
<p>
query: this fetch method returns all resultset as an array of rows, and each row contain the
pair of key val with the name of the field and the value of the field
</p>
<p>
column: this fetch method returns an array where each element is each value of the field of
the each row, this is useful when for example do you want to get all ids of a query, with
this method you can obtain an array with each value of the array is an id of the resultset
</p>
<p>
concat: this fetch method is an special mode intended to speed up the retrieve of large
arrays, this is useful when you want to get all ids of a query and you want to get a big
sized array, in this case, is more efficient to get an string separated by commas with all
ids instead of an array where each element is an id
</p>

</section>
<section id="toc342">
<h3>3.4.7. DB Last Insert ID</h3>

<pre>
public function db_last_insert_id()
</pre>

<p>
This function returns the last insert id
</p>

</section>
<section id="toc343">
<h3>3.4.8. DB Disconnect</h3>

<pre>
public function db_disconnect()
</pre>

<p>
This function close the database connection and sets the link to null
</p>

</section>
</section>
<section id="toc344">
<h2>3.5. PDO SQLite driver</h2>

<pre>
api/php/database/pdo_sqlite.php
</pre>

<p>
This file implements the MySQL improved driver. This is the recommended driver when you want
to use SQLite3 files as database server and it uses the PDO extension to do it, this driver
solves the concurrence problem using POSIX semaphores, generally it is a good option for setups
that don't require a fulltext search optimizations suck as mroonga, intended for a personal
usage or demos.
</p>

<section id="toc345">
<h3>3.5.1. Database PDO SQLite class</h3>

<pre>
class database_pdo_sqlite
</pre>

<p>
This class allow to SaltOS to connect to SQLite databases using the PDO driver
</p>

</section>
<section id="toc346">
<h3>3.5.2. Private link variable</h3>

<pre>
private $link = null;
</pre>

<p>
This private variable contains the link to the database
</p>

</section>
<section id="toc347">
<h3>3.5.3. Constructor</h3>

<pre>
public function __construct($args)
</pre>

<p>
This public function is intended to stablish the connection to the database
</p>

<ul>
<li>@args =&gt; is an array with key val pairs
</li>
<li>@file =&gt; the file that contains the database
</li>
</ul>

<p>
Notes:
</p>
<p>
This database allow to define external functions that can be used from the SQL language,
this is a great feature that allow to use SQLite as MySQL, and using this feature of the
database, this driver uses the libsqlite to add a lot of features found in MySQL and
used in a lot of queries by SaltOS
</p>

</section>
<section id="toc348">
<h3>3.5.4. DB Check</h3>

<pre>
public function db_check($query, $params = [])
</pre>

<p>
This public function is intended to check that the query execution will not trigger an error
</p>

<ul>
<li>@query =&gt; the query that you want to validate
</li>
</ul>

</section>
<section id="toc349">
<h3>3.5.5. DB Escape</h3>

<pre>
public function db_escape($str)
</pre>

<p>
This public function is intended to escape the special chars to sanitize the string to be used
in a sql query
</p>

<ul>
<li>@str =&gt; the string that you want to sanitize
</li>
</ul>

<p>
Notes:
</p>
<p>
This driver adds a simple quotes at the beginning and at the finish of ths string, by this
reason this function returns the substr(1, -1) of the quoted string.
</p>

</section>
<section id="toc350">
<h3>3.5.6. DB Query</h3>

<pre>
public function db_query($query, ...$args)
</pre>

<p>
This public function is intended to execute the query and returns the resultset
</p>

<ul>
<li>@query =&gt; the query that you want to execute
</li>
<li>@fetch =&gt; the type of fetch that you want to use, can be auto, query, column or concat
</li>
</ul>

<p>
Notes:
</p>
<p>
The fetch argument can perform an speed up in the execution of the retrieve action, and
can modify how the result is returned
</p>
<p>
auto: this fetch method try to detect if the resultset contains one or more columns, and
sets the fetch to column (if the resultset only contains one column) or to query (otherwise)
</p>
<p>
query: this fetch method returns all resultset as an array of rows, and each row contain the
pair of key val with the name of the field and the value of the field
</p>
<p>
column: this fetch method returns an array where each element is each value of the field of
the each row, this is useful when for example do you want to get all ids of a query, with
this method you can obtain an array with each value of the array is an id of the resultset
</p>
<p>
concat: this fetch method is an special mode intended to speed up the retrieve of large
arrays, this is useful when you want to get all ids of a query and you want to get a big
sized array, in this case, is more efficient to get an string separated by commas with all
ids instead of an array where each element is an id
</p>

</section>
<section id="toc351">
<h3>3.5.7. DB Last Insert ID</h3>

<pre>
public function db_last_insert_id()
</pre>

<p>
This function returns the last insert id
</p>

</section>
<section id="toc352">
<h3>3.5.8. DB Disconnect</h3>

<pre>
public function db_disconnect()
</pre>

<p>
This function close the database connection and sets the link to null
</p>

</section>
</section>
<section id="toc353">
<h2>3.6. SQLite3 driver</h2>

<pre>
api/php/database/sqlite3.php
</pre>

<p>
This file implements the MySQL improved driver. This is the recommended driver when you want
to use SQLite3 files as database server, this driver solves the concurrence problem using
POSIX semaphores, generally it is a good option for setups that don't require a fulltext
search optimizations suck as mroonga, intended for a personal usage or demos.
</p>

<section id="toc354">
<h3>3.6.1. Database SQLite3 class</h3>

<pre>
class database_sqlite3
</pre>

<p>
This class allow to SaltOS to connect to SQLite databases using the SQLite3 driver
</p>

</section>
<section id="toc355">
<h3>3.6.2. Private link variable</h3>

<pre>
private $link = null;
</pre>

<p>
This private variable contains the link to the database
</p>

</section>
<section id="toc356">
<h3>3.6.3. Constructor</h3>

<pre>
public function __construct($args)
</pre>

<p>
This public function is intended to stablish the connection to the database
</p>

<ul>
<li>@args =&gt; is an array with key val pairs
</li>
<li>@file =&gt; the file that contains the database
</li>
</ul>

<p>
Notes:
</p>
<p>
This database allow to define external functions that can be used from the SQL language,
this is a great feature that allow to use SQLite as MySQL, and using this feature of the
database, this driver uses the libsqlite to add a lot of features found in MySQL and
used in a lot of queries by SaltOS
</p>

</section>
<section id="toc357">
<h3>3.6.4. DB Check</h3>

<pre>
public function db_check($query, $params = [])
</pre>

<p>
This public function is intended to check that the query execution will not trigger an error
</p>

<ul>
<li>@query =&gt; the query that you want to validate
</li>
</ul>

</section>
<section id="toc358">
<h3>3.6.5. DB Escape</h3>

<pre>
public function db_escape($str)
</pre>

<p>
This public function is intended to escape the special chars to sanitize the string to be used
in a sql query
</p>

<ul>
<li>@str =&gt; the string that you want to sanitize
</li>
</ul>

</section>
<section id="toc359">
<h3>3.6.6. DB Query</h3>

<pre>
public function db_query($query, ...$args)
</pre>

<p>
This public function is intended to execute the query and returns the resultset
</p>

<ul>
<li>@query =&gt; the query that you want to execute
</li>
<li>@fetch =&gt; the type of fetch that you want to use, can be auto, query, column or concat
</li>
</ul>

<p>
Notes:
</p>
<p>
The fetch argument can perform an speed up in the execution of the retrieve action, and
can modify how the result is returned
</p>
<p>
auto: this fetch method try to detect if the resultset contains one or more columns, and
sets the fetch to column (if the resultset only contains one column) or to query (otherwise)
</p>
<p>
query: this fetch method returns all resultset as an array of rows, and each row contain the
pair of key val with the name of the field and the value of the field
</p>
<p>
column: this fetch method returns an array where each element is each value of the field of
the each row, this is useful when for example do you want to get all ids of a query, with
this method you can obtain an array with each value of the array is an id of the resultset
</p>
<p>
concat: this fetch method is an special mode intended to speed up the retrieve of large
arrays, this is useful when you want to get all ids of a query and you want to get a big
sized array, in this case, is more efficient to get an string separated by commas with all
ids instead of an array where each element is an id
</p>

</section>
<section id="toc360">
<h3>3.6.7. DB Last Insert ID</h3>

<pre>
public function db_last_insert_id()
</pre>

<p>
This function returns the last insert id
</p>

</section>
<section id="toc361">
<h3>3.6.8. DB Disconnect</h3>

<pre>
public function db_disconnect()
</pre>

<p>
This function close the database connection and sets the link to null
</p>

</section>
</section>
</section>
<section id="toc362">
<h1>4. Libraries</h1>

<section id="toc363">
<h2>4.1. Actions module</h2>

<pre>
api/php/lib/actions.php
</pre>

<p>
This file provides the basic actions used by all apps like insert,
update and delete, this modules uses features from others modules
as controol, log, version, indexing, upload, depend and trash.
</p>

<section id="toc364">
<h3>4.1.1. Insert action</h3>

<pre>
function insert($app, $data)
</pre>

<p>
This action allow to insert registers in the database associated to
each app
</p>

<ul>
<li>@app  =&gt; the application involved in the action
</li>
<li>@data =&gt; an array with the data that you want to use for the operation
</li>
</ul>

<p>
Notes:
</p>
<p>
The data array must contains the fields of the main table, an object
with the subtables, and with two fields (addfiles and addnotes)
</p>

</section>
<section id="toc365">
<h3>4.1.2. Update action</h3>

<pre>
function update($app, $id, $data)
</pre>

<p>
This action allow to update registers in the database associated to
each app
</p>

<ul>
<li>@app  =&gt; the application involved in the action
</li>
<li>@data =&gt; an array with the data that you want to use for the operation
</li>
</ul>

<p>
Notes:
</p>
<p>
The data array must contains the fields of the main table, an object
with the subtables, and with four fields (addfiles, delfiles, addnotes
and delnotes)
</p>

</section>
<section id="toc366">
<h3>4.1.3. Delete action</h3>

<pre>
function delete($app, $id)
</pre>

<p>
This action allow to delete registers in the database associated to
each app
</p>

<ul>
<li>@app  =&gt; the application involved in the action
</li>
<li>@data =&gt; an array with the data that you want to use for the operation
</li>
</ul>

<p>
Notes:
</p>
<p>
This action removes the register identified by the id in the main table
of the app and the subtables, too removes the related data of the files
and notes tables, as an excepcion, the version table maintain all data
to allow the recovery action, too, the files of the files feature will
be moved to the trash folder to allow the previous recovery from the
version table
</p>

</section>
</section>
<section id="toc367">
<h2>4.2. Array to XML helper module</h2>

<pre>
api/php/lib/array2xml.php
</pre>

<p>
This fie is a part of the most old files of the SaltOS, accomplish the task to convert an array
to an XML string, currently it is little used because the most important module compared to this
is the inverse xml2array module
</p>

<section id="toc368">
<h3>4.2.1. Check Node Name</h3>

<pre>
function __array2xml_check_node_name($name)
</pre>

<p>
This function acts as helper of the array2xml function, is intended to
return if the node name is valid
</p>

<ul>
<li>@name =&gt; the name that you want to validate
</li>
</ul>

</section>
<section id="toc369">
<h3>4.2.2. Check Attr Name</h3>

<pre>
function __array2xml_check_node_attr($name)
</pre>

<p>
This function acts as helper of the array2xml function, is intended to
return if the attribute name is valid
</p>

<ul>
<li>@name =&gt; the name that you want to validate
</li>
</ul>

</section>
<section id="toc370">
<h3>4.2.3. Write Nodes array2xml helper</h3>

<pre>
function __array2xml_write_nodes(&amp;$array, $level = null)
</pre>

<p>
This function acts as helper of the array2xml function, is intended to
return a string with the tree array
</p>

<ul>
<li>@array =&gt; the tree array that you want to convert to XML
</li>
<li>@level =&gt; can be null to minify the output zero to indent the XML contents
</li>
</ul>

</section>
<section id="toc371">
<h3>4.2.4. Array to XML</h3>

<pre>
function array2xml($array, $indent = false)
</pre>

<p>
This function returns a string with the contents of array converted into a XML
language file, to do it, uses some helpers as __array2xml_* functions
</p>

<ul>
<li>@array  =&gt; the array that contains the tree structure that you want to convert to XML
</li>
<li>@indent =&gt; a boolean to enable or disable the indent (the old minify) feature
</li>
</ul>

</section>
</section>
<section id="toc372">
<h2>4.3. Make Table ASCII</h2>

<pre>
api/php/lib/ascii.php
</pre>

<p>
This table is intended for debug purposes and is able to paint in ascii
mode the contents of a matrix
</p>

<section id="toc373">
<h3>4.3.1. Make Table ASCII</h3>

<pre>
function __ascii_make_table_ascii($array)
</pre>

<p>
This table is intended for debug purposes and is able to paint in ascii
mode the contents of a matrix
</p>

<ul>
<li>@rows    =&gt; the contents of the matrix to paint
</li>
<li>@head    =&gt; set to true if you want to use the first row as header
</li>
<li>@compact =&gt; set to true if you want to minify the ascii table
</li>
</ul>

</section>
</section>
<section id="toc374">
<h2>4.4. Login functions</h2>

<pre>
api/php/lib/auth.php
</pre>

<p>
This file contain all functions needed by the logins app
</p>

<section id="toc375">
<h3>4.4.1. Authentication token action</h3>

<pre>
function authtoken($user, $pass)
</pre>

<p>
This file implements the login action, allowing to authenticate users using the pair
of login/password to validate the credentials and get a valid token to operate in SaltOS
</p>

<ul>
<li>@user =&gt; username used in the authentication process
</li>
<li>@pass =&gt; password used in the authentication process
</li>
</ul>

<p>
This action not requires a valid token, all valid tokens associated
to the user will be revoked when a new token is assigned, as the result of this action
is a flag that indicates the validity of the token, this action returns a json with the
status of te token instead of returns a json with an error in case of non validity
</p>

</section>
<section id="toc376">
<h3>4.4.2. Deauthentication token action</h3>

<pre>
function deauthtoken()
</pre>

<p>
This file implements the logout action, allowing to deauthenticate users
using a valid token, for security reasons, the deauth action only can
be performed by the same actor that execute the login action
</p>
<p>
The unique requirement to execute this action is to have a valid token
</p>

</section>
<section id="toc377">
<h3>4.4.3. Check token action</h3>

<pre>
function checktoken()
</pre>

<p>
This file implements the check action, allowing to check token's validity, the check
action only can be performed by the same actor that execute the login action
</p>
<p>
The unique requirement to execute this action is to have a token to be checked, as the
result of this action is a flag that indicates the validity of the token, this action
returns a json with the status of te token instead of returns a json with an error in
case of non validity
</p>

</section>
<section id="toc378">
<h3>4.4.4. Authentication update action</h3>

<pre>
function authupdate($oldpass, $newpass, $renewpass)
</pre>

<p>
This file implements the update password action, allowing to authenticated
users by a token, and providing the old password to update a new password
</p>

<ul>
<li>@oldpass   =&gt; Old password, must to validate the active password of the user
              associated to the token used in the action
</li>
<li>@newpass   =&gt; New password, must to be new, must to pass the score check and
              never must to be used in the system for the user
</li>
<li>@renewpass =&gt; The repeated new password, to prevent writing errors
</li>
</ul>

<p>
This action requires a valid token associated to the user that wants to do
the password update
</p>

</section>
<section id="toc379">
<h3>4.4.5. Score check</h3>

<pre>
function score_check($newpass)
</pre>

<p>
This function checks the score quality of the provided password
</p>

<ul>
<li>@newpass =&gt; the password thay you want to check
</li>
</ul>

</section>
<section id="toc380">
<h3>4.4.6. Old password check</h3>

<pre>
function oldpass_check($user_id, $oldpass)
</pre>

<p>
This function checks that the provided password is valid for the user_id
</p>

<ul>
<li>@user_id =&gt; the user_id to use in the check task
</li>
<li>@oldpass =&gt; the password to use in the check task
</li>
</ul>

</section>
<section id="toc381">
<h3>4.4.7. New password check</h3>

<pre>
function newpass_check($user_id, $newpass)
</pre>

<p>
This function checks that the provided password has never been used by the user_id
</p>

<ul>
<li>@user_id =&gt; the user_id to use in the check task
</li>
<li>@newpass =&gt; the password to use in the check task
</li>
</ul>

</section>
<section id="toc382">
<h3>4.4.8. Old password disable</h3>

<pre>
function oldpass_disable($user_id)
</pre>

<p>
This function disable all passwords associated to the user_id
</p>

<ul>
<li>@user_id =&gt; the user_id to use in the check task
</li>
</ul>

</section>
<section id="toc383">
<h3>4.4.9. New password insert</h3>

<pre>
function newpass_insert($user_id, $newpass)
</pre>

<p>
This function inserts a new password record to the database
</p>

<ul>
<li>@user_id =&gt; the user_id to use in the insert task
</li>
<li>@newpass =&gt; the password to use in the insert task
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns the created and expires timestamps
</p>

</section>
</section>
<section id="toc384">
<h2>4.5. Barcode helper module</h2>

<pre>
api/php/lib/barcode.php
</pre>

<p>
This fie contains useful functions related to barcodes
</p>

<section id="toc385">
<h3>4.5.1. BarCode image function</h3>

<pre>
function __barcode_image($msg, $w, $h, $m, $s, $t)
</pre>

<p>
This function allow to generate a barcode, you can pass the desired
message that you want to convert in barcode and it returns an image
with the data
</p>

<ul>
<li>@msg =&gt; Contents of the barcode
</li>
<li>@w   =&gt; width of each unit's bar of the barcode
</li>
<li>@h   =&gt; height of the barcode (without margins and text footer)
</li>
<li>@m   =&gt; margin of the barcode (white area that surround the barcode)
</li>
<li>@s   =&gt; size of the footer text, not used if zero
</li>
<li>@t   =&gt; type of the barcode, C128 is the most common type used
</li>
</ul>

<p>
Notes:
</p>
<p>
The normal behavior is returns a png image, but if something was wrong,
the function can returns an empty string
</p>

</section>
<section id="toc386">
<h3>4.5.2. BarCode image png function</h3>

<pre>
function __barcode_image_png($msg, $w, $h, $t)
</pre>

<p>
This function allow to generate a barcode, you can pass the desired
message that you want to convert in barcode and it returns an image
with the data
</p>

<ul>
<li>@msg =&gt; Contents of the barcode
</li>
<li>@w   =&gt; width of each unit's bar of the barcode
</li>
<li>@h   =&gt; height of the barcode (without margins and text footer)
</li>
<li>@t   =&gt; type of the barcode, C128 is the most common type used
</li>
</ul>

<p>
Notes:
</p>
<p>
The normal behavior is returns a png image without margins and text,
but if something was wrong, the function can returns an empty string
</p>

</section>
<section id="toc387">
<h3>4.5.3. BarCode image svg function</h3>

<pre>
function __barcode_image_svg($msg, $w, $h, $t)
</pre>

<p>
This function allow to generate a barcode, you can pass the desired
message that you want to convert in barcode and it returns an image
with the data
</p>

<ul>
<li>@msg =&gt; Contents of the barcode
</li>
<li>@w   =&gt; width of each unit's bar of the barcode
</li>
<li>@h   =&gt; height of the barcode (without margins and text footer)
</li>
<li>@t   =&gt; type of the barcode, C128 is the most common type used
</li>
</ul>

<p>
Notes:
</p>
<p>
The normal behavior is returns a svg image without margins and text,
but if something was wrong, the function can returns an empty string
</p>

</section>
</section>
<section id="toc388">
<h2>4.6. Browser helper module</h2>

<pre>
api/php/lib/browser.php
</pre>

<p>
This file contain useful browser helper functions
</p>

<section id="toc389">
<h3>4.6.1. Get Browser Platform Device Type</h3>

<pre>
function get_browser_array($user_agent = null)
</pre>

<p>
This function gets the browser, platform and device_type form the user_agent header
</p>

</section>
<section id="toc390">
<h3>4.6.2. Get Browser Platform Device Type</h3>

<pre>
function get_browser_string($user_agent = null)
</pre>

<p>
This function gets the browser, platform and device_type form the user_agent header
</p>

</section>
</section>
<section id="toc391">
<h2>4.7. Captcha helper module</h2>

<pre>
api/php/lib/captcha.php
</pre>

<p>
This fie contains useful functions related to captchas
</p>

<section id="toc392">
<h3>4.7.1. Captcha Image</h3>

<pre>
function __captcha_image($code, $args = [])
</pre>

<p>
This function returns an image with the code drawed in a background that
contains white noise to prevent that robots read the code
</p>

<ul>
<li>@code      =&gt; the code that you want to paint
</li>
<li>@width     =&gt; the width of the generated image
</li>
<li>@height    =&gt; the height of the generated image
</li>
<li>@letter    =&gt; the size of the letters of the generated image
</li>
<li>@number    =&gt; the size of the numbers of the generated image
</li>
<li>@angle     =&gt; the angle allowed to rotate the letters and numbers
</li>
<li>@color     =&gt; the color user to paint the code
</li>
<li>@bgcolor   =&gt; the background color of the image
</li>
<li>@fgcolor   =&gt; the color used to paint the letters of the background of the image
</li>
<li>@period    =&gt; parameter for the wave transformation
</li>
<li>@amplitude =&gt; parameter for the wave transformation
</li>
<li>@blur      =&gt; true or false to enable or disable the blur effect
</li>
</ul>

<p>
Notes:
</p>
<p>
The main idea to program this captcha was obtained from this post:
</p>

<ul>
<li><a href="http://sentidoweb.com/2007/01/03/laboratorio-ejemplo-de-captcha.php">http://sentidoweb.com/2007/01/03/laboratorio-ejemplo-de-captcha.php</a>
</li>
</ul>

<p>
Too appear in ther posts if you search for it in google:
</p>

<ul>
<li><a href="http://www.google.es/search?q=captcha+alto_linea">http://www.google.es/search?q=captcha+alto_linea</a>
</li>
</ul>

</section>
<section id="toc393">
<h3>4.7.2. Captcha Make Number function</h3>

<pre>
function __captcha_make_number($length)
</pre>

<p>
This function returns a random number of the desired length and as trick,
checks that the output is a prime number
</p>

<ul>
<li>@length =&gt; the length of the desired output string
</li>
</ul>

</section>
<section id="toc394">
<h3>4.7.3. Captcha Make Math Operation function</h3>

<pre>
function __captcha_make_math($length)
</pre>

<p>
This function returns a random math operation of the desired length and
as trick, checks that the output operation is performed by prime numbers
</p>

<ul>
<li>@length =&gt; the length of the desired output string
</li>
</ul>

</section>
</section>
<section id="toc395">
<h2>4.8. Color helper module</h2>

<pre>
api/php/lib/color.php
</pre>

<p>
This fie contains useful functions related to colors
</p>

<section id="toc396">
<h3>4.8.1. Color To Dec function</h3>

<pre>
function color2dec($color, $component)
</pre>

<p>
This function is a helper that allow to get from a RGB hex color the value
in decimal of the specified component, useful to get the amount of color
red, green or blue in decimal base from an string
</p>
<p>
Is able to understand colors with the formats #abcdef, abcdef, #000, #fff
</p>

<ul>
<li>@color     =&gt; The color that you want to parse
</li>
<li>@component =&gt; The component that you want to retrieve their value
</li>
</ul>

</section>
</section>
<section id="toc397">
<h2>4.9. Control helper module</h2>

<pre>
api/php/lib/control.php
</pre>

<p>
This fie contains useful functions related to the control and version system, they allow to
relationate registers with users and groups, and to add and retrieve the versions of a register
</p>

<section id="toc398">
<h3>4.9.1. Make Control function</h3>

<pre>
function make_control($app, $reg_id)
</pre>

<p>
This function allow to insert and delete the control registers associacted
to any application and to any register of the application
</p>

<ul>
<li>@app    =&gt; code of the application that you want to index
</li>
<li>@reg_id =&gt; register of the app that you want to index
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns an integer as response about the control action:
</p>

<ul>
<li>+1 =&gt; insert executed, this is because the app register exists and the control register not exists
</li>
<li>+2 =&gt; delete executed, this is because the app register not exists and the control register exists
</li>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; control table not found, this is because the has_control feature is disabled by dbstatic
</li>
<li>-3 =&gt; data not found, this is because the app register not exists and the control register not exists
</li>
<li>-4 =&gt; control exists, this is because the app register exists and the control register too exists
</li>
</ul>

<p>
As you can see, negative values denotes an error and positive values denotes a successfully situation
</p>

</section>
<section id="toc399">
<h3>4.9.2. Integrity</h3>

<pre>
function integrity()
</pre>

<p>
This function tries to execute some periodic task intended to fix issues with
the integrity of internal relationships, to do it tries to search not found
registers in the control table in the first loop and tries to search not found
registers in the app table in the second loop, with all found not found registers
the function executes the make_control that add or remove the needed control
register to maintain the integrity.
</p>

</section>
</section>
<section id="toc400">
<h2>4.10. Cron utils helper module</h2>

<pre>
api/php/lib/cron.php
</pre>

<p>
This fie contains useful functions related to cron operations
</p>

<section id="toc401">
<h3>4.10.1. Cron compare helper</h3>

<pre>
function __cron_compare($val, $now)
</pre>

<p>
This function provide the compare feature to the cron system, it is able to
evaluate the first argument to check the posible cases like true case, list
of options, using module, using range and direct case
</p>

<ul>
<li>@val =&gt; the value that you want to evaluate
</li>
<li>@now =&gt; the now value used in the evaluation
</li>
</ul>

</section>
<section id="toc402">
<h3>4.10.2. Cron is now helper</h3>

<pre>
function __cron_is_now($minute, $hour, $day, $month, $dow)
</pre>

<p>
This function uses the __crom_compare to validate if the five items of the
cron configuration triggers the execution of the cron task
</p>

</section>
<section id="toc403">
<h3>4.10.3. Cron users helper</h3>

<pre>
function __cron_users($arg)
</pre>

<p>
This function allow to get an array of users from the arg
</p>

<ul>
<li>@arg =&gt; the list of users, can be * from all users
</li>
</ul>

</section>
<section id="toc404">
<h3>4.10.4. Cron GC</h3>

<pre>
function cron_gc()
</pre>

<p>
This function tries to monitorize the cron processes and store in the database
all stdout and stderr with the timestamps of the start and stop processes, too
removes all unused files
</p>

</section>
<section id="toc405">
<h3>4.10.5. Cron Exec</h3>

<pre>
function cron_exec()
</pre>

<p>
This function tries to detect what cron tasks must to execute and with what
users must to execute each cron task, too detects if a previous instance of
the commands was launched previously and is still running in this moment
</p>

</section>
</section>
<section id="toc406">
<h2>4.11. Database schema helper module</h2>

<pre>
api/php/lib/dbschema.php
</pre>

<p>
This fie contains useful functions related to database schema, allow to manage the entire database
schema, and too, allow to maintain contents of some tables using the dbstatic feature
</p>

<section id="toc407">
<h3>4.11.1. DB Schema</h3>

<pre>
function db_schema()
</pre>

<p>
This function try to maintain the database structure, to do it, this feature uses the dbschema.xml
file to store the database structure.
</p>

</section>
<section id="toc408">
<h3>4.11.2. DB Schema hash</h3>

<pre>
function __dbschema_hash()
</pre>

<p>
This function returns the hash used by db_schema
</p>

</section>
<section id="toc409">
<h3>4.11.3. DB Schema check</h3>

<pre>
function __dbschema_check()
</pre>

<p>
This function returns the comparison between the old hash and the new hash
</p>

</section>
<section id="toc410">
<h3>4.11.4. DB Static</h3>

<pre>
function db_static()
</pre>

<p>
This function try to maintain the database contents, to do it, this feature
uses the dbstatic.xml file to store the database contents that must to be
maintaned.
</p>
<p>
This version of the db_static allow you to use a comma separated values in
fields as "id", start by "id_" or end by "_id"
</p>

</section>
<section id="toc411">
<h3>4.11.5. DB Static hash</h3>

<pre>
function __dbstatic_hash()
</pre>

<p>
This function returns the hash used by db_static
</p>

</section>
<section id="toc412">
<h3>4.11.6. DB Static check</h3>

<pre>
function __dbstatic_check()
</pre>

<p>
This function returns the comparison between the old hash and the new hash
</p>

</section>
<section id="toc413">
<h3>4.11.7. DB Static insert</h3>

<pre>
function __dbstatic_insert($table, $row)
</pre>

<p>
This function is a helper of previous function, is intended to be used by db_static and
allow to use a comma separated values in fields as "id", start by "id_" or end by "_id"
</p>

<ul>
<li>@table =&gt; the table that you want to use in the insert process
</li>
<li>@row   =&gt; the row that you want to add in the table
</li>
</ul>

<p>
Notes:
</p>
<p>
This feature allow to you to use comma separated lists of values, commonly used for id
fields as user_id, perms_id, or similar.
</p>

</section>
<section id="toc414">
<h3>4.11.8. Get Tables from DB Schema</h3>

<pre>
function get_tables_from_dbschema()
</pre>

<p>
This function returns the tables from the DB Schema file
</p>

</section>
<section id="toc415">
<h3>4.11.9. Get Fields from DB Schema</h3>

<pre>
function get_fields_from_dbschema($table)
</pre>

<p>
This function returns the fields from the DB Schema file
</p>

<ul>
<li>@table =&gt; the table that you want to request the fields
</li>
</ul>

</section>
<section id="toc416">
<h3>4.11.10. Get Indexes from DB Schema</h3>

<pre>
function get_indexes_from_dbschema($table)
</pre>

<p>
This function returns the indexes from the DB Schema file
</p>

<ul>
<li>@table =&gt; the table that you want to request the indexes
</li>
</ul>

</section>
<section id="toc417">
<h3>4.11.11. Get Ignores from DB Schema</h3>

<pre>
function get_ignores_from_dbschema()
</pre>

<p>
This function returns the ignores tables from the DB Schema file
</p>

</section>
<section id="toc418">
<h3>4.11.12. Get Fulltext from DB Schema</h3>

<pre>
function get_fulltext_from_dbschema()
</pre>

<p>
This function returns the fulltext tables from the DB Schema file
</p>

</section>
<section id="toc419">
<h3>4.11.13. Get Fkeys from DB Schema</h3>

<pre>
function get_fkeys_from_dbschema($table)
</pre>

<p>
This function returns the fkeys from the DB Schema file
</p>

<ul>
<li>@table =&gt; the table that you want to request the fkeys
</li>
</ul>

</section>
<section id="toc420">
<h3>4.11.14. DB Schema helper</h3>

<pre>
function __dbschema_helper($fn, $table)
</pre>

<p>
This function is a helper for the previous functions, is intended to be used
to returns the tables of the DB Schema or the fields of a table
</p>

<ul>
<li>@fn    =&gt; the caller function name
</li>
<li>@table =&gt; the table used by some features
</li>
</ul>

</section>
<section id="toc421">
<h3>4.11.15. DB Schema Auto Apps</h3>

<pre>
function __dbschema_auto_apps($dbschema)
</pre>

<p>
This function is a helper to the dbschema functions, to create an indexing table for each app
</p>

<ul>
<li>@dbschema =&gt; the dbschema array
</li>
</ul>

<p>
Notes:
</p>
<p>
This feature creates a table and try to use Mroonga storage engine with one field, the main
idea of this tables is to store all contents of the register to do quick searchs using a
fulltext search engine
</p>

</section>
<section id="toc422">
<h3>4.11.16. DB Schema Auto Fkey</h3>

<pre>
function __dbschema_auto_fkey($dbschema)
</pre>

<p>
This function is a helper to the dbschema functions, to create an index for each fkey
</p>

<ul>
<li>@dbschema =&gt; the dbschema array
</li>
</ul>

<p>
Notes:
</p>
<p>
By default, MariaDB creates an index for each foreign key, but SQLite not does is by default
and for this reason, SaltOS creates an index automatically, to improve the performance
</p>
<p>
This function checks that the field not exists in the defined indexes to prevent error in duplicates
indexes
</p>

</section>
<section id="toc423">
<h3>4.11.17. DB Schema Auto Name</h3>

<pre>
function __dbschema_auto_name($dbschema)
</pre>

<p>
This function is a helper to the dbschema functions, to auto name the indexes
</p>

<ul>
<li>@dbschema =&gt; the dbschema array
</li>
</ul>

<p>
Notes:
</p>
<p>
This function allow to specify indexes only specifying the fields that you want
to conform the index, but the engines as MariaDB and SQLite, requires that each
index have a unique name, and for this reason, we add this feature to automate
this part of the process
</p>
<p>
You can see how the name of the index is different for MySQL and SQLite, this is
because in MySQL, the name can be repeated in different tables, but in SQLite,
the name must be unique in the database
</p>

</section>
<section id="toc424">
<h3>4.11.18. Get Apps From DBStatic</h3>

<pre>
function get_apps_from_dbstatic()
</pre>

<p>
This function returns the list of apps that have a table and field defined
in the dbstatic file
</p>

</section>
<section id="toc425">
<h3>4.11.19. Get Tables From DBStatic</h3>

<pre>
function get_tables_from_dbstatic()
</pre>

<p>
This function returns the list of tables that have a table and field defined
in the dbstatic file
</p>

</section>
<section id="toc426">
<h3>4.11.20. Get Field From DBStatic</h3>

<pre>
function get_field_from_dbstatic($table, $field = 'field')
</pre>

<p>
This function return the field associated to the table in the dbstatic
file and associated to the apps table
</p>

<ul>
<li>@table =&gt; the table of the dbstatic that want to convert to field
</li>
<li>@field =&gt; the field name, field by default
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses the special feature in the helper that allow to
use as table parameter an app code to retrieve the field, this is
useful if you want some field of the app table and you want to use
the app code instead of the app table to identify what row do you
want to use
</p>

</section>
<section id="toc427">
<h3>4.11.21. DB Static helper</h3>

<pre>
function __dbstatic_helper($fn, $table, $field)
</pre>

<p>
This function is intended to act as helper of the dbstatic ecosystem, this
function can return the apps that contain table and field definitions and
too, can return the field associated to a apps table, useful for the
indexing feature
</p>

<ul>
<li>@fn    =&gt; the caller function name
</li>
<li>@table =&gt; the table used by some features
</li>
<li>@field =&gt; the field used by some features
</li>
</ul>

</section>
<section id="toc428">
<h3>4.11.22. Manifest to dbstatic</h3>

<pre>
function __manifest2dbstatic($files)
</pre>

<p>
This function returns the equivalent dbstatic data using as input the contents
of the manifests files.
</p>

<ul>
<li>@files =&gt; An array with all the manifests files
</li>
</ul>

</section>
<section id="toc429">
<h3>4.11.23. DB Schema Create Table</h3>

<pre>
function __dbschema_create_table($tablespec)
</pre>

<p>
This function returns the SQL needed to create the table defined in the
tablespec argument
</p>

<ul>
<li>@tablespec =&gt; the specification for the create table, see the dbschema
              file to understand the tablespec structure
</li>
</ul>

<p>
This function creates the table, supports the primary key, supports the
foreign key, and detect fulltext indexes with mroonga engines
</p>

</section>
<section id="toc430">
<h3>4.11.24. DB Schema Alter Table</h3>

<pre>
function __dbschema_alter_table($orig, $dest)
</pre>

<p>
This function returns the alter table command
</p>

<ul>
<li>@orig =&gt; source table
</li>
<li>@dest =&gt; destination table
</li>
</ul>

</section>
<section id="toc431">
<h3>4.11.25. DB Schema Insert From Select</h3>

<pre>
function __dbschema_insert_from_select($dest, $orig)
</pre>

<p>
This function returns the insert from select command
</p>

<ul>
<li>@orig =&gt; source table
</li>
<li>@dest =&gt; destination table
</li>
</ul>

</section>
<section id="toc432">
<h3>4.11.26. DB Schema Drop Table</h3>

<pre>
function __dbschema_drop_table($table)
</pre>

<p>
This function returns the drop table command
</p>

<ul>
<li>@table =&gt; table that you want to drop
</li>
</ul>

</section>
<section id="toc433">
<h3>4.11.27. DB Schema Create Index</h3>

<pre>
function __dbschema_create_index($indexspec)
</pre>

<p>
This function returns the SQL needed to create the index defined in the
indexspec argument
</p>

<ul>
<li>@indexspec =&gt; the specification for the create index, see the dbschema
              file to understand the indexspec structure
</li>
</ul>

<p>
This function creates the index, supports fulltext indexes
</p>

</section>
<section id="toc434">
<h3>4.11.28. DB Schema Drop Index</h3>

<pre>
function __dbschema_drop_index($index, $table)
</pre>

<p>
This function returns the drop index command
</p>

<ul>
<li>@index =&gt; index that you want to drop
</li>
<li>@table =&gt; table where the indes is part of
</li>
</ul>

</section>
</section>
<section id="toc435">
<h2>4.12. Dependencies feature</h2>

<pre>
api/php/lib/depend.php
</pre>

<p>
This file contains the code that has the ability to identify dependencies
</p>

<section id="toc436">
<h3>4.12.1. Check Dependencies</h3>

<pre>
function check_dependencies($app, $id)
</pre>

<p>
This function allow to get all dependencies of an app and id, intended to check
the if the sytem can delete some register or if the register has relations with
other apps or tables
</p>

</section>
</section>
<section id="toc437">
<h2>4.13. Export helper module</h2>

<pre>
api/php/lib/export.php
</pre>

<p>
This fie contains useful functions related to export data, allow to generate outputs in formats
suck as excel, csv, edi, json and xml
</p>

<section id="toc438">
<h3>4.13.1. Export File main function</h3>

<pre>
function export_file($args)
</pre>

<p>
This function is intended to export data in the supported formats
</p>

<ul>
<li>@type     =&gt; can be xml, csv, xls, xlsx, edi or json
</li>
<li>@data     =&gt; the matrix to export
</li>
<li>@sep      =&gt; separator char used only by csv format
</li>
<li>@eol      =&gt; enf of line char used by csv and xml format
</li>
<li>@encoding =&gt; charset used by csv and xml format
</li>
<li>@replace  =&gt; array with two elements, from and to, used to do replacements of the matrix values
</li>
<li>@escape   =&gt; array with two elements, char and mode, used to specify the escape character and the
             escape mode
</li>
<li>@title    =&gt; title used only by excel format
</li>
<li>@file     =&gt; local filename used to store the results
</li>
<li>@ext      =&gt; extension used for the filename if provided
</li>
<li>@wrap     =&gt; boolean argument used only for edi indentation
</li>
<li>@indent   =&gt; boolean argument used only for json indentation
</li>
<li>@prefn    =&gt; function executed between the load and the tree construction
</li>
<li>@notree   =&gt; boolean to enable or disable the tree2array feature
</li>
<li>@postfn   =&gt; function executed after the tree construction
</li>
<li>@novoid   =&gt; boolean to enable or disable the removevoid feature
</li>
</ul>

<p>
If file argument is specified, void string is returned
If file argument is not specified, then they will returns all data
</p>

</section>
<section id="toc439">
<h3>4.13.2. Export File XML</h3>

<pre>
function __export_file_xml($matrix, $eol = "\n", $encoding = 'UTF-8')
</pre>

<p>
This function is intended to export data in xml format
</p>

<ul>
<li>@matrix   =&gt; the matrix to export
</li>
<li>@eol      =&gt; enf of line char
</li>
<li>@encoding =&gt; charset used
</li>
</ul>

<p>
They will returns all data
</p>

</section>
<section id="toc440">
<h3>4.13.3. Export File CSV</h3>

<pre>
function __export_file_csv(
</pre>

<p>
This function is intended to export data in csv format
</p>

<ul>
<li>@matrix   =&gt; the matrix to export
</li>
<li>@sep      =&gt; separator char
</li>
<li>@eol      =&gt; enf of line char
</li>
<li>@encoding =&gt; charset used
</li>
<li>@replace  =&gt; array with two elements, from and to, used to do replacements of the matrix values
</li>
<li>@escape   =&gt; array with two elements, char and mode, used to specify the escape character and the
             escape mode
</li>
</ul>

<p>
They will returns all data
</p>

</section>
<section id="toc441">
<h3>4.13.4. Export File Excel</h3>

<pre>
function __export_file_excel($matrix, $title = '', $type = 'Xlsx')
</pre>

<p>
This function is intended to export data in excel format
</p>

<ul>
<li>@matrix =&gt; the matrix to export
</li>
<li>@title  =&gt; title used in the excel file
</li>
<li>@type   =&gt; can be Xls or Xlsx
</li>
</ul>

<p>
They will returns all data
</p>

</section>
<section id="toc442">
<h3>4.13.5. Export File JSON</h3>

<pre>
function __export_file_json($matrix, $indent = false)
</pre>

<p>
This function is intended to export data in json format
</p>

<ul>
<li>@matrix =&gt; the matrix to export
</li>
<li>@indent =&gt; boolean argument to enable or disable the indent feature
</li>
</ul>

<p>
They will returns all data
</p>

</section>
<section id="toc443">
<h3>4.13.6. Tree to Array</h3>

<pre>
function __export_tree2array($array)
</pre>

<p>
This function convert a tree into a 2D matrix, it's intended to convert
a tree structure into a csv, for example
</p>

<ul>
<li>@array =&gt; the tree that you want to convert into a 2D matrix
</li>
</ul>

</section>
<section id="toc444">
<h3>4.13.7. Get Keys</h3>

<pre>
function __export_getkeys($array)
</pre>

<p>
This function tries to return an array with all the keys used internally
in the tree
</p>

<ul>
<li>@array =&gt; the tree array that you want to process
</li>
</ul>

</section>
</section>
<section id="toc445">
<h2>4.14. Files module</h2>

<pre>
api/php/lib/files.php
</pre>

<p>
This file provide some usefull functions for the files module
</p>

<section id="toc446">
<h3>4.14.1. Check Files Old</h3>

<pre>
function check_files_old($app, $action, $id = null)
</pre>

<p>
This function returns true or false and is an utility to know if the ui
must to shown the needed widgets related with the old files
</p>

<ul>
<li>@app    =&gt; app that you want to use
</li>
<li>@action =&gt; action that you want to do (create, view, edit)
</li>
<li>@id     =&gt; register of the app that must contain files
</li>
</ul>

</section>
<section id="toc447">
<h3>4.14.2. Check Files New</h3>

<p>
This function returns true or false and is an utility to know if the ui
must to shown the needed widgets related with the new files
</p>

<ul>
<li>@app    =&gt; app that you want to use
</li>
<li>@action =&gt; action that you want to do (create, view, edit)
</li>
</ul>

</section>
<section id="toc448">
<h3>4.14.3. Get cid</h3>

<pre>
function files_cid($app, $id, $cid)
</pre>

<p>
This function returns the requested attachment indentified by the cid argument
</p>

<ul>
<li>@id  =&gt; id of the email
</li>
<li>@cid =&gt; the cid of the content requested
</li>
</ul>

</section>
<section id="toc449">
<h3>4.14.4. Get viewpdf</h3>

<pre>
function files_viewpdf($app, $id, $cid)
</pre>

<p>
This function returns the requested attachment indentified by the cid argument
in a pdf format for the viewpdf widget
</p>

<ul>
<li>@id  =&gt; id of the email
</li>
<li>@cid =&gt; the cid of the content requested
</li>
</ul>

</section>
<section id="toc450">
<h3>4.14.5. Get download</h3>

<pre>
function files_download($app, $id, $cid)
</pre>

<p>
This function returns the requested attachment indentified by the cid argument
in an array format for the download feature
</p>

<ul>
<li>@id  =&gt; id of the email
</li>
<li>@cid =&gt; the cid of the content requested
</li>
</ul>

</section>
</section>
<section id="toc451">
<h2>4.15. Garbage collector helper module</h2>

<pre>
api/php/lib/gc.php
</pre>

<p>
This fie contains useful functions related to the garbaging unused resources, currently only
implements the clear of temporary files
</p>

<section id="toc452">
<h3>4.15.1. Garbage Collector Executor</h3>

<pre>
function gc_exec()
</pre>

<p>
This function tries to clean the directories of old files, the parameters
that this function uses are defined in the config file, the timeout is
getted from the server/cachetimeout config file key, too is able to detect
hidden files and remove except the special files as current directory,
parent directory and htaccess file
</p>

</section>
</section>
<section id="toc453">
<h2>4.16. GD utils helper module</h2>

<pre>
api/php/lib/gdlib.php
</pre>

<p>
This fie contains useful functions related to the GD library
</p>

<section id="toc454">
<h3>4.16.1. Compute width</h3>

<pre>
function compute_width($text, $size)
</pre>

<p>
This function uses the GD library to compute the width of a text,
can contains newlines and the returned value is the width of the
bounring box required to print the text using the font and size
specified
</p>

<ul>
<li>@text =&gt; the text that you want to compute the width
</li>
<li>@size =&gt; the size used in the render process
</li>
</ul>

<p>
Notes:
</p>
<p>
As the default font in saltos is the Atkinson Hyperlegible, in this
function was set as default font and you can not replace at the
moment
</p>

</section>
<section id="toc455">
<h3>4.16.2. Image resize</h3>

<pre>
function image_resize($data, $size)
</pre>

<p>
This function is a helper for the html functions, and is intended to
get images less than 1000x1000 pixels, to do it, maintain the width and
height relation, the main idea is to get images scaled less that the size
parameter
</p>

<ul>
<li>@data =&gt; the data of the image
</li>
<li>@size =&gt; the size used in the control (size x size)
</li>
</ul>

</section>
</section>
<section id="toc456">
<h2>4.17. GeoIP helper module</h2>

<pre>
api/php/lib/geoip.php
</pre>

<p>
This file contain useful geoip helper functions
</p>

<section id="toc457">
<h3>4.17.1. Get GeoIP information</h3>

<pre>
function get_geoip_array($remote_addr)
</pre>

<p>
This function gets the geoip information an returns it
</p>

</section>
<section id="toc458">
<h3>4.17.2. Get GeoIP information</h3>

<pre>
function get_geoip_string($remote_addr)
</pre>

<p>
This function gets the geoip information an returns it
</p>

</section>
</section>
<section id="toc459">
<h2>4.18. Help feature</h2>

<pre>
api/php/lib/help.php
</pre>

<p>
This file contains the help functions used by SaltOS
</p>

<section id="toc460">
<h3>4.18.1. Detect Help File</h3>

<pre>
function detect_help_file($app, $lang)
</pre>

<p>
This function is intended to return the name of the pdf file used as help
for the app and lang, they use 4 checks to search the correct file that must
to returns, the first in to search in the app folder for the specified lang,
otherwise search for some othe lang, and if no app file is found, then the
same process is used for the notfound.pdf file.
</p>

<ul>
<li>@app  =&gt; the application to search
</li>
<li>@lang =&gt; the prefered lang to search
</li>
</ul>

</section>
</section>
<section id="toc461">
<h2>4.19. Import file helper module</h2>

<pre>
api/php/lib/import.php
</pre>

<p>
This fie contains useful functions related to import contents using differents formats suck as
excel, csv, edi, json, xml and bytes. Too this module allow to manipulate data using the tree
array of the core of the SaltOS, allowing to add, modify and remove nodes, too can apply patch
of the memory data and paint arrays as ascii tables
</p>

<section id="toc462">
<h3>4.19.1. Import File main function</h3>

<pre>
function import_file($args)
</pre>

<p>
This function is intended to import data in the supported formats
</p>

<ul>
<li>@data     =&gt; contents used as data instead of file
</li>
<li>@file     =&gt; local filename used to load the data
</li>
<li>@type     =&gt; can be xml, csv, xls, bytes, edi or json
</li>
<li>@sep      =&gt; separator char used only by csv format
</li>
<li>@sheet    =&gt; sheet that must to be read
</li>
<li>@map      =&gt; map used as dictionary for each field, pos and length
</li>
<li>@offset   =&gt; the offset added to the start position in each map field
</li>
<li>@nomb     =&gt; boolean to disable or enable the multibyte support
</li>
<li>@novoid   =&gt; boolean to enable or disable the removevoid feature
</li>
<li>@prefn    =&gt; function executed between the load and the tree construction
</li>
<li>@notree   =&gt; boolean to enable or disable the array2tree feature
</li>
<li>@nodes    =&gt; an array with the fields that define each nodes used in the tree construction
</li>
<li>@nohead   =&gt; if the first row doesn't contains the header of the data, put this field to one
</li>
<li>@noletter =&gt; if you want to use numeric index instead of excel index, put this field to one
</li>
<li>@postfn   =&gt; function executed after the tree construction
</li>
</ul>

<p>
This function returns an array with the loaded data from file
Can return a matrix or tree, depending the nodes parameter
</p>

</section>
<section id="toc463">
<h3>4.19.2. UTF8 BOM helper</h3>

<pre>
function __import_utf8bom($data)
</pre>

<p>
This function remove the bom header of the string
</p>

<ul>
<li>@data =&gt; the data that must to be checked
</li>
</ul>

<p>
Returns the data without the bom characters
</p>

</section>
<section id="toc464">
<h3>4.19.3. XML to Array</h3>

<pre>
function __import_xml2array($file)
</pre>

<p>
This function convert an xml into an array
</p>

<ul>
<li>@file =&gt; the file that contains the xml
</li>
</ul>

<p>
Returns an array with the contents of the xml
</p>

</section>
<section id="toc465">
<h3>4.19.4. Special Chars helper</h3>

<pre>
function __import_specialchars($arg)
</pre>

<p>
This function is a helper used by the csv2array function
</p>

<ul>
<li>@arg =&gt; a string or array
</li>
</ul>

<p>
Returns the input with the expected replacements
</p>

</section>
<section id="toc466">
<h3>4.19.5. CSV to Array helper</h3>

<pre>
function __import_csv2array($file, $sep)
</pre>

<p>
This function is a helper of the __import_xml2array
</p>

<ul>
<li>@file =&gt; the filename and the sheet that do you want to retrieve
</li>
<li>@sep  =&gt; the separator field used in the csv file
</li>
</ul>

<p>
Returns a matrix with the contents
</p>

</section>
<section id="toc467">
<h3>4.19.6. XLS to Array helper</h3>

<pre>
function __import_xls2array($file, $sheet)
</pre>

<p>
This fuction can convert an excel file into a matrix structure, it has some additional features as:
</p>

<ul>
<li>If the file exceds the 1Mbyte and the server has the xlsx2csv executable, it tries to convert the xslx
  to an excel to use less memory
</li>
<li>Do some internals trics to solve some knowed issues
</li>
</ul>

<ul>
<li>@file  =&gt; the filename and the sheet that do you want to retrieve
</li>
<li>@sheet =&gt; the second parameter can be a number or a sheet name
</li>
</ul>

<p>
Returns a matrix with the contents
</p>

</section>
<section id="toc468">
<h3>4.19.7. Bytes to Array helper</h3>

<pre>
function __import_bytes2array($file, $map, $offset, $nomb)
</pre>

<p>
This function can read files as blocks of bytes, they can use a map, can specify
an offset and can be used using multibyte if it is needed
</p>

<ul>
<li>@file   =&gt; local filename used to load the data
</li>
<li>@map    =&gt; map used as dictionary for each field, pos and length
</li>
<li>@offset =&gt; the offset added to the start position in each map field
</li>
<li>@nomb   =&gt; boolean to disable or enable the multibyte support
</li>
</ul>

<p>
Returns a matrix with the contents
</p>
<p>
Notes:
</p>
<p>
The map must be an array of strings of the follow form:
["field1;0;10", "field2;10;20", "field3;20;40"]
</p>

</section>
<section id="toc469">
<h3>4.19.8. Edi to Array helper</h3>

<pre>
function __import_edi2array($file)
</pre>

<p>
This fuction can convert an edi file into a tree structure
</p>

<ul>
<li>@file =&gt; local filename used to load the data
</li>
</ul>

</section>
<section id="toc470">
<h3>4.19.9. JSON to Array helper</h3>

<pre>
function __import_json2array($file)
</pre>

<p>
This fuction can convert an excel file into a tree structure
</p>

<ul>
<li>@file =&gt; local filename used to load the data
</li>
</ul>

</section>
<section id="toc471">
<h3>4.19.10. Check Real Matrix helper</h3>

<pre>
function __import_check_real_matrix($array)
</pre>

<p>
This function checks that the argument is a matrix, to do this, checks
that the argument is an array, that all keys are numeric and that all
entries of the main array is another array, and for each another array,
checks that the keys are numeric and that all values are non arrays
</p>

<ul>
<li>@array =&gt; the array to check
</li>
</ul>

</section>
<section id="toc472">
<h3>4.19.11. Remove Void helper</h3>

<pre>
function __import_removevoid($array)
</pre>

<p>
This function is able to remove an entire row or column if it is void
</p>

<ul>
<li>@array =&gt; the array to fix
</li>
</ul>

</section>
<section id="toc473">
<h3>4.19.12. Array to Tree helper</h3>

<pre>
function __import_array2tree($array, $nodes, $nohead, $noletter)
</pre>

<p>
This function tries to convert the array into a tree using the nodes,
specification
</p>

<ul>
<li>@array    =&gt; the matrix that you want to convert into a tree
</li>
<li>@nodes    =&gt; the dictionary used to the conversion, must to be an array with
             the fields used by each node, for example ["A,B,C","D,E,F"]
</li>
<li>@nohead   =&gt; set it to true to prevent the usage of the first row of the
             matrix as header, this option uses the letter as id of each
             element of the tree
</li>
<li>@noletter =&gt; set it to true to prevent the usage of letters, if the
             previous option is set to true
</li>
</ul>

</section>
<section id="toc474">
<h3>4.19.13. Array Intersect</h3>

<pre>
function __import_array_intersect($data, $filter)
</pre>

<p>
This function returns the same result that array_intersect_key($data,array_flip($filter))
maintaining the order of the filter array.
</p>

<ul>
<li>@data   =&gt; the array that you want to apply the filter
</li>
<li>@filter =&gt; the array where obtain the keys to apply the filter
</li>
</ul>

</section>
<section id="toc475">
<h3>4.19.14. Array to Tree Set helper</h3>

<pre>
function __import_array2tree_set(&amp;$result, $parts)
</pre>

<p>
This function tries to set values in a tree structure, to do it, it uses
the parts array that contains a list of paired keys and values used to move
by the tree setting the values of each pair of key val
</p>

<ul>
<li>@result =&gt; the array where do you want to put the parts
</li>
<li>@parts  =&gt; an array with pairs of key val
</li>
</ul>

</section>
<section id="toc476">
<h3>4.19.15. Array to Tree Clean helper</h3>

<pre>
function __import_array2tree_clean($array)
</pre>

<p>
This function tries to clean the tree by setting an automatic indexes
</p>

<ul>
<li>@array =&gt; the array to clean
</li>
</ul>

</section>
<section id="toc477">
<h3>4.19.16. Column to Name helper</h3>

<pre>
function __import_col2name($n)
</pre>

<p>
This function returns the name of the column from the position n
</p>

<ul>
<li>@n =&gt; the position number
</li>
</ul>

<p>
Notes:
</p>
<p>
This function was copied from:
</p>

<ul>
<li><a href="http://www.php.net/manual/en/function.base-convert.php#94874">http://www.php.net/manual/en/function.base-convert.php#94874</a>
</li>
</ul>

</section>
<section id="toc478">
<h3>4.19.17. Name to Column helper</h3>

<pre>
function __import_name2col($a)
</pre>

<p>
This function returns the position number of the column from the name
</p>

<ul>
<li>@a =&gt; the column name
</li>
</ul>

<p>
Notes:
</p>
<p>
This function was copied from:
</p>

<ul>
<li><a href="http://www.php.net/manual/en/function.base-convert.php#94874">http://www.php.net/manual/en/function.base-convert.php#94874</a>
</li>
</ul>

</section>
<section id="toc479">
<h3>4.19.18. Is Name helper</h3>

<pre>
function __import_isname($name)
</pre>

<p>
This function returns true if the name argument contains only valid letters
used in the name of the column
</p>

<ul>
<li>@name =&gt; the name that you want to check
</li>
</ul>

</section>
<section id="toc480">
<h3>4.19.19. Cell to Column and Row helper</h3>

<pre>
function __import_cell2colrow($cell)
</pre>

<p>
This function extract the column part and the row part from a cell name
</p>

<ul>
<li>@cell =&gt; the cell that you want to process
</li>
</ul>

<p>
Notes:
</p>
<p>
This function tries to retusn an array with two elements, for example, for
the cell AX23, the function returns [AX,23]
</p>

</section>
</section>
<section id="toc481">
<h2>4.20. Make index helper module</h2>

<pre>
api/php/lib/indexing.php
</pre>

<p>
This fie contains useful functions related to the indexing feature that internally uses the
mroonga engine to search in the fulltext string generated by this feature
</p>

<section id="toc482">
<h3>4.20.1. Make Index main function</h3>

<pre>
function make_index($app, $reg_id)
</pre>

<p>
This function implements the make index feature of SaltOS, this consists
in a concatenation of fields and subqueries to retrieve all data related to
the tables involved in the desired application and the register reg_id
</p>

<ul>
<li>@app    =&gt; code of the application that you want to index
</li>
<li>@reg_id =&gt; register of the app that you want to index
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns an integer as response about the index action:
</p>

<ul>
<li>+1 =&gt; insert executed, this is because the app register exists and the index register not exists
</li>
<li>+2 =&gt; update executed, this is because the app register exists and the index register too exists
</li>
<li>+3 =&gt; delete executed, this is because the app register not exists and the index register exists
</li>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; index table not found, this is because the has_index feature is disabled by dbstatic
</li>
<li>-3 =&gt; data not found, this is because the app register not exists and the indexting register not exists
</li>
</ul>

<p>
As you can see, negative values denotes an error and positive values denotes a successfully situation
</p>

</section>
<section id="toc483">
<h3>4.20.2. Make Index helper</h3>

<pre>
function __make_index_helper($table, $id = '')
</pre>

<p>
This function allow the make_index to retrieve all data of the fiels
and all data of the related fields of the related tables, this is done
by using the fkey information of the dbschema, this function uses some
features of the dbschema functions to get the fields, types, fkeys and
too, the dbstatic information of the app table
</p>
<p>
This function uses a cache technique to improve the performance, returns
an array with all fields and subqueries to allow to retrieve all data
related to the app register
</p>

</section>
<section id="toc484">
<h3>4.20.3. Get Field helper</h3>

<pre>
function __get_field_helper($table)
</pre>

<p>
This function return the field associated to the table in the dbstatic
file and associated to the apps table
</p>

<ul>
<li>@table =&gt; the table of the dbstatic that want to convert to field
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses the dbschema.php library
</p>

</section>
<section id="toc485">
<h3>4.20.4. Get Fkeys helper</h3>

<pre>
function __get_fkeys_helper($table)
</pre>

<p>
This function returns the fkeys from the DB Schema file
</p>

<ul>
<li>@table =&gt; the table that you want to request the fkeys
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses the dbschema.php library
</p>

</section>
<section id="toc486">
<h3>4.20.5. Indexing Files</h3>

<pre>
function indexing_files()
</pre>

<p>
This function tries to index al unindexed files, and to do it tries to search
the pending files and tries to index using the unoconv2txt, this function needs
a file and returns all contents in a text format, to protect this function of
posible fails, the system first increment the retry field and then tries to
index and update the file register, if some thing is wrong in the index time
the script must unexpectedly finish and in the next executions can continue
in the same file, but only for three times, the requirement to index a file
is that indexed = 0 and retries &lt; 3
</p>

</section>
<section id="toc487">
<h3>4.20.6. Indexing Apps</h3>

<pre>
function indexing_apps()
</pre>

<p>
This function tries to execute some periodic task intended to fix issues with
the indexing relationships, to do it tries to search not found registers in
the indexing table in the first loop and tries to search not found registers
in the app table in the second loop, with all found not found registers the
function executes the make_index that add or remove the needed index register
to maintain the integrity with the indexing feature.
</p>

</section>
</section>
<section id="toc488">
<h2>4.21. Log helper module</h2>

<pre>
api/php/lib/log.php
</pre>

<p>
This fie contains useful functions related to the log feature
</p>

<section id="toc489">
<h3>4.21.1. Make Log function</h3>

<pre>
function make_log($app, $log, $reg_ids, $extra_ids = '')
</pre>

<p>
This function adds a log register to the associated log table for each
application.
</p>

<ul>
<li>@app      =&gt; code of the application where you want to add the log
</li>
<li>@log      =&gt; the log message that you want to add to the log register
</li>
<li>@reg_id   =&gt; register ids of the app where you want to add the log
</li>
<li>@extra_id =&gt; extra ids of the app where you want to add the log
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns an integer as response about the control action:
</p>

<ul>
<li>+1 =&gt; insert executed, this is because the app register exists and the control register not exists
</li>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; log table not found, this is because the has_log feature is disabled by dbstatic
</li>
</ul>

</section>
<section id="toc490">
<h3>4.21.2. Make Log Bypass function</h3>

<pre>
function make_log_bypass($app, $log, $data)
</pre>

<p>
This function is intended to be used as wrapper between the caller and the
execute_query or execute_query_array function, the main idea is to do the
same that make_log but uses the reg_id from the array data, and this array
can be an array with the contents of one register with an id field, or an
array of rows where each item must contain an id field
</p>

<ul>
<li>@app  =&gt; code of the application where you want to add the log
</li>
<li>@data =&gt; data with the register or registers of the app where you want to
         add the log, remember that an id field is needed
</li>
<li>@log  =&gt; the log message that you want to add to the log register
</li>
</ul>

<p>
Notes:
</p>
<p>
This function always returns the input data
</p>

</section>
<section id="toc491">
<h3>4.21.3. Get Logs</h3>

<pre>
function get_logs($app, $reg_id)
</pre>

<p>
This function allow to get all logs associated to an app and reg_id, to do it,
the app must to have enabled the has_log feature, the results will be tunned
in the query to disallow the zeroes in some fields that are replaced by void
strings, too implement the search in the reg_id or inside the reg_ids using
the FIND_IN_SET feature available as native feature in MariaDB and added by
SaltOS to the sqlite drivers thansk to the createFunction feature that allow
to define sql commands from php functions
</p>

<ul>
<li>@app    =&gt; code of the application that you want to get the logs
</li>
<li>@reg_id =&gt; register of the app that you want to get the logs
</li>
</ul>

</section>
<section id="toc492">
<h3>4.21.4. Delete Log function</h3>

<pre>
function del_log($app, $reg_id)
</pre>

<p>
This function allow to delete the last log to a reg_id of an app, to do it,
the function requires to specify the app and reg_id
</p>

<ul>
<li>@app    =&gt; code of the application that you want to delete the last log
</li>
<li>@reg_id =&gt; register of the app that you want to delete the last log
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns an integer as response about the control action:
</p>

<ul>
<li>+1 =&gt; delete executed, this is because the app register exists and they can delete the last register
</li>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; log table not found, this is because the has_version feature is disabled by dbstatic
</li>
<li>-3 =&gt; data not found, this is because the app register not exists and the version register not exists
</li>
</ul>

<p>
As you can see, negative values denotes an error and positive values denotes a successfully situation
</p>

</section>
</section>
<section id="toc493">
<h2>4.22. Math utils helper module</h2>

<pre>
api/php/lib/math.php
</pre>

<p>
This fie contains useful functions related to math operations
</p>

<section id="toc494">
<h3>4.22.1. Sign function</h3>

<pre>
function sign($n)
</pre>

<p>
This function returns 1 for positive, -1 for negative and 0 for zero.
</p>

<ul>
<li>@n =&gt; the number that you want to be processed
</li>
</ul>

</section>
<section id="toc495">
<h3>4.22.2. Is Prime Number</h3>

<pre>
function is_prime($num)
</pre>

<p>
This function is a detector of prime numbers, uses some optimizations and
ideas from <a href="http://www.polprimos.com">www.polprimos.com</a>, please, see the previous web to understand
the speedup of this function in the prime numbers validation
</p>

<ul>
<li>@num =&gt; the number that you want to check if it is a primer numner
</li>
</ul>

<p>
Notes:
</p>
<p>
See <a href="http://www.polprimos.com">www.polprimos.com</a> for understand this algorithm
</p>

</section>
</section>
<section id="toc496">
<h2>4.23. Notes module</h2>

<pre>
api/php/lib/notes.php
</pre>

<p>
This file provide some usefull functions for the notes module
</p>

<section id="toc497">
<h3>4.23.1. Check Notes Old</h3>

<pre>
function check_notes_old($app, $action, $id = null)
</pre>

<p>
This function returns true or false and is an utility to know if the ui
must to shown the needed widgets related with the old notes
</p>

<ul>
<li>@app    =&gt; app that you want to use
</li>
<li>@action =&gt; action that you want to do (create, view, edit)
</li>
<li>@id     =&gt; register of the app that must contain notes
</li>
</ul>

</section>
<section id="toc498">
<h3>4.23.2. Check Notes New</h3>

<pre>
function check_notes_new($app, $action)
</pre>

<p>
This function returns true or false and is an utility to know if the ui
must to shown the needed widgets related with the new notes
</p>

<ul>
<li>@app    =&gt; app that you want to use
</li>
<li>@action =&gt; action that you want to do (create, view, edit)
</li>
</ul>

</section>
</section>
<section id="toc499">
<h2>4.24. Password helper module</h2>

<pre>
api/php/lib/password.php
</pre>

<p>
This fie contains useful functions related to password, currently only publish one feature to check
the password strength, but is open to be used to add more password features if it is needed
</p>

<section id="toc500">
<h3>4.24.1. Password Strength</h3>

<pre>
function password_strength($pass)
</pre>

<p>
This fucntion returns a number between 0 and 100 that try to categorize
the quality of the pass checked, this is useful to known if the new
password is a good option or maybe is needed to request another new
password
</p>

<ul>
<li>@pass =&gt; password that do you want to check
</li>
</ul>

</section>
</section>
<section id="toc501">
<h2>4.25. PDF helper module</h2>

<pre>
api/php/lib/pdf.php
</pre>

<p>
This file contains useful functions related to PDF generation using TCPDF library
including custom PDF class extensions and various PDF manipulation utilities
</p>

<section id="toc502">
<h3>4.25.1. Custom PDF class extending TCPDF</h3>

<pre>
class MyPDF extends TCPDF
</pre>

<p>
Provides enhanced functionality for header/footer management and page checks
</p>

</section>
<section id="toc503">
<h3>4.25.2. Initialize PDF document settings</h3>

<pre>
public function Init()
</pre>

<p>
Resets all internal variables to their default state
</p>

</section>
<section id="toc504">
<h3>4.25.3. Set header content and data</h3>

<pre>
public function set_header($arr, $row)
</pre>

<ul>
<li>@arr =&gt; Header template array
</li>
<li>@row =&gt; Data row for header evaluation
</li>
</ul>

</section>
<section id="toc505">
<h3>4.25.4. Set footer content and data</h3>

<pre>
public function set_footer($arr, $row)
</pre>

<ul>
<li>@arr =&gt; Footer template array
</li>
<li>@row =&gt; Data row for footer evaluation
</li>
</ul>

</section>
<section id="toc506">
<h3>4.25.5. Override TCPDF header method</h3>

<pre>
public function Header()
</pre>

<p>
Processes and renders the header content while temporarily disabling Y checks
</p>

</section>
<section id="toc507">
<h3>4.25.6. Override TCPDF footer method</h3>

<pre>
public function Footer()
</pre>

<p>
Tracks page numbers where footers need to be rendered
</p>

</section>
<section id="toc508">
<h3>4.25.7. Render all accumulated footers</h3>

<pre>
public function render_footers()
</pre>

<p>
Processes footer content on all tracked pages while temporarily disabling Y checks
</p>

</section>
<section id="toc509">
<h3>4.25.8. Check Y position and add new page if needed</h3>

<pre>
public function check_y($offset = 0)
</pre>

<ul>
<li>@offset =&gt; Additional offset to consider in Y position check
</li>
</ul>

</section>
<section id="toc510">
<h3>4.25.9. Evaluate dynamic value in PDF context</h3>

<pre>
function __pdf_eval_value($input, $row, $pdf)
</pre>

<ul>
<li>@input =&gt; Expression to evaluate
</li>
<li>@row   =&gt; Data row for variable substitution
</li>
<li>@pdf   =&gt; PDF object reference
</li>
</ul>

<p>
Returns the evaluated result
</p>

</section>
<section id="toc511">
<h3>4.25.10. Evaluate array values in PDF context</h3>

<pre>
function __pdf_eval_array($array, $row, $pdf)
</pre>

<ul>
<li>@array =&gt; Input array with expressions
</li>
<li>@row   =&gt; Data row for variable substitution
</li>
<li>@pdf   =&gt; PDF object reference
</li>
</ul>

<p>
Returns array with evaluated values
</p>

</section>
<section id="toc512">
<h3>4.25.11. Advanced string explosion with quote and parentheses awareness</h3>

<pre>
function __pdf_eval_explode($separator, $str, $limit = 0)
</pre>

<ul>
<li>@separator =&gt; Delimiter character
</li>
<li>@str       =&gt; Input string to explode
</li>
<li>@limit     =&gt; Maximum number of splits
</li>
</ul>

<p>
Returns array of exploded parts
</p>

</section>
<section id="toc513">
<h3>4.25.12. Process PDF template tags and generate PDF content</h3>

<pre>
function __pdf_eval_pdftag($array, $row = [])
</pre>

<ul>
<li>@array =&gt; PDF template definition array
</li>
<li>@row   =&gt; Data row for template evaluation
</li>
</ul>

<p>
Returns the generated PDF object or output array
</p>

</section>
<section id="toc514">
<h3>4.25.13. Generate PDF from template file</h3>

<pre>
function pdf($file, $row = [])
</pre>

<ul>
<li>@file =&gt; Path to PDF template file
</li>
<li>@row  =&gt; Data row for template evaluation
</li>
</ul>

<p>
Returns array containing PDF name, type and base64 encoded data
</p>

</section>
<section id="toc515">
<h3>4.25.14. Convert various file types to PDF</h3>

<pre>
function __pdf_all2pdf($input)
</pre>

<ul>
<li>@input =&gt; Path to input file to convert
</li>
</ul>

<p>
Returns PDF content as string
</p>

</section>
</section>
<section id="toc516">
<h2>4.26. Push utils helper module</h2>

<pre>
api/php/lib/push.php
</pre>

<p>
This fie contains useful functions related to push feature
</p>

<section id="toc517">
<h3>4.26.1. Push insert</h3>

<pre>
function push_insert($type, $message)
</pre>

<p>
This function adds an entry to the push system using the type and message
</p>

<ul>
<li>@type    =&gt; the type (one of this: success, danger or event)
</li>
<li>@message =&gt; the desired message that you want to put in the queue
</li>
</ul>

</section>
<section id="toc518">
<h3>4.26.2. Push select</h3>

<pre>
function push_select($timestamp)
</pre>

<p>
This function returns the push data found after the timestamp used
</p>

<ul>
<li>@timestamp =&gt; the timestamp used to begin the search
</li>
</ul>

<p>
Notes:
</p>

<ul>
<li>This function returns the entries found without repetitions, to be
  usefull, only uses the last entries removing the repeated entries and
  using only the type and message to detect repetitions
</li>
</ul>

</section>
</section>
<section id="toc519">
<h2>4.27. QRCode helper module</h2>

<pre>
api/php/lib/qrcode.php
</pre>

<p>
This fie contains useful functions related to QRCodes
</p>

<section id="toc520">
<h3>4.27.1. QRCode image function</h3>

<pre>
function __qrcode_image($msg, $s, $m, $l)
</pre>

<p>
This function allow to generate a qrcode with the SaltOS logo embedded
in the center of the image, you can pass the desired message that you
want to convert in qrcode and it returns an image with the data
</p>

<ul>
<li>@msg =&gt; Contents of the qrcode
</li>
<li>@s   =&gt; size of each pixel used in the qrcode
</li>
<li>@m   =&gt; margin of the qrcode (white area that that surround the qrcode)
</li>
<li>@l   =&gt; level error correction: L (low), M (medium), Q (better), H (best)
</li>
</ul>

<p>
Notes:
</p>
<p>
The normal behavior is returns a png image, but if something was wrong,
the function can returns an empty string
</p>

</section>
<section id="toc521">
<h3>4.27.2. QRCode image function</h3>

<pre>
function __qrcode_image_png($msg, $s, $l)
</pre>

<p>
This function allow to generate a qrcode with the SaltOS logo embedded
in the center of the image, you can pass the desired message that you
want to convert in qrcode and it returns an image with the data
</p>

<ul>
<li>@msg =&gt; Contents of the qrcode
</li>
<li>@s   =&gt; size of each pixel used in the qrcode
</li>
<li>@l   =&gt; level error correction: L (low), M (medium), Q (better), H (best)
</li>
</ul>

<p>
Notes:
</p>
<p>
The normal behavior is returns a png image without margins, but if something
was wrong, the function can returns an empty string
</p>

</section>
<section id="toc522">
<h3>4.27.3. QRCode image function</h3>

<pre>
function __qrcode_image_svg($msg, $s, $l)
</pre>

<p>
This function allow to generate a qrcode with the SaltOS logo embedded
in the center of the image, you can pass the desired message that you
want to convert in qrcode and it returns an image with the data
</p>

<ul>
<li>@msg =&gt; Contents of the qrcode
</li>
<li>@s   =&gt; size of each pixel used in the qrcode
</li>
<li>@l   =&gt; level error correction: L (low), M (medium), Q (better), H (best)
</li>
</ul>

<p>
Notes:
</p>
<p>
The normal behavior is returns a svg image without margins, but if something
was wrong, the function can returns an empty string
</p>

</section>
</section>
<section id="toc523">
<h2>4.28. Score image helper module</h2>

<pre>
api/php/lib/score.php
</pre>

<p>
This fie contains useful functions related to score images
</p>

<section id="toc524">
<h3>4.28.1. Score Image function</h3>

<pre>
function __score_image($score, $width, $height, $size)
</pre>

<p>
This function generates an image with a gradient from red to yellos and
then, to green, depending of the score passed to the function, the params
allos to define the size of the image or the size of the font used to
write the score percent
</p>

<ul>
<li>@score  =&gt; a number between 0 and 100
</li>
<li>@width  =&gt; the width of the generated image
</li>
<li>@height =&gt; the height of the generated image
</li>
<li>@size   =&gt; the size of the font of the generated image
</li>
</ul>

</section>
</section>
<section id="toc525">
<h2>4.29. Security helper module</h2>

<pre>
api/php/lib/security.php
</pre>

<p>
This file contain useful securiry helper functions
</p>

<section id="toc526">
<h3>4.29.1. Get Browser Platform Device Type</h3>

<pre>
function get_connection_detected($remote_addr, $user_agent = null)
</pre>

<p>
This function gets the browser, platform and device_type form the user_agent header
</p>

</section>
</section>
<section id="toc527">
<h2>4.30. Setup helper module</h2>

<pre>
api/php/lib/setup.php
</pre>

<p>
This file contains useful functions related to the setup process
</p>

<section id="toc528">
<h3>4.30.1. Setup function</h3>

<pre>
function setup()
</pre>

<p>
This function allow to create the minimal user and group information to do SaltOS
usable by the admin user, only do things if the keys tables of the array are void,
too is able to maintain the integrity of the tbl_{users,groups}_apps_perms tables
by removing the unused registers, usefull when you modify the tbl_apps_perms rows
</p>

</section>
</section>
<section id="toc529">
<h2>4.31. Send file to trash</h2>

<pre>
api/php/lib/trash.php
</pre>

<p>
This function tries to implement the send to trash feature, to do it, move the
requested files to the trash folder, execute the insert in the tbl_trash with
the new file and delete the file from the files app table.
</p>

<section id="toc530">
<h3>4.31.1. Garbage Collector Trash</h3>

<pre>
function gc_trash()
</pre>

<p>
This function tries to clean the trash database of old files, the parameters
that this function uses is defined in the config file, only uses the timeout
that is getted from the server/trashtimeout
</p>

</section>
</section>
<section id="toc531">
<h2>4.32. Unoconv library</h2>

<pre>
api/php/lib/unoconv.php
</pre>

<p>
This file contains all functions that allow conversions between formats like
docx, xlsx and more to pdf, too includes the ocr code that allow to get text
from images.
</p>

<section id="toc532">
<h3>4.32.1. Unoconv to PDF</h3>

<pre>
function unoconv2pdf($input)
</pre>

<p>
This function allow to convert all input files into their equivalent pdf file
</p>

<ul>
<li>@input =&gt; the file that you want to process
</li>
</ul>

</section>
<section id="toc533">
<h3>4.32.2. Unoconv to TXT</h3>

<pre>
function unoconv2txt($input)
</pre>

<p>
This function allow to convert all input files into their equivalent txt file
</p>

<ul>
<li>@input =&gt; the file that you want to process
</li>
</ul>

</section>
<section id="toc534">
<h3>4.32.3. Unoconv list</h3>

<pre>
function __unoconv_list()
</pre>

<p>
This function returns an array with all suported extensions by libreoffice
</p>

</section>
<section id="toc535">
<h3>4.32.4. PDF to TXT</h3>

<pre>
function __unoconv_pdf2txt($input, $output)
</pre>

<p>
This function convert files between pdf to txt using the pdftotext
</p>

<ul>
<li>@input  =&gt; the file that you want to process
</li>
<li>@output =&gt; the file where you want to store the result
</li>
</ul>

</section>
<section id="toc536">
<h3>4.32.5. All to PDF</h3>

<pre>
function __unoconv_all2pdf($input, $output)
</pre>

<p>
This function convert all formats to pdf using libreoffice
</p>

<ul>
<li>@input  =&gt; the file that you want to process
</li>
<li>@output =&gt; the file where you want to store the result
</li>
</ul>

</section>
<section id="toc537">
<h3>4.32.6. Convert</h3>

<pre>
function __unoconv_convert($input, $output, $format)
</pre>

<p>
This function convert between formats using libreoffice
</p>

<ul>
<li>@input  =&gt; the file that you want to process
</li>
<li>@output =&gt; the file where you want to store the result
</li>
<li>@format =&gt; the desired destination format
</li>
</ul>

</section>
<section id="toc538">
<h3>4.32.7. Image to OCR</h3>

<pre>
function __unoconv_img2ocr($file)
</pre>

<p>
This file uses tesseract to extract all text from the file, if the file
is not a tiff image, then is converted to a tiff to be used as input in
the tesseract process.
</p>

<ul>
<li>@file =&gt; the file that you want to process
</li>
</ul>

</section>
<section id="toc539">
<h3>4.32.8. PDF to OCR</h3>

<pre>
function __unoconv_pdf2ocr($pdf)
</pre>

<p>
This function uses the pdftoppm command to generate one image per page,
and then, extract the text of each page to finish the task.
</p>

<ul>
<li>@pdf =&gt; the file that you want to process
</li>
</ul>

</section>
<section id="toc540">
<h3>4.32.9. Calculate histogram value</h3>

<pre>
function __unoconv_histogram($values, $usage1, $usage2)
</pre>

<p>
This function calculates a representative value from a histogram based on given usage thresholds.
It finds the highest percentage where at least a certain portion of values and unique values are included.
</p>

<ul>
<li>@values =&gt; array of values to analyze
</li>
<li>@usage1 =&gt; minimum percentage of total values to include (0-1)
</li>
<li>@usage2 =&gt; minimum percentage of unique values to include (0-1)
</li>
</ul>

<p>
Returns the calculated representative value
</p>

</section>
<section id="toc541">
<h3>4.32.10. Rotate coordinates</h3>

<pre>
function __unoconv_rotate($posx, $posy, $angle)
</pre>

<p>
This function rotates a point around the origin by a given angle in degrees.
</p>

<ul>
<li>@posx  =&gt; x coordinate of the point
</li>
<li>@posy  =&gt; y coordinate of the point
</li>
<li>@angle =&gt; rotation angle in degrees
</li>
</ul>

<p>
Returns the array with new x and y coordinates
</p>

</section>
<section id="toc542">
<h3>4.32.11. Extract attributes from OCR node</h3>

<pre>
function __unoconv_node2attr($node)
</pre>

<p>
This function processes a node from OCR output to extract its attributes,
specifically focusing on the bounding box information.
</p>

<ul>
<li>@node =&gt; the OCR node to process
</li>
</ul>

<p>
Returns the array containing node ID and bounding box coordinates
</p>

</section>
<section id="toc543">
<h3>4.32.12. Extract text value from OCR node</h3>

<pre>
function __unoconv_node2value($node)
</pre>

<p>
This function extracts the text content from an OCR node, handling nested arrays.
</p>

<ul>
<li>@node =&gt; the OCR node to process
</li>
</ul>

<p>
Returns the extracted text content
</p>

</section>
<section id="toc544">
<h3>4.32.13. Convert OCR lines to character matrix</h3>

<pre>
function __unoconv_lines2matrix($lines, $width, $height)
</pre>

<p>
This function converts OCR-detected lines and words into a 2D character matrix
for text reconstruction and analysis.
</p>

<ul>
<li>@lines  =&gt; array of OCR-detected lines and words
</li>
<li>@width  =&gt; width divisor for coordinate normalization
</li>
<li>@height =&gt; height divisor for coordinate normalization
</li>
</ul>

<p>
Returns the 2D character matrix or index of problematic line if error occurs
</p>

</section>
<section id="toc545">
<h3>4.32.14. Reorder line coordinates</h3>

<pre>
function __unoconv_fixline($line, $pos1, $pos2, $pos3, $pos4)
</pre>

<p>
This function reorders the coordinates of a line based on specified positions,
used for correcting orientation in OCR results.
</p>

<ul>
<li>@line =&gt; original line coordinates
</li>
<li>@pos1 =&gt; target position for first coordinate
</li>
<li>@pos2 =&gt; target position for second coordinate
</li>
<li>@pos3 =&gt; target position for third coordinate
</li>
<li>@pos4 =&gt; target position for fourth coordinate
</li>
</ul>

<p>
Returns the reordered line coordinates
</p>

</section>
<section id="toc546">
<h3>4.32.15. Convert HOCR to plain text</h3>

<pre>
function __unoconv_hocr2txt($hocr)
</pre>

<p>
This function processes HOCR (HTML OCR) output to extract and reconstruct
the text content while maintaining spatial relationships.
</p>

<ul>
<li>@hocr =&gt; HOCR content to process
</li>
</ul>

<p>
Returns the extracted plain text
</p>

</section>
<section id="toc547">
<h3>4.32.16. Proportional substring extraction</h3>

<pre>
function __unoconv_substr($string, $start, $length, $reference)
</pre>

<p>
This function extracts a substring based on proportional positions relative
to a reference length, useful for working with scaled text representations.
</p>

<ul>
<li>@string    =&gt; input string to extract from
</li>
<li>@start     =&gt; starting position (relative to reference)
</li>
<li>@length    =&gt; length to extract (relative to reference)
</li>
<li>@reference =&gt; reference length for proportional calculation
</li>
</ul>

<p>
Returns the extracted substring
</p>

</section>
<section id="toc548">
<h3>4.32.17. 2D proportional substring extraction</h3>

<pre>
function __unoconv_substr2d($page, $x1, $x2, $x3, $y1, $y2, $y3)
</pre>

<p>
This function extracts a 2D region from a text page based on proportional
coordinates, maintaining spatial relationships in the extracted content.
</p>

<ul>
<li>@page =&gt; array of text lines representing the page
</li>
<li>@x1   =&gt; starting x position (relative to x3)
</li>
<li>@x2   =&gt; width to extract (relative to x3)
</li>
<li>@x3   =&gt; reference width for x coordinates
</li>
<li>@y1   =&gt; starting y position (relative to y3)
</li>
<li>@y2   =&gt; height to extract (relative to y3)
</li>
<li>@y3   =&gt; reference height for y coordinates
</li>
</ul>

<p>
Returns the array of extracted lines
</p>

</section>
<section id="toc549">
<h3>4.32.18. Remove margins from text page</h3>

<pre>
function __unoconv_remove_margins($page)
</pre>

<p>
This function trims empty margins from a text page, removing leading/trailing
whitespace and empty lines from the top and bottom.
</p>

<ul>
<li>@page =&gt; text content to process (multiple lines separated by newlines)
</li>
</ul>

<p>
Returns the text content with margins removed
</p>

</section>
</section>
<section id="toc550">
<h2>4.33. Add upload file</h2>

<pre>
api/php/lib/upload.php
</pre>

<p>
This function is intended to add files to the upload mecano
</p>

<ul>
<li>@val  =&gt; is an associative array with the follow entries:
</li>
<li>@id   =&gt; the uniq id used to identify the file in the uploads system
</li>
<li>@name =&gt; local name of the file
</li>
<li>@size =&gt; size of the contents of the file
</li>
<li>@type =&gt; mime type of the file
</li>
<li>@data =&gt; the inline data in base64 form, with the mime type prefix
</li>
</ul>

<section id="toc551">
<h3>4.33.1. Del upload file</h3>

<pre>
function del_upload_file($val)
</pre>

<p>
This function is intended to del files in the upload mecano
</p>

<ul>
<li>@val  =&gt; is an associative array with the follow entries:
</li>
<li>@id   =&gt; the uniq id used to identify the file in the uploads system
</li>
<li>@name =&gt; local name of the file
</li>
<li>@size =&gt; size of the contents of the file
</li>
<li>@type =&gt; mime type of the file
</li>
<li>@file =&gt; the inline data in base64 form, with the mime type prefix
</li>
<li>@hash =&gt; the hash of the binary data contents
</li>
</ul>

</section>
<section id="toc552">
<h3>4.33.2. Check upload file</h3>

<pre>
function check_upload_file($val)
</pre>

<p>
This function is intended to check files in the upload mecano
</p>

<ul>
<li>@val     =&gt; is an associative array with the follow entries:
</li>
<li>@user_id =&gt; the user id intended to identify the property of the file
</li>
<li>@uniqid  =&gt; the uniq id used to identify the file in the uploads system
</li>
<li>@name    =&gt; local name of the file
</li>
<li>@size    =&gt; size of the contents of the file
</li>
<li>@type    =&gt; mime type of the file
</li>
<li>@file    =&gt; the inline data in base64 form, with the mime type prefix
</li>
<li>@hash    =&gt; the hash of the binary data contents
</li>
</ul>

</section>
<section id="toc553">
<h3>4.33.3. Rename upload file</h3>

<pre>
function rename_upload_file($val, $app, $id)
</pre>

<p>
This function copy the file contained in the val parameter to the
app folder and create the files register using the id argument
</p>

<ul>
<li>@val =&gt; the array with the file data
</li>
<li>@app =&gt; the app code that identify the application
</li>
<li>@id  =&gt; the id of the application register
</li>
</ul>

</section>
<section id="toc554">
<h3>4.33.4. Garbage Collector Upload</h3>

<pre>
function gc_upload()
</pre>

<p>
This function tries to clean the upload database of old files, the parameters
that this function uses is defined in the config file, only uses the timeout
that is getted from the server/cachetimeout
</p>

</section>
</section>
<section id="toc555">
<h2>4.34. Version helper module</h2>

<pre>
api/php/lib/version.php
</pre>

<p>
This fie contains useful functions related to the control and version system, they allow to
relationate registers with users and groups, and to add and retrieve the versions of a register
</p>

<section id="toc556">
<h3>4.34.1. Make Version function</h3>

<pre>
function make_version($app, $reg_id)
</pre>

<p>
This function allow to add a new version to a reg_id of an app, to do it,
the function requires to specify the app, reg_id, the original data and
the new data to compute the diff patch that must to be stored in the data
field and create the register for the new version
</p>
<p>
To do this, the function validate the input data, checks the existence
of registers of data and versions, prepare the data patch to store, get
the old hash to do the blockchain, get the last ver_id and compute all
needed things to do the insert of the new version register
</p>

<ul>
<li>@app    =&gt; code of the application that you want to add a new version
</li>
<li>@reg_id =&gt; register of the app that you want to add a new version
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns an integer as response about the control action:
</p>

<ul>
<li>+1 =&gt; insert executed, this is because the app register exists and they can add a new version register
</li>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; version table not found, this is because the has_version feature is disabled by dbstatic
</li>
<li>-3 =&gt; data not found and version not found, app register not exists and version register not exists
</li>
<li>-4 =&gt; data not found but version found, app register not exists and version register exists
</li>
</ul>

<p>
As you can see, negative values denotes an error and positive values denotes a successfully situation
</p>

</section>
<section id="toc557">
<h3>4.34.2. Get Version</h3>

<pre>
function get_version($app, $reg_id, $ver_id = null)
</pre>

<p>
This function allow to get an specific version of a register and app, intended
to get the data used in a specific version to compare with other versions and
to restore data to the requested version
</p>

<ul>
<li>@app    =&gt; code of the application that you want to add a new version
</li>
<li>@reg_id =&gt; register of the app that you want to add a new version
</li>
<li>@ver_id =&gt; the version that you want to get
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is not a simple select of the register that matches with the
ver_id requested, it does an accumulative merge to get the register data
in the moment where the version will be stored, to do it, they must to
restore versions from 1 to ver_id, and must to discard the next versions
</p>
<p>
This function returns an array or an integer as response about the control action:
</p>

<ul>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; version table not found, this is because the has_version feature is disabled by dbstatic
</li>
<li>-3 =&gt; data not found, this is because the version requested not exists
</li>
</ul>

<p>
As you can see, negative values denotes an error and positive values denotes a successfully situation
</p>

</section>
<section id="toc558">
<h3>4.34.3. Delete Version function</h3>

<pre>
function del_version($app, $reg_id)
</pre>

<p>
This function allow to delete the last version to a reg_id of an app, to do it,
the function requires to specify the app and reg_id
</p>

<ul>
<li>@app    =&gt; code of the application that you want to add a new version
</li>
<li>@reg_id =&gt; register of the app that you want to add a new version
</li>
</ul>

<p>
Notes:
</p>
<p>
This function returns an integer as response about the control action:
</p>

<ul>
<li>+1 =&gt; delete executed, this is because the app register exists and they can delete the last register
</li>
<li>-1 =&gt; app not found, this is because the app requested not have a table in the apps config
</li>
<li>-2 =&gt; version table not found, this is because the has_version feature is disabled by dbstatic
</li>
<li>-3 =&gt; data not found, this is because the app register not exists and the version register not exists
</li>
</ul>

<p>
As you can see, negative values denotes an error and positive values denotes a successfully situation
</p>

</section>
</section>
</section>
<section id="toc559">
<h1>5. Javascript</h1>

<section id="toc560">
<h2>5.1. Application helper module</h2>

<pre>
web/js/app.js
</pre>

<p>
This fie contains useful functions related to the main application, at the end of this file you
can see the main code that launch the application to be executed from the browser
</p>

<section id="toc561">
<h3>5.1.1. Application helper object</h3>

<pre>
saltos.app = {};
</pre>

<p>
This object stores all application functions and data
</p>

</section>
<section id="toc562">
<h3>5.1.2. Modal function</h3>

<pre>
saltos.app.modal = (title, message, extra = {})
</pre>

<p>
This function tries to implement a modal box, the main difference between the tipical alert
is that this alert allow to you to specify the title and a more complex message, but it only
shows one button to close it.
</p>

<ul>
<li>@title   =&gt; title of the modal dialog
</li>
<li>@message =&gt; message of the modal dialog
</li>
<li>@extra   =&gt; object with array of buttons and color
</li>
</ul>

</section>
<section id="toc563">
<h3>5.1.3. Toast function</h3>

<pre>
saltos.app.toast = (title, message, extra = {})
</pre>

<p>
This function tries to implement a toast notice.
</p>

<ul>
<li>@title   =&gt; title of the toast
</li>
<li>@message =&gt; message of the toast
</li>
<li>@extra   =&gt; object with array of buttons and color
</li>
</ul>

</section>
<section id="toc564">
<h3>5.1.4. Show error helper</h3>

<pre>
saltos.app.show_error = error
</pre>

<p>
This function allow to show a modal dialog with de details of an error
</p>

</section>
<section id="toc565">
<h3>5.1.5. Check response helper</h3>

<pre>
saltos.app.check_response = response
</pre>

<p>
This function is intended to process the response received by ajax requests and returns
if an error is detected in the response.
</p>

</section>
<section id="toc566">
<h3>5.1.6. Send request helper</h3>

<pre>
saltos.app.send_request = hash
</pre>

<p>
This function allow to send requests to the server and process the response
</p>

</section>
<section id="toc567">
<h3>5.1.7. Data helper object</h3>

<pre>
saltos.app.__cache = {};
</pre>

<p>
This object allow to the app to store the data of the prefetch feature
</p>

</section>
<section id="toc568">
<h3>5.1.8. Process response helper</h3>

<pre>
saltos.app.prefetch_cache = (responses)
</pre>

<p>
This function process the responses received by the send request
</p>

</section>
<section id="toc569">
<h3>5.1.9. Process response helper</h3>

<pre>
saltos.app.process_response = async response
</pre>

<p>
This function process the responses received by the send request
</p>

</section>
<section id="toc570">
<h3>5.1.10. Source helper</h3>

<pre>
saltos.app.__source_helper = field
</pre>

<p>
This function is intended to provide an asynchronous sources for a field, using the source attribute,
you can program an asynchronous ajax request to retrieve the data used to create the field.
</p>
<p>
This function is used in the fields of type table, alert, card and chartjs, the call of this function
is private and is intended to be used as a helper from the builders of the previous types opening
another way to pass arguments.
</p>

<ul>
<li>@id     =&gt; the id used to set the reference for to the object
</li>
<li>@type   =&gt; the type used to set the type for to the object
</li>
<li>@source =&gt; data source used to load asynchronously the contents of the table (header, data,
           footer and divider)
</li>
<li>@height =&gt; the height used as style.height parameter
</li>
<li>@label  =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Notes:
</p>
<p>
At the end of the object replacement, the load event is triggered to the old object to notify
that the update was finished.
</p>

</section>
<section id="toc571">
<h3>5.1.11. Get data</h3>

<pre>
saltos.app.get_data = full
</pre>

<p>
This function retrieves the data of the fields in the current layout. to do this it uses
the saltos.form.__form.fields that contains the list of all used fields in the layout, this
function can retrieve all fields or only the fields that contains differences between the
original data and the current data.
</p>

<ul>
<li>@full =&gt; boolean to indicate if you want the entire form or only the differences
</li>
</ul>

</section>
<section id="toc572">
<h3>5.1.12. Get data ids helper</h3>

<pre>
saltos.app.__get_data_ids_helper = data
</pre>

<p>
This function allow to retrieve the needed ids in the fields used as template
</p>

<ul>
<li>@data =&gt; the contents of the object with data
</li>
</ul>

<p>
Notes:
</p>
<p>
The main idea of this function is to add the id fields if it is needed, for example
if some field of the template is modified and their value contains a different value
that void.
</p>

</section>
<section id="toc573">
<h3>5.1.13. Get data parse helper</h3>

<pre>
saltos.app.__get_data_parser_helper = data
</pre>

<p>
This function allow to join in an object the values that share the same prefix part of
the key, for example, if you have an object with two ventries (a.a and a.b), then the
resulted value will be an object a with two entries (a and b).
</p>

<ul>
<li>@data =&gt; the contents of the object with data
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is used to allow the specification of multiples parameters, for example,
in the navbar widget where the widget expects an object for the brand configuration, too
is used by get_data to separate in a more pretty structure some fields as the details used
in the invoices.
</p>

</section>
<section id="toc574">
<h3>5.1.14. Checkbox ids</h3>

<pre>
saltos.app.checkbox_ids = obj
</pre>

<p>
Retrieve the selected checkboxes contained in an obj, useful for the checkboxes
that appear in the bootstrap table widget.
</p>

<ul>
<li>@obj =&gt; the object that contains the checkboxes, generally the table widget
</li>
</ul>

</section>
<section id="toc575">
<h3>5.1.15. Check form</h3>

<pre>
saltos.app.check_required = ()
</pre>

<p>
This function tries to check if all required fields contain data, if the required field are
right, the is-valid class will be applied to all required elements and true is returned,
otherwise the is-invalid class will be added to the void required elements and false is
returned.
</p>

</section>
<section id="toc576">
<h3>5.1.16. Form disabled</h3>

<pre>
saltos.app.form_disabled = bool
</pre>

<p>
This function disables all elements of the form, it is intended to be used when you need
to do screen for view mode.
</p>

</section>
<section id="toc577">
<h3>5.1.17. Ajax helper</h3>

<pre>
saltos.app.ajax = args
</pre>

<p>
This function uses the saltos.core.ajax to implement the ajax feature, and in
this scope, tries to simplify the needed configuration by provide a compound of
defined features and code, intended to process the responses, the errors, to
add the token, the lang.
</p>

<ul>
<li>@url     =&gt; url of the ajax call
</li>
<li>@success =&gt; callback function for the success action (optional)
</li>
<li>@error   =&gt; callback function for the error action (optional)
</li>
<li>@abort   =&gt; callback function for the abort action (optional)
</li>
<li>@data    =&gt; data used in the body of the request
</li>
<li>@proxy   =&gt; add the Proxy header with the value passed, intended to be used by the SaltOS PROXY
</li>
<li>@loading =&gt; enable or disable the loading feature, true by default
</li>
</ul>

</section>
<section id="toc578">
<h3>5.1.18. Online message</h3>

<pre>
window.addEventListener('online', event
</pre>

<p>
This function show a message when navigator detects an online/offline change
</p>

</section>
<section id="toc579">
<h3>5.1.19. Offline message</h3>

<pre>
window.addEventListener('offline', event
</pre>

<p>
This function show a message when navigator detects an online/offline change
</p>

</section>
<section id="toc580">
<h3>5.1.20. Main app code</h3>

<pre>
window.addEventListener('load', async event
</pre>

<p>
This is the code that must to be executed to initialize all requirements of this module
</p>

</section>
</section>
<section id="toc581">
<h2>5.2. Authentication helper module</h2>

<pre>
web/js/auth.js
</pre>

<p>
This file contains all needed code to do authentications with all features suck as the
main authentication using a user and password pair, the checktoken and the deauthtoken
to control it.
</p>

<section id="toc582">
<h3>5.2.1. Authentication helper object</h3>

<pre>
saltos.authenticate = {};
</pre>

<p>
This object stores all authentication functions to get access, check tokens to maintain
the access and the deauthtoken to close the access
</p>

</section>
<section id="toc583">
<h3>5.2.2. Authenticate token function</h3>

<pre>
saltos.authenticate.authtoken = async (user, pass)
</pre>

<p>
This function uses the authtoken action to try to authenticate an user with the user/pass
credentials passed by argument.
</p>

<ul>
<li>@user =&gt; username used to the authentication process
</li>
<li>@pass =&gt; password used to the authentication process
</li>
</ul>

</section>
<section id="toc584">
<h3>5.2.3. Check token function</h3>

<pre>
saltos.authenticate.checktoken = async ()
</pre>

<p>
This function uses the checktoken action to check the validity of the current token.
</p>

</section>
<section id="toc585">
<h3>5.2.4. De-authenticate token function</h3>

<pre>
saltos.authenticate.deauthtoken = async ()
</pre>

<p>
This function uses the deauthtoken action to try to de-authenticate an user with the token
credentials.
</p>

</section>
<section id="toc586">
<h3>5.2.5. Authenticate update function</h3>

<pre>
saltos.authenticate.authupdate = (oldpass, newpass, renewpass)
</pre>

<p>
This function is intended to be used in the profile feature to allow the password change
by the user.
</p>

<ul>
<li>@oldpass   =&gt; old password used to validate the correctness of the transaction
</li>
<li>@newpass   =&gt; new password used to update the old password
</li>
<li>@renewpass =&gt; repite the new password used to update the old password
</li>
</ul>

</section>
</section>
<section id="toc587">
<h2>5.3. Backup &amp; Autosave helper module</h2>

<pre>
web/js/backup.js
</pre>

<p>
This module provides the needed tools to implement the backup &amp; autosave feature
</p>

<section id="toc588">
<h3>5.3.1. Form backup helper</h3>

<pre>
saltos.backup = {};
</pre>

<p>
This object stores the needed structure to allocate the forms backups with all their
data and the functions needed to do and restore the backups to the main __form object.
</p>
<p>
Notes:
</p>
<p>
This object is intended to store more forms that one, usefull when driver uses the same
screen to allocate lists and forms that contains fields for the search engine or fields
for the create or edit features.
</p>

</section>
<section id="toc589">
<h3>5.3.2. Backup object</h3>

<pre>
saltos.backup.__forms = {};
</pre>

<p>
This object stores the backup data
</p>

</section>
<section id="toc590">
<h3>5.3.3. Save feature</h3>

<pre>
saltos.backup.save = key
</pre>

<p>
This action performs a backup using the specified key
</p>

<ul>
<li>@key =&gt; the key selector that you want to use.
</li>
</ul>

</section>
<section id="toc591">
<h3>5.3.4. Restore feature</h3>

<pre>
saltos.backup.restore = key
</pre>

<p>
This action performs the restoration action using the specified key, if the
key is not found, then empty fields and templates are used for the restoration
</p>

<ul>
<li>@key =&gt; the key selector that you want to use.
</li>
</ul>

</section>
<section id="toc592">
<h3>5.3.5. Selector helper</h3>

<pre>
saltos.backup.__selector_helper = key
</pre>

<p>
This function allow to search the forms contexts stored in the backup, allow to
do queries like two,one or top+one, in each case, the result will be an array
with the ids of the found items uwing the selector trick.
</p>
<p>
All actions that uses this selector, are able to understand some expressions like comma
and plus, the follow examples shown how runs the selector in the restore feature:
</p>

<ul>
<li>@two,one =&gt; this example is intended to restore the two context if it is found, otherwise
tries to restore the one context, otherwise a void context is set.
</li>
</ul>

<ul>
<li>@top+one =&gt; this example is intended to restore two contexts in one context, intender to
load the context of the search list that can be contained in the top and one containers.
</li>
</ul>

<ul>
<li>@key =&gt; the key selector that you want to use.
</li>
</ul>

</section>
<section id="toc593">
<h3>5.3.6. Autosave feature object</h3>

<pre>
saltos.autosave = {};
</pre>

<p>
This object stores all functions used by the autosave feature
</p>
<p>
Notes:
</p>
<p>
The autosave feature uses the init, save, restore, clear and purge functions, and
workflow of the operation will be start using the init to initialize the key, then
the save to store the data of the key context, the restore will be used when a new
screen is loaded to load the stored data, the clear will remove the data and the
purge will remove the old entries, act as a garbage collector
</p>
<p>
As an additional feature, this module uses the storage with the timestamp, this
usage allow to detect old entries and purge it.
</p>

</section>
<section id="toc594">
<h3>5.3.7. Init</h3>

<pre>
saltos.autosave.init = (key, hash = saltos.hash.get())
</pre>

<p>
This function checks that the key not exists and creates a void entry, used by
save to allow the storage of data.
</p>

<ul>
<li>@key  =&gt; the key selector that you want to use.
</li>
<li>@hash =&gt; optional hash used in the current action.
</li>
</ul>

</section>
<section id="toc595">
<h3>5.3.8. Save</h3>

<pre>
saltos.autosave.save = (key, hash = saltos.hash.get())
</pre>

<p>
This function save the key context data in the storage, only apply if previously
an init is executed.
</p>

<ul>
<li>@key  =&gt; the key selector that you want to use.
</li>
<li>@hash =&gt; optional hash used in the current action.
</li>
</ul>

</section>
<section id="toc596">
<h3>5.3.9. Restore</h3>

<pre>
saltos.autosave.restore = (key, hash = saltos.hash.get())
</pre>

<p>
This function restore the key context data of the storage, only apply if data is found
and if data contains real data, not a void object
</p>

<ul>
<li>@key  =&gt; the key selector that you want to use.
</li>
<li>@hash =&gt; optional hash used in the current action.
</li>
</ul>

</section>
<section id="toc597">
<h3>5.3.10. Clear</h3>

<pre>
saltos.autosave.clear = (key, hash = saltos.hash.get())
</pre>

<p>
This function remove the key context data in the storage, apply in all cases
</p>

<ul>
<li>@key  =&gt; the key selector that you want to use.
</li>
<li>@hash =&gt; optional hash used in the current action.
</li>
</ul>

</section>
<section id="toc598">
<h3>5.3.11. Purge</h3>

<pre>
saltos.autosave.purge = (key, hash = saltos.hash.get())
</pre>

<p>
This function purge the void and old data, to do it, checks if data exists
and if it is void, in this case the element will be removed.
</p>
<p>
As an additional feature, uses the saltos.storage.purgeWithTimestamp to maintain
clean the localStorage by purging old entries.
</p>

<ul>
<li>@key  =&gt; the key selector that you want to use.
</li>
<li>@hash =&gt; optional hash used in the current action.
</li>
</ul>

</section>
</section>
<section id="toc599">
<h2>5.4. Bootstrap helper module</h2>

<pre>
web/js/bootstrap.js
</pre>

<p>
This fie contains useful functions related to the bootstrap widgets, allow to create widgets and
other plugins suck as plots or rich editors
</p>

<section id="toc600">
<h3>5.4.1. Bootstrap helper object</h3>

<pre>
saltos.bootstrap = {};
</pre>

<p>
This object stores all bootstrap functions and data
</p>

</section>
<section id="toc601">
<h3>5.4.2. Form fields constructor</h3>

<pre>
saltos.bootstrap.field = field
</pre>

<p>
This function and their helpers, allow the creation of the interface using the bootstrap
widgets, the types that can be called are the follow:
</p>

<ul>
<li>@div         =&gt; id, class, style
</li>
<li>@container   =&gt; id, class, style
</li>
<li>@row         =&gt; id, class, style
</li>
<li>@col         =&gt; id, class, style
</li>
<li>@text        =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@hidden      =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, color, OE, OC
</li>
<li>@integer     =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@float       =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@color       =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@date        =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@time        =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@datetime    =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@textarea    =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, rows, tooltip, label, color, height, OC
</li>
<li>@ckeditor    =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, rows, label, color, height, OC
</li>
<li>@codemirror  =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, rows, mode, label, color, height, OC
</li>
<li>@iframe      =&gt; id, class, src, srcdoc, height, label, color
</li>
<li>@select      =&gt; id, class, DS, RQ, AF, AK, rows, multiple, size, value, tooltip, label, color, OC
</li>
<li>@multiselect =&gt; id, class, DS, RQ, AF, AK, rows, multiple, size, value, multiple, tooltip, label, color
</li>
<li>@checkbox    =&gt; id, class, DS, RO, AK, label, value, tooltip, color, OC
</li>
<li>@switch      =&gt; id, class, DS, RO, AK, label, value, tooltip, color, OC
</li>
<li>@button      =&gt; id, class, DS, AF, AK, label, onclick, tooltip, color, autoclose
</li>
<li>@password    =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, tooltip, label, color, OE, OC
</li>
<li>@file        =&gt; id, class, DS, RQ, AF, AK, multiple, tooltip, label, color, OC
</li>
<li>@link        =&gt; id, DS, AK, value, onclick, tooltip, label, color
</li>
<li>@label       =&gt; id, class, label, tooltip
</li>
<li>@image       =&gt; id, class, value, alt, tooltip, width, height, label, color
</li>
<li>@excel       =&gt; id, class, data, rowHeaders, colHeaders, minSpareRows, contextMenu, rowHeaderWidth,
                colWidths, label, color
</li>
<li>@pdfjs       =&gt; id, class, value, label, color
</li>
<li>@table       =&gt; id, class, header, data, footer, value, label, color
</li>
<li>@alert       =&gt; id, class, title, text, body, value, label, color
</li>
<li>@card        =&gt; id, image, alt, header, footer, title, text, body, value, label, color
</li>
<li>@chartjs     =&gt; id, mode, data, value, label, color
</li>
<li>@tags        =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, datalist, tooltip, label, color, OC
</li>
<li>@onetag      =&gt; id, class, PL, value, DS, RO, RQ, AF, AK, datalist, tooltip, label, color, OC
</li>
<li>@gallery     =&gt; id, class, label, images, color
</li>
<li>@placeholder =&gt; id, color, height, label
</li>
<li>@list        =&gt; id, class, header, extra, data, footer, onclick, active, disabled, label
</li>
<li>@tabs        =&gt; id, tabs, label, content, active, disabled, label
</li>
<li>@pills       =&gt; id, tabs, label, content, active, disabled, label
</li>
<li>@vpills      =&gt; id, tabs, label, content, active, disabled, label
</li>
<li>@accordion   =&gt; id, flush, multiple, items, label
</li>
<li>@jstree      =&gt; id, open, onclick, data
</li>
</ul>

<p>
Notes:
</p>
<p>
To do more small the previous list, we have used the follow abreviations:
</p>

<ul>
<li>@PL =&gt; placeholder
</li>
<li>@DS =&gt; disabled
</li>
<li>@RO =&gt; readonly
</li>
<li>@RQ =&gt; required
</li>
<li>@AF =&gt; autofocus
</li>
<li>@AK =&gt; accesskey
</li>
<li>@OE =&gt; onenter
</li>
<li>@OC =&gt; onchange
</li>
</ul>

<p>
The saltos.bootstrap.__field object is part of this constructor and act with the constructor
as a helper, the idea is that the user must to call the constructor and the helpers are
only for internal use.
</p>

</section>
<section id="toc602">
<h3>5.4.3. Form_field constructor helper object</h3>

<pre>
saltos.bootstrap.__field = {};
</pre>

<p>
This object allow to the constructor to use a rational structure for a quick access of each helper
</p>

</section>
<section id="toc603">
<h3>5.4.4. Div constructor helper</h3>

<pre>
saltos.bootstrap.__field.div = field
</pre>

<p>
This function returns an object of the type class by default, you can pass the class
argument in the field object to specify what kind of class do you want to use.
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@class =&gt; the class used in the div object
</li>
<li>@style =&gt; the style used in the div object
</li>
</ul>

<p>
Notes:
</p>
<p>
As special feature for div containes suck as cols, rows and containers, the unused arguments of fields
are set as data-bs-{subfield} in the object to be accesed from the obj directly, this allow to set for
example the data-bs-title or other parameter in a div container to be used futher
</p>

</section>
<section id="toc604">
<h3>5.4.5. Container constructor helper</h3>

<pre>
saltos.bootstrap.__field.container = field
</pre>

<p>
This function returns an object of the container-fluid class by default, you can pass the class
argument in the field object to specify what kind of container do you want to do.
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@class =&gt; the class used in the div object
</li>
<li>@style =&gt; the style used in the div object
</li>
</ul>

</section>
<section id="toc605">
<h3>5.4.6. Row constructor helper</h3>

<pre>
saltos.bootstrap.__field.row = field
</pre>

<p>
This function returns an object of the row class by default, you can pass the class argument
in the field object to specify what kind of row do you want to do.
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@class =&gt; the class used in the div object
</li>
<li>@style =&gt; the style used in the div object
</li>
</ul>

</section>
<section id="toc606">
<h3>5.4.7. Col constructor helper</h3>

<pre>
saltos.bootstrap.__field.col = field
</pre>

<p>
This function returns an object of the col class by default, you can pass the class argument
in the field object to specify what kind of col do you want to do.
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@class =&gt; the class used in the div object
</li>
<li>@style =&gt; the style used in the div object
</li>
</ul>

</section>
<section id="toc607">
<h3>5.4.8. HR constructor helper</h3>

<pre>
saltos.bootstrap.__field.hr = field
</pre>

<p>
This function returns an object of the type class by default, you can pass the class
argument in the field object to specify what kind of class do you want to use.
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@class =&gt; the class used in the div object
</li>
<li>@style =&gt; the style used in the div object
</li>
</ul>

</section>
<section id="toc608">
<h3>5.4.9. Text constructor helper</h3>

<pre>
saltos.bootstrap.__field.text = field
</pre>

<p>
This function returns an input object of type text, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

</section>
<section id="toc609">
<h3>5.4.10. Hidden constructor helper</h3>

<pre>
saltos.bootstrap.__field.hidden = field
</pre>

<p>
This function returns an input object of type hidden, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This function allow the previous parameters but for hidden inputs, only id
and value are usually used, in some cases can be interesting to use the
class to identify a group of hidden input
</p>

</section>
<section id="toc610">
<h3>5.4.11. Integer constructor helper</h3>

<pre>
saltos.bootstrap.__field.integer = field
</pre>

<p>
This function returns an input object of type integer, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget requires the imask library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/imaskjs/imask.min.js
</li>
</ul>

</section>
<section id="toc611">
<h3>5.4.12. Float constructor helper</h3>

<pre>
saltos.bootstrap.__field.float = field
</pre>

<p>
This function returns an input object of type float, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget requires the imask library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/imaskjs/imask.min.js
</li>
</ul>

</section>
<section id="toc612">
<h3>5.4.13. Color constructor helper</h3>

<pre>
saltos.bootstrap.__field.color = field
</pre>

<p>
This function returns an input object of type color, you can pass the same
arguments that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
Ths color input launch a warning if value is not in the format #rrggbb,
for this reason it is set to #000000 if value is void
</p>

</section>
<section id="toc613">
<h3>5.4.14. Date constructor helper</h3>

<pre>
saltos.bootstrap.__field.date = field
</pre>

<p>
This function returns an input object of type date, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

</section>
<section id="toc614">
<h3>5.4.15. Time constructor helper</h3>

<pre>
saltos.bootstrap.__field.time = field
</pre>

<p>
This function returns an input object of type time, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

</section>
<section id="toc615">
<h3>5.4.16. Datetime constructor helper</h3>

<pre>
saltos.bootstrap.__field.datetime = field
</pre>

<p>
This function returns an input object of type datetime, you can pass the same arguments
that for the input object of type text
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

</section>
<section id="toc616">
<h3>5.4.17. Textarea constructor helper</h3>

<pre>
saltos.bootstrap.__field.textarea = field
</pre>

<p>
This function returns a textarea object with the autogrow plugin enabled
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@height      =&gt; the height used as style.minHeight parameter
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget requires the autoheight library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/autoheight/autoheight.min.js
</li>
</ul>

</section>
<section id="toc617">
<h3>5.4.18. Ckeditor constructor helper</h3>

<pre>
saltos.bootstrap.__field.ckeditor = field
</pre>

<p>
This function returns a textarea object with the ckeditor plugin enabled
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@height      =&gt; the height used as style.minHeight parameter
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget requires the ckeditor library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/ckeditor/ckeditor.min.js
</li>
</ul>

<p>
The returned object contains a textarea with two new properties like ckeditor and set,
the first contains the ckeditor object and the second is a function used to update the
value of the ckeditor, intended to load new data.
</p>

</section>
<section id="toc618">
<h3>5.4.19. Codemirror constructor helper</h3>

<pre>
saltos.bootstrap.__field.codemirror = field
</pre>

<p>
This function returns a textarea object with the codemirror plugin enabled
</p>

<ul>
<li>@mode        =&gt; used to define the mode parameter of the codemirror
</li>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@height      =&gt; the height used as style.minHeight parameter
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
<li>@indent      =&gt; enables the indent feature, only available for xml, json, css and sql
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget requires the codemirror library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/codemirror/codemirror.min.css
</li>
<li>@lib/codemirror/codemirror.min.js
</li>
</ul>

<p>
The returned object contains a textarea with two new properties like codemirror and set,
the first contains the codemirror object and the second is a function used to update the
value of the codemirror, intended to load new data.
</p>

</section>
<section id="toc619">
<h3>5.4.20. Indent helper</h3>

<pre>
saltos.bootstrap.__indent_helper = (str, mode)
</pre>

<p>
This function allow to indent the string using the mode, this function is
intended to be used inside the codemirror widget, allowing to indent the
contents like xml, json, css or sql
</p>

<ul>
<li>@str  =&gt; string that you want to indent
</li>
<li>@mode =&gt; mode used to indent (xml, json, css or sql)
</li>
</ul>

</section>
<section id="toc620">
<h3>5.4.21. Iframe constructor helper</h3>

<pre>
saltos.bootstrap.__field.iframe = field
</pre>

<p>
This function returns an iframe object, you can pass the follow arguments:
</p>

<ul>
<li>@id     =&gt; the id used by the object
</li>
<li>@src    =&gt; the value used as src parameter
</li>
<li>@srcdoc =&gt; the value used as srcdoc parameter
</li>
<li>@class  =&gt; allow to add more classes to the default form-control
</li>
<li>@height =&gt; the height used as style.minHeight parameter
</li>
<li>@label  =&gt; this parameter is used as text for the label
</li>
<li>@color  =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
Notes:
</p>
<p>
This function allow to put contents in the srcdoc, as an extra feature, this content is
embedded with a doctype with html, head and body, includes the default saltos font and
to provide a security layer, this function creates an iframe with a sandbox and add to
the srcdoc a meta to configure the CSP that must apply to the contents
</p>

</section>
<section id="toc621">
<h3>5.4.22. Select constructor helper</h3>

<pre>
saltos.bootstrap.__field.select = field
</pre>

<p>
This function returns a select object, you can pass the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-select
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@required  =&gt; this parameter raise the required flag
</li>
<li>@autofocus =&gt; this parameter raise the autofocus flag
</li>
<li>@multiple  =&gt; this parameter enables the multiple selection feature of the select
</li>
<li>@size      =&gt; this parameter allow to see the options list opened with n (size) entries
</li>
<li>@value     =&gt; the value used to detect the selected option
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@rows      =&gt; this parameter contains the list of options, each option must be an object
              with label and value entries
</li>
<li>@label     =&gt; this parameter is used as text for the label
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onchange  =&gt; the function executed when onchange event is detected
</li>
</ul>

</section>
<section id="toc622">
<h3>5.4.23. Multiselect constructor helper</h3>

<pre>
saltos.bootstrap.__field.multiselect = field
</pre>

<p>
This function returns a multiselect object, you can pass the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-select
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@required  =&gt; this parameter raise the required flag
</li>
<li>@size      =&gt; this parameter allow to see the options list opened with n (size) entries
</li>
<li>@value     =&gt; the value used as src parameter
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@rows      =&gt; this parameter contains the list of options, each option must be an object
              with label and value entries
</li>
<li>@label     =&gt; this parameter is used as text for the label
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@separator =&gt; the separator string used to split and join the values
</li>
<li>@onchange  =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget is created joinin 2 selects and 2 buttons, the user must get the value
using the hidden input that is builded using the original id passed by argument.
</p>
<p>
TODO: detected a bug with this widget in chrome in mobile browsers
</p>

</section>
<section id="toc623">
<h3>5.4.24. Checkbox constructor helper</h3>

<pre>
saltos.bootstrap.__field.checkbox = field
</pre>

<p>
This function returns a checkbox object, you can pass the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-check
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@readonly  =&gt; this parameter raise the readonly flag
</li>
<li>@required  =&gt; this parameter raise the required flag
</li>
<li>@label     =&gt; this parameter is used as label for the checkbox
</li>
<li>@value     =&gt; this parameter is used to check or unckeck the checkbox, the value
              must contain a number that raise as true or false in the if condition
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onchange  =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget returns their value by setting a zero or one (0/1) value on the value of the input.
</p>

</section>
<section id="toc624">
<h3>5.4.25. Switch constructor helper</h3>

<pre>
saltos.bootstrap.__field.switch = field
</pre>

<p>
This function returns a switch object, you can pass the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-check and form-switch
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@readonly  =&gt; this parameter raise the readonly flag
</li>
<li>@label     =&gt; this parameter is used as label for the switch
</li>
<li>@value     =&gt; this parameter is used to check or unckeck the switch, the value
              must contain a number that raise as true or false in the if condition
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onchange  =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget uses the checkbox constructor
</p>

</section>
<section id="toc625">
<h3>5.4.26. Button constructor helper</h3>

<pre>
saltos.bootstrap.__field.button = field
</pre>

<p>
This function returns a button object, you can pass the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-select
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@autofocus =&gt; this parameter raise the autofocus flag
</li>
<li>@label     =&gt; label to be used as text in the contents of the buttons
</li>
<li>@onclick   =&gt; callback function that is executed when the button is pressed
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@collapse  =&gt; a boolean to enable or disable the collapse feature in the button
</li>
<li>@target    =&gt; the id of the element controlled by the collapse feature
</li>
<li>@addbr     =&gt; this special feature adds a void label with a new line tag to align the button with
              the other elements that are label+widget
</li>
</ul>

<p>
Notes:
</p>
<p>
The buttons adds the focus-ring classes to use this new feature that solves issues suck as
hidden focus when you try to focus a button inside a modal, for example.
</p>

</section>
<section id="toc626">
<h3>5.4.27. Password constructor helper</h3>

<pre>
saltos.bootstrap.__field.password = field
</pre>

<p>
This function returns an input object of type password, you can pass some arguments as:
</p>

<ul>
<li>@id           =&gt; the id used by the object
</li>
<li>@class        =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder  =&gt; the text used as placeholder parameter
</li>
<li>@value        =&gt; the value used as value parameter
</li>
<li>@disabled     =&gt; this parameter raise the disabled flag
</li>
<li>@readonly     =&gt; this parameter raise the readonly flag
</li>
<li>@required     =&gt; this parameter raise the required flag
</li>
<li>@autofocus    =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip      =&gt; this parameter raise the title flag
</li>
<li>@accesskey    =&gt; the key used as accesskey parameter
</li>
<li>@label        =&gt; this parameter is used as text for the label
</li>
<li>@color        =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter      =&gt; the function executed when enter key is pressed
</li>
<li>@onchange     =&gt; the function executed when onchange event is detected
</li>
<li>@autocomplete =&gt; set to false to enable the hiddens passwords trick
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget add an icon to the end of the widget with an slashed eye, this allow to
see the entered password to verify it, in reality, this button swaps the input between
password and text type, allowing to do visible or not the contents of the input
</p>
<p>
Setting the field.autocomplete=false enable the feature that tries to disable the
autocomplete provided by the browsers password adding the autocomplete="new-password"
</p>

</section>
<section id="toc627">
<h3>5.4.28. File constructor helper</h3>

<pre>
saltos.bootstrap.__field.file = field
</pre>

<p>
This function returns an input object of type password, you can pass some arguments as:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-control
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@required  =&gt; this parameter raise the required flag
</li>
<li>@autofocus =&gt; this parameter raise the autofocus flag
</li>
<li>@multiple  =&gt; this parameter raise the multiple flag, intended to select more files at time
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@label     =&gt; this parameter is used as text for the label
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onchange  =&gt; the function executed when onchange event is detected
</li>
</ul>

<p>
Notes:
</p>
<p>
This control allow to select file from the tradicional input, and automatically, send it
to the server using the addfiles action, add a row in the widget's table to show information
about the new file and allow too to delete it using the trash button.
</p>
<p>
To get the data, the controls store each file information in each added row of the table and
in addition, too join all information in a data structure of the input of type file.
</p>
<p>
The difference between this control and the older controls is that they send the files to
the server and store the information related to the file on the server to be processed after
the real upload action.
</p>

</section>
<section id="toc628">
<h3>5.4.29. Link constructor helper</h3>

<pre>
saltos.bootstrap.__field.link = field
</pre>

<p>
This function creates a field similar of text but with the appearance of a link using a button,
the object can receive the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default form-select
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@autofocus =&gt; this parameter raise the autofocus flag
</li>
<li>@label     =&gt; label to be used as text in the contents of the buttons
</li>
<li>@onclick   =&gt; callback function that is executed when the button is pressed
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@collapse  =&gt; a boolean to enable or disable the collapse feature in the button
</li>
<li>@target    =&gt; the id of the element controlled by the collapse feature
</li>
<li>@addbr     =&gt; this special feature adds a void label with a new line tag to align the button with
              the other elements that are label+widget
</li>
</ul>

<p>
Notes:
</p>
<p>
This object is not a real link, it's a button that uses the btn-link class to get the link
appearance
</p>

</section>
<section id="toc629">
<h3>5.4.30. Label constructor helper</h3>

<pre>
saltos.bootstrap.__field.label = field
</pre>

<p>
This function returns a label object, you can pass some arguments as:
</p>

<ul>
<li>@id      =&gt; the id used to set the reference for to the object
</li>
<li>@class   =&gt; allow to add more classes to the default form-label
</li>
<li>@label   =&gt; this parameter is used as text for the label
</li>
<li>@tooltip =&gt; this parameter raise the title flag
</li>
</ul>

</section>
<section id="toc630">
<h3>5.4.31. Image constructor helper</h3>

<pre>
saltos.bootstrap.__field.image = field
</pre>

<p>
This function returns an image object, you can pass some arguments as:
</p>

<ul>
<li>@id      =&gt; the id used to set the reference for to the object
</li>
<li>@class   =&gt; allow to add more classes to the default img-fluid
</li>
<li>@value   =&gt; the value used as src parameter
</li>
<li>@alt     =&gt; this parameter is used as text for the alt parameter
</li>
<li>@tooltip =&gt; this parameter raise the title flag
</li>
<li>@label   =&gt; this parameter is used as text for the label
</li>
<li>@width   =&gt; this parameter is used as width for the image
</li>
<li>@height  =&gt; this parameter is used as height for the image
</li>
<li>@color   =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

</section>
<section id="toc631">
<h3>5.4.32. Excel constructor helper</h3>

<pre>
saltos.bootstrap.__field.excel = field
</pre>

<p>
This function creates and returns an excel object, to do this they use the handsontable library,
currently this library uses a privative license, by this reason, we are using the version 6.2.2
that is the latest release published using the MIT license.
</p>
<p>
This widget can receive the following arguments:
</p>

<ul>
<li>@id             =&gt; the id used to set the reference for to the object
</li>
<li>@class          =&gt; allow to set the class to the div object used to allocate the widget
</li>
<li>@data           =&gt; this parameter must contain a 2D matrix with the data that you want to show
                   in the sheet
</li>
<li>@rowHeaders     =&gt; can be an array with the headers that you want to use instead the def numbers
</li>
<li>@colHeaders     =&gt; can be an array with the headers that you want to use instead the def letters
</li>
<li>@minSpareRows   =&gt; can be a number with the void rows at the end of the sheet
</li>
<li>@contextMenu    =&gt; can be a boolean with the desired value to allow or not the provided
                   context menu of the widget
</li>
<li>@rowHeaderWidth =&gt; can be a number with the width of the headers rows
</li>
<li>@colWidths      =&gt; can be an array with the widths of the headers cols
</li>
<li>@label          =&gt; this parameter is used as text for the label
</li>
<li>@color          =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
Notes:
</p>
<p>
You can get the values after to do changes by accessing to the data of the div used to create
the widget.
</p>
<p>
This widget requires the handsontable library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/handsontable/handsontable.full.min.css
</li>
<li>@lib/handsontable/handsontable.full.min.js
</li>
</ul>

</section>
<section id="toc632">
<h3>5.4.33. Pdfjs constructor helper</h3>

<pre>
saltos.bootstrap.__field.pdfjs = field
</pre>

<p>
This function creates and returns a pdfviewer object, to do this they use the pdf.js library.
</p>

<ul>
<li>@id     =&gt; the id used to set the reference for to the object
</li>
<li>@class  =&gt; allow to set the class to the div object used to allocate the widget
</li>
<li>@src    =&gt; the file that contains the pdf document
</li>
<li>@srcdoc =&gt; the data that contains the pdf document
</li>
<li>@label  =&gt; this parameter is used as text for the label
</li>
<li>@color  =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget requires the pdfjs library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/pdfjs/pdf.min.mjs
</li>
<li>@lib/pdfjs/pdf.worker.min.mjs
</li>
</ul>

<p>
The last file (the worker) is loaded by the library and not by SaltOS, is for this reason
that this file not appear in the next requires
</p>
<p>
Change scale causes issues in scrollTop when pdfjs is used inside a modal, to prevent this,
the two updates to the pdfViewer.currentScaleValue = 'update' will add a control to fix
that modal scrollTop is the same.
</p>

</section>
<section id="toc633">
<h3>5.4.34. Table constructor helper</h3>

<pre>
saltos.bootstrap.__field.table = field
</pre>

<p>
Returns a table using the follow params:
</p>

<ul>
<li>@id       =&gt; the id used to set the reference for to the object
</li>
<li>@class    =&gt; allow to add more classes to the default table table-striped table-hover
</li>
<li>@header   =&gt; array with the header to use
</li>
<li>@data     =&gt; 2D array with the data used to mount the body table
</li>
<li>@footer   =&gt; array with the footer to use
</li>
<li>@checkbox =&gt; add a checkbox in the first cell of each row, for mono or multi selection
</li>
<li>@dropdown =&gt; a boolean value to force the usage of the dropdown feature, void for auto detection
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
<li>@color    =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@nodata   =&gt; text used when no data is found
</li>
<li>@actions  =&gt; each row of the data can contain an array with the actions of each row
</li>
</ul>

<p>
Each action can contain:
</p>

<ul>
<li>@app     =&gt; the application that must be used to check the permissions
</li>
<li>@action  =&gt; the accion that must to be used to check the permissions
</li>
<li>@value   =&gt; the text used as label in the button of the action
</li>
<li>@icon    =&gt; the icon used in the button of the action
</li>
<li>@tooltip =&gt; the tooltip used in the button of the action
</li>
<li>@onclick =&gt; the onclick function that receives as argument the arg to access the action
</li>
</ul>

<p>
Notes:
</p>
<p>
This function defines the yellow color used for the hover and active rows.
</p>
<p>
The header field must be an object with the labels, types, aligns, ..., of each field,
if the header is ommited, then the data will be painted using the default order of the
data without filters, the recomendation is to use header to specify which fields must
to be painted, the order, the type and the alignment.
</p>
<p>
The actions will be added using a dropdown menu if more than one action appear in the
the row data, the idea of this feature is to prevent that the icons uses lot of space
of the row data, and for this reason, it will define the dropdown variable that enables
or not the contraction feature
</p>
<p>
The elements of the data cells can contains an object with the field specification used
to the saltos.bootstrap.field constructor, it is useful to convert some fields to inputs
instead of simple text, too is able to use the type attribute in the header specification
to identify if you want to use a column with some special type as for example, the icons
</p>

</section>
<section id="toc634">
<h3>5.4.35. Alert constructor helper</h3>

<pre>
saltos.bootstrap.__field.alert = field
</pre>

<p>
This component allow to set boxes type alert in the contents, only requires:
</p>

<ul>
<li>@id    =&gt; the id used to set the reference for to the object
</li>
<li>@class =&gt; allow to add more classes to the default alert
</li>
<li>@title =&gt; title used in the body of the card, not used if void
</li>
<li>@text  =&gt; text used in the body of the card, not used if void
</li>
<li>@body  =&gt; this option allow to specify an specific html to the body of the card, intended
          to personalize the body's card
</li>
<li>@close =&gt; boolean to specify if you want to add the dismissible option to the alert
</li>
<li>@label =&gt; this parameter is used as text for the label
</li>
<li>@color =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
Note:
</p>
<p>
I have added the dismissible option using the close attribute, too I have added a modification
for the style to allow the content to use the original size of the alert, in a future, I don't
know if I maintain this or I remove it, but at the moment, this is added by default
</p>

</section>
<section id="toc635">
<h3>5.4.36. Card constructor helper</h3>

<pre>
saltos.bootstrap.__field.card = field
</pre>

<p>
This functions creates a card with a lot of options:
</p>

<ul>
<li>@id     =&gt; the id used to set the reference for to the object
</li>
<li>@image  =&gt; image used as top image in the card, not used if void
</li>
<li>@alt    =&gt; alt text used in the top image if you specify an image
</li>
<li>@header =&gt; text used in the header, not used if void
</li>
<li>@footer =&gt; text used in the footer, not used if void
</li>
<li>@title  =&gt; title used in the body of the card, not used if void
</li>
<li>@text   =&gt; text used in the body of the card, not used if void
</li>
<li>@body   =&gt; this option allow to specify an specific html to the body of the card, intended
           to personalize the body's card
</li>
<li>@label  =&gt; this parameter is used as text for the label
</li>
<li>@color  =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

</section>
<section id="toc636">
<h3>5.4.37. Chart.js constructor helper</h3>

<pre>
saltos.bootstrap.__field.chartjs = field
</pre>

<p>
This function creates a chart using the chart.js library, to do this requires de follow arguments:
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@mode  =&gt; to specify what kind of plot do you want to do: can be bar, line, doughnut, pie
</li>
<li>@data  =&gt; the data used to plot the graph, see the data argument used by the graph.js library
</li>
<li>@label =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Notes:
</p>
<p>
To be more practice and for stetic reasons, I'm adding to all datasets the borderWidth = 1
</p>
<p>
This widget requires the chartjs library and can be loaded automatically using the require
feature:
</p>

<ul>
<li>@lib/chartjs/chart.umd.min.js
</li>
</ul>

</section>
<section id="toc637">
<h3>5.4.38. Tags constructor helper</h3>

<pre>
saltos.bootstrap.__field.tags = field
</pre>

<p>
This function creates a text input that allow to manage tags, each tag is paint as a badge
and each tag can be deleted, the result is stored in a text using a comma separated values
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@value       =&gt; comma separated values
</li>
<li>@datalist    =&gt; array with options for the datalist, used as autocomplete for the text input
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@separator   =&gt; the separator string used to split and join the tags
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
<li>@create      =&gt; allow to specify if the widget can create new items
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget contains a datalist with ajax autoload, this allow to send requests
to the desired path to retrieve the contents of the datalist for the autocomplete,
this request uses an historical keyword that can be retrieved in the json/term
</p>
<p>
This widget uses the tom-select plugin, more info in their project website:
</p>

<ul>
<li><a href="https://tom-select.js.org/">https://tom-select.js.org/</a>
</li>
</ul>

</section>
<section id="toc638">
<h3>5.4.39. One tag constructor helper</h3>

<pre>
saltos.bootstrap.__field.onetag = field
</pre>

<p>
This function creates a select that allow to be used as a text input like a select widget and allow
to create new items writing directly inside of the widget.
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@value       =&gt; the value of this field
</li>
<li>@datalist    =&gt; array with options for the datalist, used as autocomplete for the text input
</li>
<li>@label       =&gt; this parameter is used as text for the label
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@accesskey   =&gt; the key used as accesskey parameter
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
<li>@create      =&gt; allow to specify if the widget can create new items
</li>
</ul>

<p>
Notes:
</p>
<p>
This widget contains a datalist with ajax autoload, this allow to send requests
to the desired path to retrieve the contents of the datalist for the autocomplete,
this request uses an historical keyword that can be retrieved in the json/term
</p>
<p>
This widget uses the tom-select plugin, more info in their project website:
</p>

<ul>
<li><a href="https://tom-select.js.org/">https://tom-select.js.org/</a>
</li>
</ul>

</section>
<section id="toc639">
<h3>5.4.40. Srcdoc helper</h3>

<pre>
saltos.bootstrap.__iframe_srcdoc_helper = html
</pre>

<p>
This function adds the needed environment to the html to improve the
render of the html, this function is intended to be used inside the
iframw widget
</p>

<ul>
<li>@html =&gt; the code that you need to process
</li>
</ul>

</section>
<section id="toc640">
<h3>5.4.41. Datalist helper</h3>

<pre>
saltos.bootstrap.__datalist_helper = datalist
</pre>

<p>
This function is a helper function used by the tags and onetag widgets
and is intended to be used as load function by the tomselect library.
</p>

<ul>
<li>@datalist =&gt; the original datalist that can be an string or an object
</li>
</ul>

</section>
<section id="toc641">
<h3>5.4.42. Value helper</h3>

<pre>
saltos.bootstrap.__value_helper = (value, separator)
</pre>

<p>
This function is a helper function used by the tags widget and is intended
to be used to convert a string into an array using the separator for split.
</p>

<ul>
<li>@value     =&gt; the original value that must to be processed
</li>
<li>@separator =&gt; the separator string used in the split
</li>
</ul>

</section>
<section id="toc642">
<h3>5.4.43. Gallery constructor helper</h3>

<pre>
saltos.bootstrap.__field.gallery = field
</pre>

<p>
This function returns a gallery object, you can pass some arguments as:
</p>

<ul>
<li>@id     =&gt; the id used to set the reference for to the object
</li>
<li>@class  =&gt; allow to add more classes to the default img-fluid
</li>
<li>@label  =&gt; this parameter is used as text for the label
</li>
<li>@images =&gt; the array with images, each image can be a string or object
</li>
<li>@color  =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
This widget requires venobox, masonry and imagesloaded
</p>
<p>
This widget requires the venobox, masonry and imagesloaded libraries and can be loaded
automatically using the require feature:
</p>

<ul>
<li>@lib/venobox/venobox.min.css
</li>
<li>@lib/venobox/venobox.min.js
</li>
<li>@lib/masonry/masonry.pkgd.min.js
</li>
<li>@lib/imagesloaded/imagesloaded.pkgd.min.js
</li>
</ul>

</section>
<section id="toc643">
<h3>5.4.44. Placeholder helper</h3>

<pre>
saltos.bootstrap.__field.placeholder = field
</pre>

<p>
This function returns a grey area that uses all space with the placeholder glow effect
</p>

<ul>
<li>@id     =&gt; id used in the original object, it must be replaced when the data will be available
</li>
<li>@color  =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@height =&gt; the height used as style.height parameter
</li>
<li>@label  =&gt; this parameter is used as text for the label
</li>
</ul>

</section>
<section id="toc644">
<h3>5.4.45. List widget constructor helper</h3>

<pre>
saltos.bootstrap.__field.list = field
</pre>

<p>
Returns a list widget using the follow params:
</p>

<ul>
<li>@id       =&gt; the id used to set the reference for to the object
</li>
<li>@class    =&gt; allow to add more classes to the default list-group
</li>
<li>@onclick  =&gt; this parameter allow to enable or disable the buttons in the list
</li>
<li>@data     =&gt; 2D array with the data used to mount the list
</li>
<li>@truncate =&gt; this parameter add the text-truncate to all texts of the items
</li>
<li>@checkbox =&gt; add a checkbox in the first cell of each row, for mono or multi selection
</li>
<li>@nodata   =&gt; text used when no data is found
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Each item in the data can contain:
</p>

<ul>
<li>@header   =&gt; string with the header to use
</li>
<li>@body     =&gt; string with the data to use
</li>
<li>@footer   =&gt; string with the footer to use
</li>
<li>@onclick  =&gt; the onclick function that receives as argument the url to access the action
</li>
<li>@url      =&gt; this parameter is used as argument for the onclick function
</li>
<li>@active   =&gt; this parameter raise the active flag
</li>
<li>@disabled =&gt; this parameter raise the disabled flag
</li>
<li>@actions  =&gt; this parameter allow to recicle the actions feature of the list action
</li>
<li>@id       =&gt; the id used to set the reference for each checkbox
</li>
</ul>

<p>
As an extra fields, the widget allow to provide multiple texts and icons
</p>

<ul>
<li>@header_text  =&gt; an small text added at the end of the same line of the header
</li>
<li>@header_icon  =&gt; an small icon added at the end of the same line of the header
</li>
<li>@header_color =&gt; the color used in the previous small text and icon
</li>
<li>@body_text    =&gt; an small text added at the end of the same line of the body
</li>
<li>@body_icon    =&gt; an small icon added at the end of the same line of the body
</li>
<li>@body_color   =&gt; the color used in the previous small text and icon
</li>
<li>@footer_text  =&gt; an small text added at the end of the same line of the footer
</li>
<li>@footer_icon  =&gt; an small icon added at the end of the same line of the footer
</li>
<li>@footer_color =&gt; the color used in the previous small text and icon
</li>
</ul>

<p>
Notes:
</p>
<p>
The first onclick parameter is used to raise the construction of the widget and items,
depending of this parameter, the function uses a dir or an ul element to do the list
</p>

</section>
<section id="toc645">
<h3>5.4.46. Tabs widget constructor helper</h3>

<pre>
saltos.bootstrap.__field.tabs = field
</pre>

<p>
Returns a tabs widget using the follow params:
</p>

<ul>
<li>@id    =&gt; the id used to set the reference for to the object
</li>
<li>@items =&gt; 2D array with the data used to mount the tab and content
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Each item in the tabs can contain:
</p>

<ul>
<li>@label    =&gt; string with the text label to use in the tab button
</li>
<li>@content  =&gt; string with the content to be used in the content area
</li>
<li>@active   =&gt; this parameter raise the active flag
</li>
<li>@disabled =&gt; this parameter raise the disabled flag
</li>
</ul>

</section>
<section id="toc646">
<h3>5.4.47. Pills widget constructor helper</h3>

<pre>
saltos.bootstrap.__field.pills = field
</pre>

<p>
Returns a tabs widget using the follow params:
</p>

<ul>
<li>@id    =&gt; the id used to set the reference for to the object
</li>
<li>@items =&gt; 2D array with the data used to mount the tab and content
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Each item in the tabs can contain:
</p>

<ul>
<li>@label    =&gt; string with the text label to use in the tab button
</li>
<li>@content  =&gt; string with the content to be used in the content area
</li>
<li>@active   =&gt; this parameter raise the active flag
</li>
<li>@disabled =&gt; this parameter raise the disabled flag
</li>
</ul>

</section>
<section id="toc647">
<h3>5.4.48. V-Pills widget constructor helper</h3>

<pre>
saltos.bootstrap.__field.vpills = field
</pre>

<p>
Returns a tabs widget using the follow params:
</p>

<ul>
<li>@id    =&gt; the id used to set the reference for to the object
</li>
<li>@items =&gt; 2D array with the data used to mount the tab and content
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Each item in the tabs can contain:
</p>

<ul>
<li>@label    =&gt; string with the text name to use in the tab button
</li>
<li>@content  =&gt; string with the content to be used in the content area
</li>
<li>@active   =&gt; this parameter raise the active flag
</li>
<li>@disabled =&gt; this parameter raise the disabled flag
</li>
</ul>

</section>
<section id="toc648">
<h3>5.4.49. Accordion widget constructor helper</h3>

<pre>
saltos.bootstrap.__field.accordion = field
</pre>

<p>
Returns an accordion widget using the follow params:
</p>

<ul>
<li>@id       =&gt; the id used to set the reference for to the object
</li>
<li>@flush    =&gt; if true, add the accordion-flush to the widget
</li>
<li>@multiple =&gt; if true, allow to have open multiple items at same time
</li>
<li>@items    =&gt; 2D array with the data used to mount the accordion and content
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
</ul>

<p>
Each item in the tabs can contain:
</p>

<ul>
<li>@label    =&gt; string with the text label to use in the tab button
</li>
<li>@content  =&gt; string with the content to be used in the content area
</li>
<li>@active   =&gt; this parameter raise the active flag
</li>
</ul>

</section>
<section id="toc649">
<h3>5.4.50. JS Tree constructor helper</h3>

<pre>
saltos.bootstrap.__field.jstree = field
</pre>

<p>
This function returns a jstree object using the follow parameters:
</p>

<ul>
<li>@id      =&gt; the id used to set the reference for to the object
</li>
<li>@class    =&gt; allow to add more classes to the default table table-striped table-hover
</li>
<li>@open    =&gt; the open boolean that open all nodes
</li>
<li>@onclick =&gt; the callback that receives the id as argument of the selected item
</li>
<li>@nodata   =&gt; text used when no data is found
</li>
<li>@label    =&gt; this parameter is used as text for the label
</li>
<li>@data    =&gt; the data used to make the tree, must to be an array with nodes
</li>
</ul>

<p>
Each node must contain the follow items:
</p>

<ul>
<li>@id       =&gt; the id of the node (used in the onclick callback)
</li>
<li>@text     =&gt; the text of the node
</li>
<li>@children =&gt; an array with the nodes childrens
</li>
</ul>

</section>
<section id="toc650">
<h3>5.4.51. Dropdown constructor helper</h3>

<pre>
saltos.bootstrap.__field.dropdown = field
</pre>

<p>
This function returns a dropdown object, you can pass the follow arguments:
</p>

<ul>
<li>@id        =&gt; the id used by the object
</li>
<li>@class     =&gt; allow to add more classes to the default btn-group
</li>
<li>@disabled  =&gt; this parameter raise the disabled flag
</li>
<li>@label     =&gt; label to be used as text in the contents of the buttons
</li>
<li>@onclick   =&gt; callback function that is executed when the button is pressed
</li>
<li>@split     =&gt; to use a split button instead of single button
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@icon      =&gt; the icon used in the main button
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
<li>@color     =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@menu      =&gt; with this option, you can specify an array with the contents of the dropdown menu
</li>
</ul>

<ul>
<li>@label     =&gt; label of the menu
</li>
<li>@icon      =&gt; icon of the menu
</li>
<li>@disabled  =&gt; this boolean allow to disable this menu entry
</li>
<li>@active    =&gt; this boolean marks the option as active
</li>
<li>@onclick   =&gt; the callback used when the user select the menu
</li>
<li>@divider   =&gt; you can set this boolean to true to convert the element into a divider
</li>
<li>@tooltip   =&gt; this parameter raise the title flag
</li>
<li>@accesskey =&gt; the key used as accesskey parameter
</li>
</ul>

<p>
Notes:
</p>
<p>
The tooltip can not be applied to the dropdown button because causes an internal error,
in this case, the tooltip only are applied in the first button of the split button and
all items of the menu, as brief, tootip only can be applied in all real actions buttons
and not in the dropdown button that opens the real dropdown menu
</p>

</section>
<section id="toc651">
<h3>5.4.52. Private text constructor helper</h3>

<pre>
saltos.bootstrap.__text_helper = field
</pre>

<p>
This function returns an input object of type text, you can pass some arguments as:
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onenter     =&gt; the function executed when enter key is pressed
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
<li>@autosave    =&gt; allow to disable the autosave feature for this field, true by default
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is intended to be used by other helpers of the form_field constructor
</p>

</section>
<section id="toc652">
<h3>5.4.53. Private textarea constructor helper</h3>

<pre>
saltos.bootstrap.__textarea_helper = field
</pre>

<p>
This function returns a textarea object, you can pass the follow arguments:
</p>

<ul>
<li>@id          =&gt; the id used by the object
</li>
<li>@class       =&gt; allow to add more classes to the default form-control
</li>
<li>@placeholder =&gt; the text used as placeholder parameter
</li>
<li>@value       =&gt; the value used as value parameter
</li>
<li>@disabled    =&gt; this parameter raise the disabled flag
</li>
<li>@readonly    =&gt; this parameter raise the readonly flag
</li>
<li>@required    =&gt; this parameter raise the required flag
</li>
<li>@autofocus   =&gt; this parameter raise the autofocus flag
</li>
<li>@tooltip     =&gt; this parameter raise the title flag
</li>
<li>@color       =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@onchange    =&gt; the function executed when onchange event is detected
</li>
<li>@autosave    =&gt; allow to disable the autosave feature for this field, true by default
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is intended to be used by other helpers of the form_field constructor
</p>

</section>
<section id="toc653">
<h3>5.4.54. Private tooltip constructor helper</h3>

<pre>
saltos.bootstrap.__tooltip_helper = obj
</pre>

<p>
This function is intended to enable the tooltip in the object, too it try to do some
extra features: program that only show the tooltip when hover and hide when will get
the focus or get the click event
</p>

<ul>
<li>@obj =&gt; the object that you want to enable the tooltip feature
</li>
</ul>

</section>
<section id="toc654">
<h3>5.4.55. Private tooltip hide helper</h3>

<pre>
saltos.bootstrap.__tooltip_hide = ()
</pre>

<p>
This function is intended to hide all running tooltips, it's used when some widgets
replaces the old elements by new elements, if the tooltip is show when the transition
happens, it's necessary to remove it to prevent a blocking elements in the user
interface.
</p>

</section>
<section id="toc655">
<h3>5.4.56. Label helper</h3>

<pre>
saltos.bootstrap.__label_helper = field
</pre>

<p>
This function is a helper for label field, it is intended to returns the label object
or a void string, this is because if no label is present in the field argument, then
an empty string is returned, in the reception of the result, generally this is added
to an object and it is ignored because an empty string is not an element, this thing
is used by the optimizer to removes the unnecessary envelopment
</p>

<ul>
<li>@field =&gt; the field that contains the label to be added if needed
</li>
</ul>

</section>
<section id="toc656">
<h3>5.4.57. Label Combine</h3>

<pre>
saltos.bootstrap.__label_combine = (field, old)
</pre>

<p>
This function combine the label with the object, to do it, tries to create a new
container object to put the label and the passed object, and then tries to optimize
to detect if the label is void
</p>

<ul>
<li>@field =&gt; the field that contains the label
</li>
<li>@old   =&gt; the object
</li>
</ul>

<p>
Notes:
</p>
<p>
This function acts as helper to add a label by the constructors that not implement
any specific label container, in the other cases, each constructor must to implement
their code because each case is different
</p>

</section>
<section id="toc657">
<h3>5.4.58. Onclick helper</h3>

<pre>
saltos.bootstrap.__onclick_helper = (obj, fn)
</pre>

<p>
This function is a helper function that adds the onclick event listener to the obj
using the correct way to do it, to do it, checks the type of fn.
</p>

<ul>
<li>@obj   =&gt; the object where you want to add the onclick event
</li>
<li>@fn    =&gt; the function that must be executed when onclick
</li>
</ul>

</section>
<section id="toc658">
<h3>5.4.59. Onchange helper</h3>

<pre>
saltos.bootstrap.__onchange_helper = (obj, fn)
</pre>

<p>
This function is a helper function that adds the onchange event listener to the obj
using the correct way to do it, to do it, checks the type of fn.
</p>

<ul>
<li>@obj   =&gt; the object where you want to add the onchange event
</li>
<li>@fn    =&gt; the function that must be executed when onchange
</li>
</ul>

</section>
<section id="toc659">
<h3>5.4.60. Onenter helper</h3>

<pre>
saltos.bootstrap.__onenter_helper = (obj, fn)
</pre>

<p>
This function adds the event and detects the enter key in order to execute fn
</p>

<ul>
<li>@obj =&gt; the object that you want to enable the onenter feature
</li>
<li>@fn  =&gt; the function executed when the onenter is raised
</li>
</ul>

</section>
<section id="toc660">
<h3>5.4.61. Menu constructor helper</h3>

<pre>
saltos.bootstrap.menu = args
</pre>

<p>
This function creates a menu intended to be used in navbar, nabs and tabs
</p>

<ul>
<li>@class =&gt; the class used in the main ul element
</li>
<li>@menu  =&gt; an array with the follow elements:
</li>
</ul>

<ul>
<li>@label             =&gt; label of the menu
</li>
<li>@id                =&gt; id used in the button element
</li>
<li>@icon              =&gt; icon of the menu
</li>
<li>@disabled          =&gt; this boolean allow to disable this menu entry
</li>
<li>@active            =&gt; this boolean marks the option as active
</li>
<li>@onclick           =&gt; the callback used when the user select the menu
</li>
<li>@dropdown_menu_end =&gt; this trick allow to open the dropdown menu from the end to start
</li>
<li>@menu              =&gt; with this option, you can specify an array with the contents of the dropdown menu
</li>
</ul>

<ul>
<li>@label    =&gt; label of the menu
</li>
<li>@id       =&gt; id used in the button element
</li>
<li>@icon     =&gt; icon of the menu
</li>
<li>@disabled =&gt; this boolean allow to disable this menu entry
</li>
<li>@active   =&gt; this boolean marks the option as active
</li>
<li>@onclick  =&gt; the callback used when the user select the menu
</li>
<li>@divider  =&gt; you can set this boolean to true to convert the element into a divider
</li>
</ul>

</section>
<section id="toc661">
<h3>5.4.62. Navbar constructor helper</h3>

<pre>
saltos.bootstrap.navbar = args
</pre>

<p>
This component creates a navbar intended to be used as header
</p>

<ul>
<li>@id    =&gt; the id used by the object
</li>
<li>@brand =&gt; contains an object with the label, image, width and height to be used
</li>
<li>@color =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@pos   =&gt; position of the navbar, can be fixed-top, fixed-bottom, sticky-top, sticky-bottom
</li>
<li>@class =&gt; class added to the navbar item
</li>
</ul>

<ul>
<li>@label  =&gt; text used in the brand
</li>
<li>@image  =&gt; filename of the brand image
</li>
<li>@alt    =&gt; alt text used in the brand image
</li>
<li>@width  =&gt; width of the brand image
</li>
<li>@height =&gt; height of the brand image
</li>
<li>@class  =&gt; class added to the navbar-brand item
</li>
</ul>

<ul>
<li>@items =&gt; contains an array with the objects that will be added to the collapse
</li>
</ul>

<p>
Notes:
</p>
<p>
If you want to use an image that uses all height of the navbar, you can set the class and
brand.class to py-0, the main idea is to use a combination of paddings with a brand to
gets a navbar of 56px of height
</p>

</section>
<section id="toc662">
<h3>5.4.63. Modal constructor helper object</h3>

<pre>
saltos.bootstrap.__modal = {};
</pre>

<p>
This object is used to store the element and the instance of the modal
</p>

</section>
<section id="toc663">
<h3>5.4.64. Modal constructor helper</h3>

<pre>
saltos.bootstrap.modal = args
</pre>

<p>
This function creates a bootstrap modal and open it, offers two ways of usage:
</p>
<p>
1) you can pass a string to get a quick action
</p>

<ul>
<li>@close   =&gt; this string close the current modal
</li>
<li>@isopen  =&gt; this string is used to check if some modal is open at the moment
</li>
</ul>

<p>
2) you can pass an object with the follow items, intended to open a new modal
</p>

<ul>
<li>@id      =&gt; the id used by the object
</li>
<li>@class   =&gt; allow to add more classes to the default dialog
</li>
<li>@title   =&gt; title used by the modal
</li>
<li>@close   =&gt; text used in the close button for aria purposes
</li>
<li>@body    =&gt; the content used in the modal's body
</li>
<li>@footer  =&gt; the content used in the modal's footer
</li>
<li>@static  =&gt; forces the modal to be static (prevent close by clicking outside the modal or
            by pressing the escape key)
</li>
<li>@color   =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
Returns a boolean that indicates if the modal can be open or not
</p>
<p>
Notes:
</p>
<p>
This modal will be destroyed (instance and element) when it closes, too is important
to undestand that only one modal is allowed at each moment.
</p>
<p>
Body and footer allow to use a string containing a html fragment or an object, and
the footer too detects that the string contains something different to void, and if
void content is detected, then the footer is removed.
</p>
<p>
As an extra bonus, this widget has some tricks to improve the style of the footer, as
you can see in the modal-footer part by removing the border and the top padding.
</p>

</section>
<section id="toc664">
<h3>5.4.65. Offcanvas constructor helper object</h3>

<pre>
saltos.bootstrap.__offcanvas = {};
</pre>

<p>
This object is used to store the element and the instance of the offcanvas
</p>

</section>
<section id="toc665">
<h3>5.4.66. Offcanvas constructor helper</h3>

<pre>
saltos.bootstrap.offcanvas = args
</pre>

<p>
This function creates a bootstrap offcanvas and open it, offers two ways of usage:
</p>
<p>
1) you can pass a string to get a quick action
</p>

<ul>
<li>@close  =&gt; this string close the current offcanvas
</li>
<li>@isopen =&gt; this string is used to check if some offcanvas is open at the moment
</li>
</ul>

<p>
2) you can pass an object with the follow items, intended to open a new offcanvas
</p>

<ul>
<li>@id       =&gt; the id used by the object
</li>
<li>@pos      =&gt; allow to specify the position of the offcanvac (start, end, top or bottom)
</li>
<li>@title    =&gt; title used by the offcanvas
</li>
<li>@close    =&gt; text used in the close button for aria purposes
</li>
<li>@body     =&gt; the content used in the offcanvas's body
</li>
<li>@static   =&gt; forces the offcanvas to be static (prevent close by clicking outside the
             offcanvas or by pressing the escape key)
</li>
<li>@backdrop =&gt; to configure the backdrop feature (true or false)
</li>
<li>@keyboard =&gt; to configure the keyboard feature (true or false)
</li>
<li>@color    =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
<li>@resize   =&gt; the resize allow to the offcanvas to resize the contents of the screen to prevent
             offcanvas from hiding things
</li>
</ul>

<p>
Returns a boolean that indicates if the offcanvas can be open or not
</p>
<p>
Notes:
</p>
<p>
This offcanvas will be destroyed (instance and element) when it closes, too is important
to undestand that only one offcanvas is allowed at each moment.
</p>
<p>
Body allow to use a string containing a html fragment or an object, as the modal body.
</p>
<p>
The resize option only works with start and end positions, too you can use left or right
as replacements for start and end positions, the resize will be disabled in top or bottom
positions.
</p>

</section>
<section id="toc666">
<h3>5.4.67. Toast constructor helper</h3>

<pre>
saltos.bootstrap.toast = args
</pre>

<p>
This function creates a bootstrap toast and show it, and can accept the follow params:
</p>

<ul>
<li>@id       =&gt; the id used by the object
</li>
<li>@class    =&gt; allow to add more classes to the default toast
</li>
<li>@title    =&gt; title used by the toast
</li>
<li>@subtitle =&gt; small text used by the toast
</li>
<li>@close    =&gt; text used in the close button for aria purposes
</li>
<li>@body     =&gt; the content used in the toast's body
</li>
<li>@color    =&gt; the color of the widget (primary, secondary, success, danger, warning, info, none)
</li>
</ul>

<p>
Returns a boolean that indicates if the toast can be created (see the hash note)
</p>
<p>
Notes:
</p>
<p>
The toast will be destroyed (instance and element) when it closes.
</p>
<p>
All toasts are added to a toast-container placed in the body of the document, this container
is created automatically if it not exists when the first toast need it.
</p>
<p>
Each toast includes a hash to prevent the creation of repeated toasts.
</p>
<p>
Body allow to use a string containing a html fragment or an object, as the modal body.
</p>

</section>
<section id="toc667">
<h3>5.4.68. Accesskey listener</h3>

<pre>
window.addEventListener('keydown', event
</pre>

<p>
This function is intended to improve the default accesskey in the object by
adding features suck as combinations of keys like ctrl+shift+f or ctrl+delete
</p>

<ul>
<li>@obj =&gt; the object that you want to enable the accesskey feature
</li>
</ul>

</section>
<section id="toc668">
<h3>5.4.69. Window match media</h3>

<pre>
saltos.bootstrap.window_match_media = window.matchMedia('(prefers-color-scheme: dark)');
</pre>

<p>
This function returns an object intended to monitorize the bs_theme
</p>

</section>
<section id="toc669">
<h3>5.4.70. Set data_bs_theme</h3>

<pre>
saltos.bootstrap.set_data_bs_theme = e
</pre>

<p>
This function sets the data_bs_theme attribute to enable or disable the dark bs theme
</p>

</section>
<section id="toc670">
<h3>5.4.71. Set bs theme</h3>

<pre>
saltos.bootstrap.set_bs_theme = theme
</pre>

<p>
This function sets the bs theme
</p>

<ul>
<li>@theme =&gt; Can be auto, light or dark
</li>
</ul>

</section>
<section id="toc671">
<h3>5.4.72. Set css theme</h3>

<pre>
saltos.bootstrap.set_css_theme = theme
</pre>

<p>
This function sets the css theme
</p>

<ul>
<li>@theme =&gt; Can be default or one of the bootswatch themes
</li>
</ul>

</section>
<section id="toc672">
<h3>5.4.73. Get bs theme</h3>

<pre>
saltos.bootstrap.get_bs_theme = ()
</pre>

<p>
Retrieve the bs_theme stored in the localStorage
</p>

</section>
<section id="toc673">
<h3>5.4.74. Get css theme</h3>

<pre>
saltos.bootstrap.get_css_theme = ()
</pre>

<p>
Retrieve the css_theme stored in the localStorage
</p>

</section>
</section>
<section id="toc674">
<h2>5.5. Common helper module</h2>

<pre>
web/js/common.js
</pre>

<p>
This fie contains useful functions related to the common applications
</p>

<section id="toc675">
<h3>5.5.1. Common helper object</h3>

<pre>
saltos.common = {};
</pre>

<p>
This object stores all application functions and data
</p>

</section>
<section id="toc676">
<h3>5.5.2. Profile screen</h3>

<pre>
saltos.common.profile = ()
</pre>

<p>
This function allow to open the profile screen in a offcanvas widget
</p>

</section>
<section id="toc677">
<h3>5.5.3. Help screen</h3>

<pre>
saltos.common.help = ()
</pre>

<p>
This function allow to open the help screen in a modal widget
</p>

</section>
<section id="toc678">
<h3>5.5.4. Logout feature</h3>

<pre>
saltos.common.logout = async ()
</pre>

<p>
This function execute the deauthtoken action and jump to the login screen
</p>

</section>
<section id="toc679">
<h3>5.5.5. Filter screen</h3>

<pre>
saltos.common.filter = ()
</pre>

<p>
This function allow to open the filter screen in a offcanvas widget
</p>

</section>
<section id="toc680">
<h3>5.5.6. Download helper</h3>

<pre>
saltos.common.download = file
</pre>

<p>
This function allow to download files, to do it, make the ajax request and
using the base64 data response, sets the href of an anchor created dinamically
to emulate the download action
</p>

<ul>
<li>@file =&gt; the file data used to identify the desired file in the backend part
</li>
</ul>

</section>
<section id="toc681">
<h3>5.5.7. Delete helper</h3>

<pre>
saltos.common.delete = file
</pre>

<p>
This function allow to remove the files and notes in the files and notes widgets
</p>

<ul>
<li>@file =&gt; the file or note string path
</li>
</ul>

</section>
<section id="toc682">
<h3>5.5.8. Version common helper</h3>

<pre>
saltos.common.version = ()
</pre>

<p>
This function open the version widget
</p>

</section>
<section id="toc683">
<h3>5.5.9. Log common helper</h3>

<pre>
saltos.common.log = ()
</pre>

<p>
This function open the log widget
</p>

</section>
<section id="toc684">
<h3>5.5.10. Edit common helper</h3>

<pre>
saltos.common.edit = ()
</pre>

<p>
This function open the edit screen
</p>

</section>
<section id="toc685">
<h3>5.5.11. Create common helper</h3>

<pre>
saltos.common.create = ()
</pre>

<p>
This function open the create screen
</p>

</section>
<section id="toc686">
<h3>5.5.12. Viewpdf common helper</h3>

<pre>
saltos.common.viewpdf = ()
</pre>

<p>
This function open the viewpdf widget
</p>

</section>
<section id="toc687">
<h3>5.5.13. Remove common helper</h3>

<pre>
saltos.common.__remove_helper = id
</pre>

<p>
This function works as helper for the allfiles and allnotes functions and
tries to detect if the table identified by the argument contains something
</p>

<ul>
<li>@id =&gt; the id of the table
</li>
</ul>

</section>
<section id="toc688">
<h3>5.5.14. Allfiles common helper</h3>

<pre>
saltos.common.allfiles = ()
</pre>

<p>
This function remove the allfiles table if it is void
</p>

</section>
<section id="toc689">
<h3>5.5.15. Allnotes common helper</h3>

<pre>
saltos.common.allnotes = ()
</pre>

<p>
This function remove the allnotes table if it is void
</p>

</section>
</section>
<section id="toc690">
<h2>5.6. Core helper module</h2>

<pre>
web/js/core.js
</pre>

<p>
This fie contains useful functions related to the core application, provides the low level features
for manage errors, logs, manipulates html and DOM objects, manage ajax requests, and more things
</p>

<section id="toc691">
<h3>5.6.1. Core helper object</h3>

<pre>
saltos.core = {};
</pre>

<p>
This object stores all core functions and data
</p>

</section>
<section id="toc692">
<h3>5.6.2. Error management</h3>

<pre>
saltos.core.adderror = async (message, source, lineno, colno, stack)
</pre>

<p>
This function allow to SaltOS to log in server the javascript errors produced in the
client's browser
</p>

<ul>
<li>@message =&gt; the error message
</li>
<li>@source  =&gt; the filename where the error was triggered
</li>
<li>@lineno  =&gt; the line number where the error was triggered
</li>
<li>@colno   =&gt; the column number where the error was triggered
</li>
<li>@stack   =&gt; the backtrace stack of all execution until the error
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is called from some addEventListeners, the original was the error event
but when change the ajax requests from xhr to fetch to setup the proxy feature, the
errors was mapped by the event unhandledrejection.
</p>

</section>
<section id="toc693">
<h3>5.6.3. Old error handler</h3>

<pre>
window.addEventListener('error', event
</pre>

<p>
This code allow to capture the old errors triggered outside the fetch requests
</p>

</section>
<section id="toc694">
<h3>5.6.4. New error handler</h3>

<pre>
window.addEventListener('unhandledrejection', event
</pre>

<p>
This code allow to capture the new errors triggered inside the fetch requests
</p>

</section>
<section id="toc695">
<h3>5.6.5. Log management</h3>

<pre>
saltos.core.addlog = msg
</pre>

<p>
This function allow to send messages to the addlog of the server side, requires an argument:
</p>

<ul>
<li>@msg =&gt; the message that do you want to log on the server log file
</li>
</ul>

</section>
<section id="toc696">
<h3>5.6.6. Check params</h3>

<pre>
saltos.core.check_params = (obj, params, value = '')
</pre>

<p>
This function allow to prepare parameters to be used by other functions, the main idea
is that the other functions can access to properties of an object without getting errors
caused by the nonexistence, to do this, checks for the existence of all params in the obj
and if some param is not found, then define it using the default value passed:
</p>

<ul>
<li>@obj    =&gt; the object that contains the arguments, for example
</li>
<li>@params =&gt; an array with the arguments that must to exists
</li>
<li>@value  =&gt; the default value used if an argument doesn't exists
</li>
</ul>

</section>
<section id="toc697">
<h3>5.6.7. UniqID</h3>

<pre>
saltos.core.uniqid = ()
</pre>

<p>
This function generates an unique id formed by the word 'id' and a number that can take
values between 0 and 999999, useful when some widget requires an id and the user don't
provide it to the widget constructor
</p>

</section>
<section id="toc698">
<h3>5.6.8. When visible</h3>

<pre>
saltos.core.when_visible = (obj, fn, args)
</pre>

<p>
This function allow to execute some code when the object is visible, useful for third part
widgets as ckeditor or codemirror that requires a rendered environemt to initialize their
code and paint the widget correctly
</p>

<ul>
<li>@obj  =&gt; the object that do you want to monitorize the visibility
</li>
<li>@fn   =&gt; the callback that you want to execute
</li>
<li>@args =&gt; the arguments passed to the callback when execute it
</li>
</ul>

<p>
Notes:
</p>
<p>
As an extra feature, the object can be an string containing the id of the object, intended
to be used when the object not exists at the moment to call this function
</p>

</section>
<section id="toc699">
<h3>5.6.9. Get keycode</h3>

<pre>
saltos.core.get_keycode = event
</pre>

<p>
This function allow to get the keycode of a keyboard event detecting the browser
</p>

<ul>
<li>@event =&gt; the event that contains the keyboard data
</li>
</ul>

</section>
<section id="toc700">
<h3>5.6.10. Get keyname</h3>

<pre>
saltos.core.get_keyname = event
</pre>

<p>
This function allow to get the keyname of a keyboard event detecting the browser
</p>

<ul>
<li>@event =&gt; the event that contains the keyboard data
</li>
</ul>

</section>
<section id="toc701">
<h3>5.6.11. HTML builder</h3>

<pre>
saltos.core.html = (...args)
</pre>

<p>
This function allow to create an DOM fragment from a string that contains html code, can
work with one or two arguments:
</p>

<ul>
<li>@type =&gt; the type used when create the container element
</li>
<li>@html =&gt; contains the html code that you want to use as template
</li>
</ul>

<p>
The main use is only using the html argument and omiting the type, in this case, the
type used will be a div, but if you want to create a fragment of object, for example
as tr or td, you need to specify that the coontainer type used to create the objects
must to be a table or tr, is you don't specify the type, the div container creates
a breaked portion of the element and they don't works as expected because the DOM
builded is bad, you can see this problem in action when work with tables and try to
create separate portions of the table as trs or tds.
</p>

</section>
<section id="toc702">
<h3>5.6.12. Ajax helper array</h3>

<pre>
saltos.core.__ajax = [];
</pre>

<p>
This array allow to the ajax feature to manage the active request, intended to abort
if it is needed when onhashchange.
</p>

</section>
<section id="toc703">
<h3>5.6.13. AJAX</h3>

<pre>
saltos.core.ajax = args
</pre>

<p>
This function allow to use ajax using the same form that with jQuery without jQuery
</p>

<ul>
<li>@url          =&gt; url of the ajax call
</li>
<li>@data         =&gt; data used in the body of the request
</li>
<li>@method       =&gt; the method of the request (can be GET or POST, GET by default)
</li>
<li>@success      =&gt; callback function for the success action (optional)
</li>
<li>@error        =&gt; callback function for the error action (optional)
</li>
<li>@abort        =&gt; callback function for the abort action (optional)
</li>
<li>@abortable    =&gt; boolean to enable or disable the abort feature (false by default)
</li>
<li>@content_type =&gt; the content-type that you want to use in the transfer
</li>
<li>@proxy        =&gt; add the Proxy header with the value passed, intended to be used by the SaltOS PROXY
</li>
<li>@token        =&gt; add the Token header with the value passed, intended to be used by the SaltOS API
</li>
<li>@lang         =&gt; add the Lang header with the value passed, intended to be used by the SaltOS API
</li>
<li>@headers      =&gt; an object with the headers that you want to send
</li>
</ul>

<p>
The main idea of this function is to abstract the usage of the XMLHttpRequest in a simple
way as jQuery do but without using jQuery.
</p>
<p>
The catch part is intended to control the errors caused during the ajax execution,
in this case is important to understand that the catch can be triggered by errors
caused by network errors or by other cases like a code error, a throw new error or
something similar like this, to fix it, the error and abort arguments will be used
only when abortError or typeError appear in the error.name
</p>

</section>
<section id="toc704">
<h3>5.6.14. Fix key</h3>

<pre>
saltos.core.fix_key = arg
</pre>

<p>
This function is intended to fix the keys of the objects, this is caused because you can not
have 2 repeated keys in an object, to have more entries with the same name, SaltOS add a suffix
by adding #num, with this trick, SaltOS is able to process XML files with the same node name
and convert it to an array structure, and when convert this to json, the same problem appear and
for this reason, exists this function here
</p>

<ul>
<li>@arg =&gt; can be an string or an array of strings and returns the same structure with the keys fixed
</li>
</ul>

</section>
<section id="toc705">
<h3>5.6.15. Copy object</h3>

<pre>
saltos.core.copy_object = arg
</pre>

<p>
This function is intended to do copies of objects using as intermediate a json file
</p>

<ul>
<li>@arg =&gt; the object that you want to copy
</li>
</ul>

</section>
<section id="toc706">
<h3>5.6.16. Optimizer object</h3>

<pre>
saltos.core.optimize = obj
</pre>

<p>
This function checks an object to see if only contains one children and in this case, returns
directly the children instead of the original object, otherwise nothing to do and returns the
original object
</p>

<ul>
<li>@obj =&gt; the object to check and optimize
</li>
</ul>

</section>
<section id="toc707">
<h3>5.6.17. Require helper array</h3>

<pre>
saltos.core.__require = {};
</pre>

<p>
This array allow to the require feature to control the loaded libraries
</p>

</section>
<section id="toc708">
<h3>5.6.18. Require feature</h3>

<pre>
saltos.core.require = (files, callback)
</pre>

<p>
This function allow the other functions to declare their requirements to previously load the
desired file intead of create the object and throwing an error.
</p>

<ul>
<li>@file =&gt; the file desired to be loaded
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is intended to load styles (css files) or javacript code (js files), in each
case, they uses a different technique, for css the load is asynchronous and for javascript
the load will be synchronous.
</p>

</section>
<section id="toc709">
<h3>5.6.19. Eval Bool</h3>

<pre>
saltos.core.eval_bool = arg
</pre>

<p>
This function returns a boolean depending on the input evaluation, the main idea
is to get an string, for example, and determine if must be considered true or false
otherwise returns the original argument and send a log message to the console.
</p>
<p>
The valid inputs are the strings one, zero, void, true, false, on, off, yes and no
</p>

<ul>
<li>@arg =&gt; the value that do you want to evaluates as boolean
</li>
</ul>

<p>
Notes:
</p>
<p>
This function is the same feature that the same function proviced by the backend by the
php/autoload/xml2array.php file with more javascript details as type detection.
</p>

</section>
<section id="toc710">
<h3>5.6.20. toString function</h3>

<pre>
saltos.core.toString = arg
</pre>

<p>
This function tries to convert to string from any other formats as boolean,
number, null, undefined or other type.
</p>

</section>
<section id="toc711">
<h3>5.6.21. Is attr value</h3>

<pre>
saltos.core.is_attr_value = data
</pre>

<p>
This function return true if the data argument is an object with #attr and value
</p>

<ul>
<li>@data =&gt; the data that wants to check
</li>
</ul>

</section>
<section id="toc712">
<h3>5.6.22. Join attr value</h3>

<pre>
saltos.core.join_attr_value = data
</pre>

<p>
This function return an object that contains all elements of the #attr and value
</p>

<ul>
<li>@data =&gt; the data that wants to join
</li>
</ul>

<p>
Notes:
</p>
<p>
If the content of value is only a string, then the result will be an array with the
elements of the #attr joined with a new element with the name value and with the contents
of the original value.
</p>

</section>
<section id="toc713">
<h3>5.6.23. Encode Bar Chars</h3>

<pre>
saltos.core.encode_bad_chars = (cad, pad = '_', extra = '')
</pre>

<p>
This function tries to replace accender chars and other extended chars into
an ascii chars, to do it, they define an array with the pairs of chars to
do a quick replace, too is converted all to lower and are removed all chars
that are out of range (valid range are from 0-9 and from a-z), the function
allow to specify an extra parameter to add extra chars that must to be
allowed in the output, all other chars will be converted to the padding
argument, as a bonus extra, all padding repetitions will be removed to
only allow one pading char at time
</p>

<ul>
<li>@cad   =&gt; the input string to encode
</li>
<li>@pad   =&gt; the padding char using to replace the bar chars
</li>
<li>@extra =&gt; the list of chars allowed to appear in the output
</li>
</ul>

</section>
<section id="toc714">
<h3>5.6.24. Prepare Words</h3>

<pre>
saltos.core.prepare_words = (cad, pad = ' ')
</pre>

<p>
This function allow to prepare words removing repetitions in the padding char
</p>

<ul>
<li>@cad =&gt; the input string to prepare
</li>
<li>@pad =&gt; the padding char using to replace the repetitions
</li>
</ul>

<p>
Notes:
</p>
<p>
Apart of remove repetitions of the padding char, the function will try to
remove padding chars in the start and in the end of the string
</p>

</section>
<section id="toc715">
<h3>5.6.25. Main core code</h3>

<pre>
document.addEventListener('DOMContentLoaded', event
</pre>

<p>
This is the code that must to be executed to initialize all requirements of this module
</p>

</section>
<section id="toc716">
<h3>5.6.26. Proxy feature</h3>

<pre>
saltos.core.proxy = msg
</pre>

<p>
This function is intended to send messages to the proxy feature
</p>

</section>
<section id="toc717">
<h3>5.6.27. Online sync</h3>

<pre>
window.addEventListener('online', event
</pre>

<p>
This function send a sync message to the proxy when navigator detects an online change
</p>

</section>
<section id="toc718">
<h3>5.6.28. Get code from file and line</h3>

<pre>
saltos.core.__get_code_from_file_and_line = (file = 'unknown', line = 'unknown')
</pre>

<p>
This function returns the string that contains the PATHINFO_FILENAME and the line to idenfify
the launcher of an error, for example
</p>

<ul>
<li>@file =&gt; filename used to obtain the first part of the code
</li>
<li>@line =&gt; line used to construct the last part of the code
</li>
</ul>

</section>
<section id="toc719">
<h3>5.6.29. Timestamp helper</h3>

<pre>
saltos.core.timestamp = (offset = 0)
</pre>

<p>
This function is a helper to obtain the timestamp in seconds with the desidet offset
</p>

<ul>
<li>@offset =&gt; offset added to the timestamp, negative to go back in the time
</li>
</ul>

</section>
<section id="toc720">
<h3>5.6.30. Human Size</h3>

<pre>
saltos.core.human_size = (size, pre = '', post = '')
</pre>

<p>
Return the human size (G, M, K or original value)
</p>

<ul>
<li>@size  =&gt; the size that you want convert to human size
</li>
<li>@pre  =&gt; string added between the number and the unit letter
post  =&gt; string added after the unit letter at the end
</li>
</ul>

</section>
<section id="toc721">
<h3>5.6.31. Check network</h3>

<pre>
saltos.core.check_network = async ()
</pre>

<p>
This function checks the network state by sending a request over https and http
channels, this is usefull to detect certificate issues
</p>
<p>
Notes:
</p>
<p>
The first version uses fetch to the img/logo_saltos.svg but for securiry reasons,
the browser never send the request to http from https or viceversa, the unique trick
that I found to do it is to open a new window for each protocol and wait for the
expected result
</p>

</section>
<section id="toc722">
<h3>5.6.32. Is Number</h3>

<pre>
saltos.core.is_number = str
</pre>

<p>
This function checks that the str contains a valid number and is finite
</p>
<p>
str =&gt; the string to validate
</p>

</section>
</section>
<section id="toc723">
<h2>5.7. Driver module</h2>

<pre>
web/js/driver.js
</pre>

<p>
Intended to be used as an abstraction layer to allow multiple screens configurations
</p>

<section id="toc724">
<h3>5.7.1. Driver object</h3>

<pre>
saltos.driver = {};
</pre>

<p>
This object stores the functions used by the layouts widgets and must work with all screens
</p>

</section>
<section id="toc725">
<h3>5.7.2. Driver init</h3>

<pre>
saltos.driver.init = async arg
</pre>

<p>
This function initialize the driver screen, detects and replaces the styles, compute
the paddings checking the contents of the top and bottom layouts, initialize the filter
and the autosave features, and executes the specific init function.
</p>

<ul>
<li>@arg =&gt; the desired action to do
</li>
</ul>

</section>
<section id="toc726">
<h3>5.7.3. Driver open</h3>

<pre>
saltos.driver.open = arg
</pre>

<p>
This function launch the specific open action for the screen type
</p>

<ul>
<li>@arg =&gt; this argument is bypassed to the destination
</li>
</ul>

</section>
<section id="toc727">
<h3>5.7.4. Driver close</h3>

<pre>
saltos.driver.close = arg
</pre>

<p>
This function close the current app using the history back if it is available,
otherwise use the specific close action for the screen type
</p>

<ul>
<li>@arg =&gt; this argument forces to execute the specific driver close
</li>
</ul>

</section>
<section id="toc728">
<h3>5.7.5. Driver cancel</h3>

<pre>
saltos.driver.cancel = arg
</pre>

<p>
This function works in conjuntion with the autosave module, and checks if the
current screen contains new data, in this case ask to the user if they want
continue.
</p>
<p>
This function checks that modal is close, otherwise an old confirm is used
to ask to the user.
</p>
<p>
If the user decides continue to close, then the saltos.driver.close is executed
bypassing the arg argument.
</p>

<ul>
<li>@arg =&gt; this argument is bypassed to the destination
</li>
</ul>

</section>
<section id="toc729">
<h3>5.7.6. Driver search</h3>

<pre>
saltos.driver.search = arg
</pre>

<p>
This function implement the search feature associated to tables and lists
using the filters fields
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc730">
<h3>5.7.7. Driver search</h3>

<pre>
saltos.driver.reset = arg
</pre>

<p>
This function implement the reset feature associated to the filters fields
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc731">
<h3>5.7.8. Driver more</h3>

<pre>
saltos.driver.more = arg
</pre>

<p>
This function implement the more feature associated to tables and lists
using the filters fields
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc732">
<h3>5.7.9. Driver insert</h3>

<pre>
saltos.driver.insert = arg
</pre>

<p>
This function implement the insert feature associated to the current app fields
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc733">
<h3>5.7.10. Driver update</h3>

<pre>
saltos.driver.update = arg
</pre>

<p>
This function implement the update feature associated to the current app fields
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc734">
<h3>5.7.11. Driver delete</h3>

<pre>
saltos.driver.delete = async arg
</pre>

<p>
This function implement the delete feature associated to the current app register
</p>

<ul>
<li>@arg =&gt; this field can contain the hash of the deletion
</li>
</ul>

</section>
<section id="toc735">
<h3>5.7.12. Driver placeholder</h3>

<pre>
saltos.driver.placeholder = arg
</pre>

<p>
This function sets a placeholder object in the element identified by the arg
</p>

<ul>
<li>@arg =&gt; the id of the element where do you want to put the placeholder
</li>
</ul>

</section>
<section id="toc736">
<h3>5.7.13. Driver styles</h3>

<pre>
saltos.driver.styles = (arg = 'xl')
</pre>

<p>
This function returns the style object that contains the tricks to do
that the screen with verticals scrolls runs as expected
</p>

<ul>
<li>@arg =&gt; the break-size used in the driver screen, xl as default
</li>
</ul>

</section>
<section id="toc737">
<h3>5.7.14. Driver search if needed</h3>

<pre>
saltos.driver.search_if_needed = arg
</pre>

<p>
This function launch the saltos.driver.search action if the action is the
same before and after the setTimeout, too is launched if action source and
the action destination complains with some pair of actions defined in the
arg argument.
</p>

<ul>
<li>@arg =&gt; an array with pairs of actions
</li>
</ul>

</section>
<section id="toc738">
<h3>5.7.15. Driver internal object</h3>

<pre>
saltos.driver.__types = {};
</pre>

<p>
This object stores the functions used by the main driver
</p>

</section>
<section id="toc739">
<h3>5.7.16. Driver type1 object</h3>

<pre>
saltos.driver.__types.type1 = {};
</pre>

<p>
This object stores the functions used by the type1 driver
</p>

</section>
<section id="toc740">
<h3>5.7.17. Driver type1 template</h3>

<pre>
saltos.driver.__types.type1.template = arg
</pre>

<p>
This function returns the type1 template to mount the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc741">
<h3>5.7.18. Driver type1 init</h3>

<pre>
saltos.driver.__types.type1.init = arg
</pre>

<p>
This function initialize the type1 driver screen for the arg requested
</p>

<ul>
<li>@arg =&gt; the desired action to do
</li>
</ul>

</section>
<section id="toc742">
<h3>5.7.19. Driver type1 open</h3>

<pre>
saltos.driver.__types.type1.open = arg
</pre>

<p>
This function open a new window
</p>

<ul>
<li>@arg =&gt; the desired url
</li>
</ul>

</section>
<section id="toc743">
<h3>5.7.20. Driver type1 close</h3>

<pre>
saltos.driver.__types.type1.close = arg
</pre>

<p>
This function close the window
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc744">
<h3>5.7.21. Driver type2 object</h3>

<pre>
saltos.driver.__types.type2 = {};
</pre>

<p>
This object stores the functions used by the type2 driver
</p>

</section>
<section id="toc745">
<h3>5.7.22. Driver type2 template</h3>

<pre>
saltos.driver.__types.type2.template = arg
</pre>

<p>
This function returns the type2 template to mount the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc746">
<h3>5.7.23. Driver type2 init</h3>

<pre>
saltos.driver.__types.type2.init = arg
</pre>

<p>
This function initialize the type2 driver screen for the arg requested
</p>

<ul>
<li>@arg =&gt; the desired action to do
</li>
</ul>

</section>
<section id="toc747">
<h3>5.7.24. Driver type2 open</h3>

<pre>
saltos.driver.__types.type2.open = arg
</pre>

<p>
This function open a new content
</p>

<ul>
<li>@arg =&gt; the desired url
</li>
</ul>

</section>
<section id="toc748">
<h3>5.7.25. Driver type2 close</h3>

<pre>
saltos.driver.__types.type2.close = arg
</pre>

<p>
This function close the two zone of the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc749">
<h3>5.7.26. Driver type3 object</h3>

<pre>
saltos.driver.__types.type3 = {};
</pre>

<p>
This object stores the functions used by the type3 driver
</p>

</section>
<section id="toc750">
<h3>5.7.27. Driver type3 template</h3>

<pre>
saltos.driver.__types.type3.template = arg
</pre>

<p>
This function returns the type3 template to mount the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc751">
<h3>5.7.28. Driver type3 init</h3>

<pre>
saltos.driver.__types.type3.init = arg
</pre>

<p>
This function initialize the type3 driver screen for the arg requested
</p>

<ul>
<li>@arg =&gt; the desired action to do
</li>
</ul>

</section>
<section id="toc752">
<h3>5.7.29. Driver type3 open</h3>

<pre>
saltos.driver.__types.type3.open = saltos.driver.__types.type2.open;
</pre>

<p>
This function bypass to the type2 driver
</p>

<ul>
<li>@arg =&gt; the desired url
</li>
</ul>

</section>
<section id="toc753">
<h3>5.7.30. Driver type3 close</h3>

<pre>
saltos.driver.__types.type3.close = arg
</pre>

<p>
This function close the three and/or two zone of the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc754">
<h3>5.7.31. Driver type4 object</h3>

<pre>
saltos.driver.__types.type4 = {};
</pre>

<p>
This object stores the functions used by the type4 driver
</p>

</section>
<section id="toc755">
<h3>5.7.32. Driver type4 template</h3>

<pre>
saltos.driver.__types.type4.template = arg
</pre>

<p>
This function returns the type4 template to mount the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc756">
<h3>5.7.33. Driver type4 init</h3>

<pre>
saltos.driver.__types.type4.init = arg
</pre>

<p>
This function initialize the type4 driver screen for the arg requested
</p>

<ul>
<li>@arg =&gt; the desired action to do
</li>
</ul>

</section>
<section id="toc757">
<h3>5.7.34. Driver type4 open</h3>

<pre>
saltos.driver.__types.type4.open = saltos.driver.__types.type2.open;
</pre>

<p>
This function bypass to the type2 driver
</p>

<ul>
<li>@arg =&gt; the desired url
</li>
</ul>

</section>
<section id="toc758">
<h3>5.7.35. Driver type4 close</h3>

<pre>
saltos.driver.__types.type4.close = arg
</pre>

<p>
This function close the modal
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc759">
<h3>5.7.36. Driver type5 object</h3>

<pre>
saltos.driver.__types.type5 = {};
</pre>

<p>
This object stores the functions used by the type5 driver
</p>

</section>
<section id="toc760">
<h3>5.7.37. Driver type5 template</h3>

<pre>
saltos.driver.__types.type5.template = arg
</pre>

<p>
This function returns the type5 template to mount the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
<section id="toc761">
<h3>5.7.38. Driver type5 init</h3>

<pre>
saltos.driver.__types.type5.init = arg
</pre>

<p>
This function initialize the type5 driver screen for the arg requested
</p>

<ul>
<li>@arg =&gt; the desired action to do
</li>
</ul>

</section>
<section id="toc762">
<h3>5.7.39. Driver type5 open</h3>

<pre>
saltos.driver.__types.type5.open = saltos.driver.__types.type2.open;
</pre>

<p>
This function bypass to the type2 driver
</p>

<ul>
<li>@arg =&gt; the desired url
</li>
</ul>

</section>
<section id="toc763">
<h3>5.7.40. Driver type5 close</h3>

<pre>
saltos.driver.__types.type5.close = arg
</pre>

<p>
This function close the modal and/or two zone of the screen
</p>

<ul>
<li>@arg =&gt; unused at this scope
</li>
</ul>

</section>
</section>
<section id="toc764">
<h2>5.8. Filter module</h2>

<pre>
web/js/filter.js
</pre>

<p>
Implements all filters features
</p>

<section id="toc765">
<h3>5.8.1. Filter object</h3>

<pre>
saltos.filter = {};
</pre>

<p>
This object stores the functions used by the filter module
</p>

</section>
<section id="toc766">
<h3>5.8.2. Filter cache</h3>

<pre>
saltos.filter.__cache = {};
</pre>

<p>
This object stores the cache used by the filter module
</p>

</section>
<section id="toc767">
<h3>5.8.3. Init filter</h3>

<pre>
saltos.filter.init = async ()
</pre>

<p>
This function initialize the filter module by loading the current filters for
the current app. The main idea is to load all filters to be used by load and
save.
</p>

<ul>
<li>@app =&gt; the name of the app used to load the filters
</li>
</ul>

</section>
<section id="toc768">
<h3>5.8.4. Load filter</h3>

<pre>
saltos.filter.load = (name)
</pre>

<p>
This function gets the filter indentified by the app and name and restore
all values of the search form widgets from the cache for afterwards execute
the saltos.driver.search, that load the data in the list
</p>

<ul>
<li>@app  =&gt; the name of the desired app to be used
</li>
<li>@name =&gt; the name of the desired filter
</li>
</ul>

</section>
<section id="toc769">
<h3>5.8.5. Update filter</h3>

<pre>
saltos.filter.update = (name, data)
</pre>

<p>
This function only updates the cache filter
</p>

<ul>
<li>@app  =&gt; the name of the desired app to be used
</li>
<li>@name =&gt; the name of the desired filter that wants to update
</li>
<li>@data =&gt; the data of the desired filter that wants to update
</li>
</ul>

</section>
<section id="toc770">
<h3>5.8.6. Update filter</h3>

<pre>
saltos.filter.save = (name, data)
</pre>

<p>
This function save the data in the cache and in the server api
</p>

<ul>
<li>@app  =&gt; the name of the desired app to be used
</li>
<li>@name =&gt; the name of the desired filter that wants to save
</li>
<li>@data =&gt; the data of the desired filter that wants to save
</li>
</ul>

<p>
Notes:
</p>
<p>
This function allow to save and delete entries, using data as object or as null
you can modify the behaviour, and the actions are performed in the cache and
in the server api.
</p>
<p>
Too this function checks if data has suffered changes to optimize the network
and prevent non needed ajax requests.
</p>

</section>
<section id="toc771">
<h3>5.8.7. Filter button helper</h3>

<pre>
saltos.filter.button = arg
</pre>

<p>
This function allow to manage the filters buttons, can process requests
like load a filter, update a filter, delete a filter, create a filter and
rename a filter.
</p>

<ul>
<li>@arg =&gt; the desired action that you want to do
</li>
</ul>

</section>
<section id="toc772">
<h3>5.8.8. Select button helper</h3>

<pre>
saltos.filter.select = arg
</pre>

<p>
This function updates the contents of the select button and the contents of
the jstree widget, is executed when create a filter, rename a filter or delete
a filter
</p>

<ul>
<li>@arg =&gt; unused argument at the moment
</li>
</ul>

</section>
</section>
<section id="toc773">
<h2>5.9. Form helper module</h2>

<pre>
web/js/form.js
</pre>

<p>
This module provides the needed tools to implement the form feature
</p>

<section id="toc774">
<h3>5.9.1. Form constructor helper object</h3>

<pre>
saltos.form = {};
</pre>

<p>
This object allow to the constructor to use a rational structure for a quick access of each
helper
</p>

</section>
<section id="toc775">
<h3>5.9.2. Data helper object</h3>

<pre>
saltos.form.__form = {
</pre>

<p>
This object allow to the app to store the data of the fields map
</p>

</section>
<section id="toc776">
<h3>5.9.3. Form data helper</h3>

<pre>
saltos.form.data = (data, sync = true)
</pre>

<p>
This function sets the values of the request to the objects placed in the document, too as bonus
extra, it tries to search the field spec in the array to update the value of the field spec to
allow that the get_data can differ between the original data and the modified data.
</p>

</section>
<section id="toc777">
<h3>5.9.4. Data template helper</h3>

<pre>
saltos.form.__data_template_helper = (template_id, data, index)
</pre>

<p>
This function allow to convert the data object that contains the values for the fields idenfidied
by the keys of the associative array into a data object with the keys ready to be used by the
fields of a template, this fields are of the follow structure: TEMPLATE_ID#ID#INDEX
</p>

<ul>
<li>@template_id =&gt; the template identity used in the spec
</li>
<li>@data        =&gt; the object that contains the data associated to the row
</li>
<li>@index       =&gt; the index used in all fields of the template
</li>
</ul>

</section>
<section id="toc778">
<h3>5.9.5. Layout template helper</h3>

<pre>
saltos.form.__layout_template_helper = (template_id, index)
</pre>

<p>
This function returns the template identified by the template_id for the specified index, ready
to be used by the saltos.form.layout function.
</p>

<ul>
<li>@template_id =&gt; the template identity used in the spec
</li>
<li>@index       =&gt; the index used in all fields of the template
</li>
</ul>

</section>
<section id="toc779">
<h3>5.9.6. Form layout helper</h3>

<pre>
saltos.form.layout = (layout, extra)
</pre>

<p>
This function process the layout command, its able to process nodes as container, row, col and div
and all form_field defined in the bootstrap file.
</p>
<p>
Each objects as container, rows and cols, have two modes of works:
</p>
<p>
1) normal mode =&gt; requires that the user specify all layout, container, row, col and fields.
</p>
<p>
2) auto mode =&gt; only requires set auto='true' to the container, row or col, and with this, all childrens
of the node are created inside the correct element, if the auto appear in the container then a container,
a row and one col for each field are created, if the auto appear in the row then a row with one col for
each field are created, if the auto appear in the col then one col for each field are created, this mode
allow to optimize and speedup the creation of each screen by allow to reduce the amount of xml needed
to define each screen but allowing to be a lot of specific and define from all to zero auto features.
</p>
<p>
Notes:
</p>
<p>
This function add the fields to the saltos.form.__form.fields, this allow to the saltos.app.get_data
can retrieve the desired information of the fields.
</p>

</section>
<section id="toc780">
<h3>5.9.7. Form layout auto helper object</h3>

<pre>
saltos.form.__layout_auto_helper = {};
</pre>

<p>
This object stores the functions used as layout_auto_helper for containers, rows and cols
</p>

</section>
<section id="toc781">
<h3>5.9.8. Form layout auto helper for containers</h3>

<pre>
saltos.form.__layout_auto_helper.container = layout
</pre>

<p>
This functions implements the auto feature used by the layout function, allow to specify the
follow arguments:
</p>

<ul>
<li>@id              =&gt; defines the id used by the container element
</li>
<li>@container_class =&gt; defines the class used by the container element
</li>
<li>@container_style =&gt; defines the style used by the container element
</li>
<li>@row_class       =&gt; defines the class used by the row element
</li>
<li>@row_style       =&gt; defines the style used by the row element
</li>
<li>@col_class       =&gt; defines the class used by the col element
</li>
<li>@col_style       =&gt; defines the style used by the col element
</li>
</ul>

</section>
<section id="toc782">
<h3>5.9.9. Form layout auto helper for rows</h3>

<pre>
saltos.form.__layout_auto_helper.row = layout
</pre>

<p>
This functions implements the auto feature used by the layout function, allow to specify the
follow arguments:
</p>

<ul>
<li>@id              =&gt; defines the id used by the container element
</li>
<li>@row_class       =&gt; defines the class used by the row element
</li>
<li>@row_style       =&gt; defines the style used by the row element
</li>
<li>@col_class       =&gt; defines the class used by the col element
</li>
<li>@col_style       =&gt; defines the style used by the col element
</li>
</ul>

</section>
<section id="toc783">
<h3>5.9.10. Form layout auto helper for cols</h3>

<pre>
saltos.form.__layout_auto_helper.col = layout
</pre>

<p>
This functions implements the auto feature used by the layout function, allow to specify the
follow arguments:
</p>

<ul>
<li>@col_class       =&gt; defines the class used by the col element
</li>
<li>@col_style       =&gt; defines the style used by the col element
</li>
</ul>

<p>
Notes:
</p>
<p>
This function not allow to specify the id because in this functions, each object of the
layout is embedded inside of a col object and is not suitable to put an id attribute
to each col without repetitions.
</p>

</section>
<section id="toc784">
<h3>5.9.11. Style helper array</h3>

<pre>
saltos.form.__style = {};
</pre>

<p>
This array allow to the require feature to control the loaded libraries
</p>

</section>
<section id="toc785">
<h3>5.9.12. Form style helper</h3>

<pre>
saltos.form.style = async data
</pre>

<p>
This function allow to specify styles, you can use the inline of file key to specify
what kind of usage do you want to do.
</p>

<ul>
<li>@data =&gt; the object that contains the styles requirements (can be file or inline)
</li>
</ul>

</section>
<section id="toc786">
<h3>5.9.13. Javascript helper array</h3>

<pre>
saltos.form.__javascript = {};
</pre>

<p>
This array allow to the require feature to control the loaded libraries
</p>

</section>
<section id="toc787">
<h3>5.9.14. Form javascript helper</h3>

<pre>
saltos.form.javascript = async data
</pre>

<p>
This function allow to specify scripts, you can use the inline of file key to specify
what kind of usage do you want to do.
</p>

<ul>
<li>@data =&gt; the object that contains the javascript requirements (can be file or inline)
</li>
</ul>

</section>
<section id="toc788">
<h3>5.9.15. Form title helper</h3>

<pre>
saltos.form.title = title
</pre>

<p>
This function sets the document title, too it checks the existence of the About
header received in the ajax calls and stored in the saltos object to be used in the
last part of the title.
</p>

<ul>
<li>@title =&gt; The title that you want to set in the page
</li>
</ul>

</section>
<section id="toc789">
<h3>5.9.16. Form screen helper</h3>

<pre>
saltos.form.screen = action
</pre>

<p>
This function adds and removes the spinner to emulate the loading effect screen, too is able
to clear the screen by removing all contents of the body
</p>

<ul>
<li>@action =&gt; use loading, unloading or clear to execute the desired action
</li>
</ul>

</section>
<section id="toc790">
<h3>5.9.17. Form navbar helper</h3>

<pre>
saltos.form.navbar = navbar
</pre>

<p>
This function create a navbar with their menus on the top of the page, more
info about this feature in the bootstrap documentation
</p>

<ul>
<li>@navbar
</li>
</ul>

</section>
<section id="toc791">
<h3>5.9.18. Load gettext helper</h3>

<pre>
saltos.form.gettext = array
</pre>

<p>
This function load the gettext data from the api to the cli sapi
</p>

</section>
<section id="toc792">
<h3>5.9.19. Form cache helper</h3>

<pre>
saltos.form.cache = async val
</pre>

<p>
This function allow to use the cache feature
</p>

<ul>
<li>@val =&gt; the requested cache
</li>
</ul>

<p>
Notes:
</p>
<p>
This feature works in conjunction with the prefetch_cache function that
solves all caches before the real process_response, in order to explain
how it works, the main idea is to call to send_request, the response is
processed by prefetch_cache and when all caches are solved, then the
process_response is called.
</p>

</section>
</section>
<section id="toc793">
<h2>5.10. Gettext helper module</h2>

<pre>
web/js/gettext.js
</pre>

<p>
This fie contains useful functions related to gettext funcionality, allow to manage the
SaltOS translations using a merged system of the unix locales and the old SaltOS translations
system.
</p>

<section id="toc794">
<h3>5.10.1. Gettext helper object</h3>

<pre>
saltos.gettext = {
</pre>

<p>
This object stores all gettext functions to get and set data using the localStorage
</p>

</section>
<section id="toc795">
<h3>5.10.2. Get gettext function</h3>

<pre>
saltos.gettext.get = ()
</pre>

<p>
This function returns the gettext stored in the localStorage
</p>

</section>
<section id="toc796">
<h3>5.10.3. Get Short gettext function</h3>

<pre>
saltos.gettext.get_short = ()
</pre>

<p>
This function returns the short version of gettext stored in the localStorage
</p>

</section>
<section id="toc797">
<h3>5.10.4. Set gettext function</h3>

<pre>
saltos.gettext.set = lang
</pre>

<p>
This function sets the gettext stored in the localStorage
</p>

<ul>
<li>@gettext      =&gt; the gettext that you want to store in the localStorage
</li>
</ul>

</section>
<section id="toc798">
<h3>5.10.5. Unset gettext and expires_at</h3>

<pre>
saltos.gettext.unset = ()
</pre>

<p>
This function removes the gettext and expires_at in the localStorage
</p>

</section>
<section id="toc799">
<h3>5.10.6. Get Text function</h3>

<pre>
saltos.gettext.T = text
</pre>

<p>
This function replaces the gettext abreviation _() using the SaltOS gettext
feature, is based in the original system of the old SaltOS with improvements
to do more open as the GNU gettext
</p>

<ul>
<li>@text =&gt; The text that you want to translate
</li>
</ul>

<p>
Notes:
</p>
<p>
This function uses multiples locales at same time, SaltOS provides a basic set of
usefull strings and each application can add and overwrite more strings, this is
the same feature that old SaltOS provides
</p>

</section>
<section id="toc800">
<h3>5.10.7. T function</h3>

<pre>
window.T = saltos.gettext.T;
</pre>

<p>
This line allow to publish the saltos.gettext.T function in the global scope
</p>

</section>
<section id="toc801">
<h3>5.10.8. Bootstrap gettext object</h3>

<pre>
saltos.gettext.bootstrap = {};
</pre>

<p>
This object stores some bootstrap overloads that allow to other modules to
access to the bootstrap modules using the gettext feature and translating
texts.
</p>

</section>
<section id="toc802">
<h3>5.10.9. Bootstrap field overload</h3>

<pre>
saltos.gettext.bootstrap.field = field
</pre>

<p>
This function overload the saltos.bootstrap.field funtion to add gettext
features to the arguments depending the type of field.
</p>

<ul>
<li>@field =&gt; the argument passed to the original bootstrap function
</li>
</ul>

</section>
<section id="toc803">
<h3>5.10.10. Bootstrap modal overload</h3>

<pre>
saltos.gettext.bootstrap.modal = args
</pre>

<p>
This function overload the saltos.bootstrap.modal funtion to add gettext
features to the arguments
</p>

<ul>
<li>@arg =&gt; the argument passed to the original bootstrap function
</li>
</ul>

</section>
<section id="toc804">
<h3>5.10.11. Bootstrap toast overload</h3>

<pre>
saltos.gettext.bootstrap.toast = args
</pre>

<p>
This function overload the saltos.bootstrap.toast funtion to add gettext
features to the arguments
</p>

<ul>
<li>@arg =&gt; the argument passed to the original bootstrap function
</li>
</ul>

</section>
<section id="toc805">
<h3>5.10.12. Bootstrap menu overload</h3>

<pre>
saltos.gettext.bootstrap.menu = args
</pre>

<p>
This function overload the saltos.bootstrap.menu funtion to add gettext
features to the arguments
</p>

<ul>
<li>@arg =&gt; the argument passed to the original bootstrap function
</li>
</ul>

</section>
<section id="toc806">
<h3>5.10.13. Bootstrap offcanvas overload</h3>

<pre>
saltos.gettext.bootstrap.offcanvas = args
</pre>

<p>
This function overload the saltos.bootstrap.offcanvas funtion to add gettext
features to the arguments
</p>

<ul>
<li>@arg =&gt; the argument passed to the original bootstrap function
</li>
</ul>

</section>
</section>
<section id="toc807">
<h2>5.11. Hash helper module</h2>

<pre>
web/js/hash.js
</pre>

<p>
This module includes the code used to manage the hash feature in the browser
and to provide an onhashchange function
</p>

<section id="toc808">
<h3>5.11.1. Hash helper object</h3>

<pre>
saltos.hash = {};
</pre>

<p>
This object stores all hash functions to get, set and trigger a change
</p>

</section>
<section id="toc809">
<h3>5.11.2. Get hash</h3>

<pre>
saltos.hash.get = ()
</pre>

<p>
Function intended to return the current hash without the pillow
</p>

</section>
<section id="toc810">
<h3>5.11.3. Set hash</h3>

<pre>
saltos.hash.set = hash
</pre>

<p>
Function intended to replace the hash in the current url, adds the pilow if it is not found
in the hash argument
</p>

<ul>
<li>@hash =&gt; this must contain the hash with or without the pillow
</li>
</ul>

<p>
Notes:
</p>
<p>
The # char is added by default if it is not found in the hash, additionally the dot is
added to force to remove all chars before the # char in the window.location
</p>
<p>
The operation is cancelled if the current hash is the same that the new hash
</p>

</section>
<section id="toc811">
<h3>5.11.4. Add hash</h3>

<pre>
saltos.hash.add = hash
</pre>

<p>
Function intended to add a hash in the current history, adds the pilow if it is not found
in the hash argument
</p>

<ul>
<li>@hash =&gt; this must contain the hash with or without the pillow
</li>
</ul>

<p>
Notes:
</p>
<p>
The # char is added by default if it is not found in the hash, additionally the dot is
added to force to remove all chars before the # char in the window.location
</p>
<p>
The operation is cancelled if the current hash is the same that the new hash
</p>

</section>
<section id="toc812">
<h3>5.11.5. Hash helper</h3>

<pre>
saltos.hash.__helper = hash
</pre>

<p>
This function is used by all other functions to clean the hash
</p>

<ul>
<li>@hash =&gt; the hash that you want to check and clean
</li>
</ul>

</section>
<section id="toc813">
<h3>5.11.6. Url to hash</h3>

<pre>
saltos.hash.url2hash = url
</pre>

<p>
This function allow to convert and url string into a hash string
</p>

<ul>
<li>@url =&gt; the url string that contains the hash that you want to retrieve
</li>
</ul>

</section>
<section id="toc814">
<h3>5.11.7. Change trigger</h3>

<pre>
saltos.hash.trigger = ()
</pre>

<p>
This function triggers the hashchange event to execute the onhashchange
</p>

</section>
<section id="toc815">
<h3>5.11.8. Hash change management</h3>

<pre>
window.addEventListener('hashchange', event
</pre>

<p>
This function allow to SaltOS to update the contents when hash change
</p>

</section>
<section id="toc816">
<h3>5.11.9. Before unload management</h3>

<pre>
window.addEventListener('beforeunload', event
</pre>

<p>
This function allow to SaltOS to update the contents when hash change
</p>

</section>
</section>
<section id="toc817">
<h2>5.12. Object helper module</h2>

<pre>
web/js/object.js
</pre>

<p>
This file contains the main saltos object
</p>

<section id="toc818">
<h3>5.12.1. Main object</h3>

<pre>
const saltos = {};
</pre>

<p>
This object contains all SaltOS code
</p>

</section>
</section>
<section id="toc819">
<h2>5.13. Proxy module</h2>

<pre>
web/js/proxy.js
</pre>

<p>
This module provides a service worker that acts as a proxy, it uses the headers
requests to understand what kind of thing the request needs and tries to do
it with the more better manner.
</p>

<section id="toc820">
<h3>5.13.1. Console log</h3>

<pre>
const console_log = (message)
</pre>

<p>
This function only apply as console.log replacement for debug purposes
</p>

<ul>
<li>@message =&gt; the message that you want to send to the console
</li>
</ul>

<p>
Notes:
</p>
<p>
This function send a message to all clients and exists because in some cases
the console.log not apply for service workers, this is a simple and quick
solution for help in the debug process
</p>

</section>
<section id="toc821">
<h3>5.13.2. Debug function</h3>

<pre>
const debug = (action, url, type, duration, size)
</pre>

<p>
This function returns an array with the needed things to print into a console.log
the fetch message with the url, the response type and the duration of the task
</p>

<ul>
<li>@url      =&gt; url of the request
</li>
<li>@type     =&gt; type of the request (network, cache or error)
</li>
<li>@duration =&gt; duration of the entire task in milliseconds
</li>
</ul>

</section>
<section id="toc822">
<h3>5.13.3. Proxy function</h3>

<pre>
const proxy = async request
</pre>

<p>
This function receives a request to do a fetch or try to use a cached result
if a network error occurs, if no response is available, a json error is returned
to the application layer
</p>
<p>
This function can perform actions like fetch, cache, queue or error, in each
case, tries to execute each part using the order defined by the proxy header
that can be added from the layer application ajax call
</p>

<ul>
<li>@request =&gt; the request that must to be processed
</li>
</ul>

</section>
<section id="toc823">
<h3>5.13.4. Queue open</h3>

<pre>
const queue_open = ()
</pre>

<p>
This function returns a promise to the store object that can be used
in the add, delete or getAll features.
</p>

</section>
<section id="toc824">
<h3>5.13.5. Queue push</h3>

<pre>
const queue_push = data
</pre>

<p>
This function adds an entry to the queue system
</p>

<ul>
<li>@data =&gt; the object that you want to store in the database
</li>
</ul>

</section>
<section id="toc825">
<h3>5.13.6. Queue getall</h3>

<pre>
const queue_getall = ()
</pre>

<p>
This function returns all entries of the queue using the fifo
order
</p>

</section>
<section id="toc826">
<h3>5.13.7. Queue delete</h3>

<pre>
const queue_delete = key
</pre>

<p>
This function allow to delete the entry identified by @key
</p>

<ul>
<li>@key =&gt; the primaryKey that you want to delete
</li>
</ul>

</section>
<section id="toc827">
<h3>5.13.8. Request serialize</h3>

<pre>
const request_serialize = async request
</pre>

<p>
This function allow to gets a request and returns an object
that can be stored in an indexedDB
</p>

<ul>
<li>@request =&gt; the request that must to be converted into an object
</li>
</ul>

</section>
<section id="toc828">
<h3>5.13.9. Request unserialize</h3>

<pre>
const request_unserialize = request
</pre>

<p>
This function allow to convert an object stored in an indexedDB
into a valid request that can be used in fetch operations
</p>

<ul>
<li>@request =&gt; the object that must to be converted into a request
</li>
</ul>

</section>
<section id="toc829">
<h3>5.13.10. Human Size</h3>

<pre>
const human_size = (size, pre = '', post = '')
</pre>

<p>
Return the human size (G, M, K or original value)
</p>

<ul>
<li>@size  =&gt; the size that you want convert to human size
</li>
<li>@pre  =&gt; string added between the number and the unit letter
post  =&gt; string added after the unit letter at the end
</li>
</ul>

</section>
<section id="toc830">
<h3>5.13.11. Install binding</h3>

<pre>
self.addEventListener('install', event
</pre>

<p>
This code implements the install feature
</p>

</section>
<section id="toc831">
<h3>5.13.12. Activate binding</h3>

<pre>
self.addEventListener('activate', event
</pre>

<p>
This code implements the activate feature
</p>

</section>
<section id="toc832">
<h3>5.13.13. Fetch binding</h3>

<pre>
self.addEventListener('fetch', event
</pre>

<p>
This code implements the fetch feature
</p>

</section>
<section id="toc833">
<h3>5.13.14. Sync in progress flag</h3>

<pre>
let sync_in_progress = false;
</pre>

<p>
Flag used to prevent concurrent execution of the sync operation in a service worker.
It ensures that only one sync process runs at a time by setting the flag to true
when the sync starts and resetting it to false once the process completes. If another
sync request is received while sync_in_progress is true, the new sync is ignored
until the current one finishes.
</p>

</section>
<section id="toc834">
<h3>5.13.15. Message binding</h3>

<pre>
self.addEventListener('message', async event
</pre>

<p>
This code implements the message feature
</p>
<p>
Notes:
</p>
<p>
If the message contains the reserved word reset, then all caches are deleted
and the service worker is released, too can receive a hello word that is intended
to test the comunication between the proxy and the app layer
</p>

</section>
</section>
<section id="toc835">
<h2>5.14. Push &amp; favicon helper module</h2>

<pre>
web/js/push.js
</pre>

<p>
This fie contains useful functions related to the push and favicon features
</p>

<section id="toc836">
<h3>5.14.1. Push constructor helper object</h3>

<pre>
saltos.push = {
</pre>

<p>
This object allow to the constructor to use a rational structure for a quick access of each
helper
</p>

</section>
<section id="toc837">
<h3>5.14.2. Push helper</h3>

<pre>
saltos.push.fn = ()
</pre>

<p>
This function tries to send the push request to the server with the latest
timestamp, and process the response depending the kind of response, too it
includes features to prevent concurrence and malfunctions
</p>

</section>
<section id="toc838">
<h3>5.14.3. Load setup</h3>

<pre>
window.addEventListener('load', async event
</pre>

<p>
This function is executed when window is loaded and defines the current
timestamp and launch the timer that executes periodically the function
each second
</p>

</section>
<section id="toc839">
<h3>5.14.4. Online sync</h3>

<pre>
window.addEventListener('online', event
</pre>

<p>
This function send a push request when navigator detects an online change
</p>

</section>
<section id="toc840">
<h3>5.14.5. Favicon constructor helper object</h3>

<pre>
saltos.favicon = {
</pre>

<p>
This object allow to the constructor to use a rational structure for a quick access of each
helper
</p>

</section>
<section id="toc841">
<h3>5.14.6. Favicon helper</h3>

<pre>
saltos.favicon.fn = bool
</pre>

<p>
This function is intended to launch and stop the favicon animation depending
the bool argument
</p>

<ul>
<li>@bool =&gt; true to run the animation and false to stop the animation
</li>
</ul>

</section>
<section id="toc842">
<h3>5.14.7. Visibility Change</h3>

<pre>
document.addEventListener('visibilitychange', ()
</pre>

<p>
This function is executed where the vilibilitychange event is triggered and
the main task is to cancel the favicon animation
</p>

</section>
<section id="toc843">
<h3>5.14.8. Run</h3>

<pre>
saltos.favicon.run = ()
</pre>

<p>
This function run the favicon animation of the app is not visible
</p>

</section>
</section>
<section id="toc844">
<h2>5.15. Token helper module</h2>

<pre>
web/js/storage.js
</pre>

<p>
This module provides the needed tools to manage the tokens
</p>

<section id="toc845">
<h3>5.15.1. Storage helper object</h3>

<pre>
saltos.storage = {};
</pre>

<p>
This object manage the localStorage using a prefix to prevent collisions
</p>

</section>
<section id="toc846">
<h3>5.15.2. Pathname helper string</h3>

<pre>
saltos.storage.pathname = saltos.core.encode_bad_chars(window.location.pathname);
</pre>

<p>
This string contains the pathname for the current execution
</p>

</section>
<section id="toc847">
<h3>5.15.3. Get key</h3>

<pre>
saltos.storage.get_key = key
</pre>

<p>
This function returns the real key used by localStorage to store a retrieve
the data.
</p>
<p>
key =&gt; the desired key used to access to the local storage
</p>

</section>
<section id="toc848">
<h3>5.15.4. Get Item</h3>

<pre>
saltos.storage.getItem = key
</pre>

<p>
This function is the same that localStorage.getItem but using the get_key as key
</p>
<p>
key =&gt; the desired key used to access to the local storage
</p>

</section>
<section id="toc849">
<h3>5.15.5. Set Item</h3>

<pre>
saltos.storage.setItem = (key, value)
</pre>

<p>
This function is the same that localStorage.setItem but using the get_key as key
</p>
<p>
key   =&gt; the desired key used to access to the local storage
value =&gt; the value that you want to set
</p>

</section>
<section id="toc850">
<h3>5.15.6. Remove Item</h3>

<pre>
saltos.storage.removeItem = key
</pre>

<p>
This function is the same that localStorage.removeItem but using the get_key as key
</p>
<p>
key =&gt; the desired key used to access to the local storage
</p>

</section>
<section id="toc851">
<h3>5.15.7. Clear</h3>

<pre>
saltos.storage.clear = ()
</pre>

<p>
This function is the same that localStorage.clear but only removes the entries that
are using the same prefix that the current context, to do it, this code checks all
keys and removes all items that starts with the prefix returned by get_key
</p>

</section>
<section id="toc852">
<h3>5.15.8. Get Item With Timestamp</h3>

<pre>
saltos.storage.getItemWithTimestamp = key
</pre>

<p>
This function tries to do the same thing that getItem but using a timestampd data
structure, to do it, only returns the value entrie
</p>
<p>
key =&gt; the desired key used to access to the local storage
</p>

</section>
<section id="toc853">
<h3>5.15.9. Set Item With Timestamp</h3>

<pre>
saltos.storage.setItemWithTimestamp = (key, value)
</pre>

<p>
This function tries to do the same thing that setItem but using a timestampd data
structure, to do it, sets an object with the timestamp and the original value.
</p>
<p>
key =&gt; the desired key used to access to the local storage
</p>

</section>
<section id="toc854">
<h3>5.15.10. Purge With Timestamp</h3>

<pre>
saltos.storage.purgeWithTimestamp = (prefix, offset)
</pre>

<p>
This function tries to purge old data using the prefix and offset in the current
timestamp.
</p>

<ul>
<li>@prefix =&gt; the prefix used in the search process
</li>
<li>@offset =&gt; the offset used in the timestamp comparison
</li>
</ul>

</section>
</section>
<section id="toc855">
<h2>5.16. Token helper module</h2>

<pre>
web/js/token.js
</pre>

<p>
This module provides the needed tools to manage the tokens
</p>

<section id="toc856">
<h3>5.16.1. Token helper object</h3>

<pre>
saltos.token = {};
</pre>

<p>
This object stores all token functions to get and set data using the localStorage
</p>

</section>
<section id="toc857">
<h3>5.16.2. Get token function</h3>

<pre>
saltos.token.get = ()
</pre>

<p>
This function returns the token stored in the localStorage
</p>

</section>
<section id="toc858">
<h3>5.16.3. Get expires_at function</h3>

<pre>
saltos.token.get_expires_at = ()
</pre>

<p>
This function returns the expires_at stored in the localStorage
</p>

</section>
<section id="toc859">
<h3>5.16.4. Set token and expires_at</h3>

<pre>
saltos.token.set = response
</pre>

<p>
This function store the token and expires_at in the localStorage
</p>

<ul>
<li>@response   =&gt; the object that contains the follow parameters:
</li>
<li>@token      =&gt; the token that you want to store in the localStorage
</li>
<li>@expires_at =&gt; the expires_at of the token that you want to store in the localStorage
</li>
</ul>

</section>
<section id="toc860">
<h3>5.16.5. Unset token and expires_at</h3>

<pre>
saltos.token.unset = ()
</pre>

<p>
This function removes the token and expires_at in the localStorage
</p>

</section>
</section>
<section id="toc861">
<h2>5.17. Window helper module</h2>

<pre>
web/js/window.js
</pre>

<p>
This function provides all needed code to manage the windows (open and close) and too
to provide a tool to send messages between tabs inside the same browser.
</p>

<section id="toc862">
<h3>5.17.1. Window communication helper object</h3>

<pre>
saltos.window = {};
</pre>

<p>
This object stores all windows communications functions to send and listen messages
</p>

</section>
<section id="toc863">
<h3>5.17.2. Open window</h3>

<pre>
saltos.window.open = url
</pre>

<p>
This function is intended to open new tabs in the window, at the moment only is a wrapper to
the window.open but in a future, can add more features
</p>

<ul>
<li>@url =&gt; the url of the page to load
</li>
</ul>

</section>
<section id="toc864">
<h3>5.17.3. Close window</h3>

<pre>
saltos.window.close = ()
</pre>

<p>
This function is intended to close the current window
</p>

</section>
<section id="toc865">
<h3>5.17.4. Listeners helper object</h3>

<pre>
saltos.window.listeners = {};
</pre>

<p>
This object stores all listeners added by the set_listeners and used by the onstorage
</p>

</section>
<section id="toc866">
<h3>5.17.5. Set listener</h3>

<pre>
saltos.window.set_listener = (name, fn)
</pre>

<p>
This function allos to set a listener function to the named event
</p>

<ul>
<li>@name =&gt; the name of the event that you want to suscribe
</li>
<li>@fn   =&gt; callback executed when event named is triggered
</li>
</ul>

</section>
<section id="toc867">
<h3>5.17.6. Unset listener</h3>

<pre>
saltos.window.unset_listener = (name)
</pre>

<p>
This function removes a listener from the listeners object
</p>

<ul>
<li>@name =&gt; the name of the event that you want to unsuscribe
</li>
</ul>

</section>
<section id="toc868">
<h3>5.17.7. Send message</h3>

<pre>
saltos.window.send = (name, data = '', scope = 'all')
</pre>

<p>
This function allow to send a message to all tabs using the name and data
as event and argument of the callback executed.
</p>

<ul>
<li>@name  =&gt; the name of the event that you want to send
</li>
<li>@data  =&gt; the arguments used by the callback function
</li>
<li>@scope =&gt; the scope where the event must to be triggered (me, all, other)
</li>
</ul>

<p>
Notes:
</p>
<p>
The usage of the localStorage causes the execution of the onstorage function
of the other tabs but not for the tab that send the message, to fix this we
are dispatching an event in the current window, this allow that all tabs
(including the source of the message sent) receives the notification and
executes the listeners if needed
</p>
<p>
As this module uses the saltos.storage module, it's important that understand
that the saltos.storage adds a prefix in the keys to allow the separation of
the data for the different instances of the same app, this is important because
the key generated to send the event to the origin of the message must contains
the prefix that too
</p>

</section>
<section id="toc869">
<h3>5.17.8. Storage management</h3>

<pre>
window.addEventListener('storage', event
</pre>

<p>
This function allow to SaltOS to receive the messages sended by other tabs
using the localStorage.
</p>
</section>
</section>
</section>
</div>

<!-- html code generated by txt2tags 3.4 (http://txt2tags.org) -->
<!-- cmdline: txt2tags -\-toc -t html -i core.t2t -o core.html -->
</article></body></html>
