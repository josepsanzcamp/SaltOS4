!function(e){e.fn.autogrow=function(t){return this.filter("textarea").each((function(){var a=this,n=e(a),o=n.height(),r=n.hasClass("autogrow-short")?0:parseInt(n.css("lineHeight"))||0,l=e.extend({preGrowCallback:null,postGrowCallback:null},t),i=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n.width(),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),c=function(e){var t=a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&#xa0;").replace(/\n/g,"<br/>").replace(/ {2,}/g,(function(e){return function(e,t){for(var a=0,n="";a<t;a++)n+=e;return n}("&#xa0;",e.length-1)+" "}));e&&e.data&&"keydown"===e.data.event&&13===e.keyCode&&(t+="<br />"),i.css("width",n.width()),i.html(t+(0===r?"...":""));var c=Math.max(i.height()+r,o);null!=l.preGrowCallback&&(c=l.preGrowCallback(n,i,c,o)),n.height(c),null!=l.postGrowCallback&&l.postGrowCallback(n)};n.change(c).keyup(c).keydown({event:"keydown"},c),e(window).resize(c),c()}))}}(jQuery);
