"use strict";var saltos=saltos||{};saltos.form_field=function(e){if(saltos.check_params(e,["type","id","label","class","placeholder","value","disabled","readonly","required"]),e.disabled&&(e.disabled="disabled"),e.readonly&&(e.readonly="readonly"),e.required&&(e.required="required"),["container","row","col","label"].includes(e.type))return saltos.__form_field[e.type](e);var t=$("<div></div>");return""!=e.label&&$(t).append(saltos.__form_field.label(e)),$(t).append(saltos.__form_field[e.type](e)),t},saltos.__form_field={},saltos.__form_field.container=function(e){return saltos.check_params(e,["container"]),""==e.container&&(e.container="container-fluid"),$(`<div class="${e.container}"></div>`)},saltos.__form_field.row=function(e){return saltos.check_params(e,["row"]),""==e.row&&(e.row="row"),$(`<div class="${e.row}"></div>`)},saltos.__form_field.col=function(e){return saltos.check_params(e,["col"]),""==e.col&&(e.col="col"),$(`<div class="${e.col}"></div>`)},saltos.__form_field.label=function(e){return $(`<label for="${e.id}" class="form-label">${e.label}</label>`)},saltos.__form_field.text=function(e){return $(`\n        <input type="${e.type}" class="form-control ${e.class}" id="${e.id}" placeholder="${e.placeholder}" value="${e.value}" ${e.disabled} ${e.readonly} ${e.required}>\n    `)},saltos.__form_field.integer=function(e){e.type="text";var t=saltos.__form_field.text(e),o=$(t).get(0);return IMask(o,{mask:Number,signed:!0,scale:0}),t},saltos.__form_field.float=function(e){e.type="text";var t=saltos.__form_field.text(e),o=$(t).get(0);return IMask(o,{mask:Number,signed:!0,radix:".",mapToRadix:[","],scale:99}),t},saltos.__form_field.color=function(e){return saltos.__form_field.text(e)},saltos.__form_field.date=function(e){return saltos.__form_field.text(e)},saltos.__form_field.time=function(e){return saltos.__form_field.text(e)},saltos.__form_field.datetime=function(e){return e.type="datetime-local",saltos.__form_field.text(e)},saltos.__form_field.__textarea=function(e){return saltos.check_params(e,["rows"]),$(`\n        <textarea class="form-control ${e.class}" id="${e.id}" placeholder="${e.placeholder}" rows="${e.rows}" ${e.disabled} ${e.readonly} ${e.required}>${e.value}</textarea>\n    `)},saltos.__form_field.textarea=function(e){var t=saltos.__form_field.__textarea(e),o=$(t).get(0);return saltos.when_visible(o,(function(e){$(e).autogrow()}),o),t},saltos.__form_field.ckeditor=function(e){var t=saltos.__form_field.__textarea(e),o=$(t).get(0);return saltos.when_visible(o,(function(e){ClassicEditor.create(e).catch((e=>{console.error(e)}))}),o),t},saltos.__form_field.codemirror=function(e){saltos.check_params(e,["mode"]);var t=saltos.__form_field.__textarea(e),o=$(t).get(0);return saltos.when_visible(o,(function(t){var o=CodeMirror.fromTextArea(t,{mode:e.mode,styleActiveLine:!0,lineNumbers:!0,lineWrapping:!0});$(t).next().addClass("form-control").height("auto"),o.on("change",o.save)}),o),t},saltos.__form_field.iframe=function(e){return $(`\n        <iframe src="${e.value}" id="${e.id}" frameborder="0" class="form-control ${e.class}"></iframe>\n    `)},saltos.__form_field.select=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.multiselect=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.checkbox=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.button=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.password=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.file=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.link=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.image=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.excel=function(e){return e.type="text",saltos.__form_field.text(e)},saltos.__form_field.pdfjs=function(e){return e.type="text",saltos.__form_field.text(e)};
"use strict";var saltos=saltos||{};saltos.init_error=function(){window.onerror=function(t,e,a,r,o){if(!isset(o)||!isset(o.stack))o={stack:"unknown"};var s={action:"adderror",jserror:t,details:"Error on file "+e+":"+a+":"+r+", userAgent is "+navigator.userAgent,backtrace:o.stack};$.ajax({url:"index.php",data:JSON.stringify(s),type:"post"})}},saltos.addlog=function(t){var e={action:"addlog",msg:t};$.ajax({url:"index.php",data:JSON.stringify(e),type:"post"})},saltos.check_params=function(t,e,a){for(var r in isset(a)||(a=""),e)isset(t[e[r]])||(t[e[r]]=a)},saltos.uniqid=function(){return"id"+Math.floor(1e6*Math.random())},saltos.when_visible=function(t,e,a){$(t).is("[id]")||$(t).attr("id","fix"+saltos.uniqid());var r="#"+$(t).attr("id"),o=setInterval((function(){var t=$(r);$(t).length?$(t).is(":visible")&&(clearInterval(o),e(a)):clearInterval(o)}),100)},function(t){saltos.init_error();for(var e=saltos.form_field({type:"container"}),a=saltos.form_field({type:"row"}),r=["","text","integer","float","color","date","time","datetime","textarea","ckeditor","codemirror","iframe","select","multiselect","checkbox","button","password","file","link","label","image","excel","pdfjs"],o={8:"Texto de prueba\n\nAdios",9:"Texto de prueba<br/><br/>Adios",10:"<xml>\n\t<tag>valor</tag>\n</xml>",11:"https://www.saltos.org"},s=1;s<=24;s++){var i=(s-1)%12+1,n=saltos.form_field({type:"col",col:"col-md-"+i+" mb-3"}),l="text";isset(r[s])&&(l=r[s]);var d="";isset(o[s])&&(d=o[s]);var c=saltos.form_field({type:l,id:"campo"+s,label:"Campo "+s+" ("+l+")",placeholder:"Escriba aqui",value:d,mode:"xml"});t(n).append(c),t(a).append(n)}e.append(a),t("body").append(e)}(jQuery);
