"use strict";var saltos=saltos||{};saltos.form_field=function(e){return saltos.check_params(e,["type","id","label","class","placeholder","value","disabled","readonly","required"]),e.disabled&&(e.disabled="disabled"),e.readonly&&(e.readonly="readonly"),e.required&&(e.required="required"),saltos.__form_field[e.type](e)},saltos.__form_field={},saltos.__form_field.container=function(e){return saltos.check_params(e,["container"]),""==e.container&&(e.container="container-fluid"),$(`\n        <div class="${e.container}">\n        </div>\n    `)},saltos.__form_field.row=function(e){return saltos.check_params(e,["row"]),""==e.row&&(e.row="row"),$(`\n        <div class="${e.row}">\n        </div>\n    `)},saltos.__form_field.col=function(e){return saltos.check_params(e,["col"]),""==e.col&&(e.col="col"),$(`\n        <div class="${e.col}">\n        </div>\n    `)},saltos.__form_field.text=function(e){return $(`<div>\n        <label for="${e.id}" class="form-label">${e.label}</label>\n        <input type="${e.type}" class="form-control ${e.class}" id="${e.id}" placeholder="${e.placeholder}" value="${e.value}" ${e.disabled} ${e.readonly} ${e.required}>\n    </div>`)},saltos.__form_field.integer=function(e){e.type="text";var a=saltos.__form_field.text(e),l=$("input",a).get(0);return IMask(l,{mask:Number,signed:!0,scale:0}),a},saltos.__form_field.float=function(e){e.type="text";var a=saltos.__form_field.text(e),l=$("input",a).get(0);return IMask(l,{mask:Number,signed:!0,radix:".",mapToRadix:[","],scale:99}),a},saltos.__form_field.color=function(e){return saltos.__form_field.text(e)},saltos.__form_field.date=function(e){return saltos.__form_field.text(e)},saltos.__form_field.time=function(e){return saltos.__form_field.text(e)},saltos.__form_field.datetime=function(e){return e.type="datetime-local",saltos.__form_field.text(e)},saltos.__form_field.textarea=function(e){saltos.check_params(e,["rows"]);var a=$(`<div>\n        <label for="${e.id}" class="form-label">${e.label}</label>\n        <textarea class="form-control ${e.class}" id="${e.id}" placeholder="${e.placeholder}" rows="${e.rows}" ${e.disabled} ${e.readonly} ${e.required}>${e.value}</textarea>\n    </div>`),l=$("textarea",a);return saltos.when_visible(l,(function(e){e.autogrow()}),l),a},saltos.__form_field.ckeditor=function(e){var a=$(`<div>\n        <label for="${e.id}" class="form-label">${e.label}</label>\n        <textarea class="form-control ${e.class}" id="${e.id}" placeholder="${e.placeholder}" rows="${e.rows}" ${e.disabled} ${e.readonly} ${e.required}>${e.value}</textarea>\n    </div>`),l=$("textarea",a).get(0);return saltos.when_visible(l,(function(e){ClassicEditor.create(e).catch((e=>{console.error(e)}))}),l),a},saltos.__form_field.codemirror=function(e){var a=$(`<div>\n        <label for="${e.id}" class="form-label">${e.label}</label>\n        <textarea class="form-control ${e.class}" id="${e.id}" placeholder="${e.placeholder}" rows="${e.rows}" ${e.disabled} ${e.readonly} ${e.required}>${e.value}</textarea>\n    </div>`),l=$("textarea",a).get(0);return saltos.when_visible(l,(function(e){var a=$(l).width(),r=$(l).height(),o=$(l).attr("class"),t=CodeMirror.fromTextArea(l,{lineNumbers:!0});$(l).data("cm",t);var s=function(e){var l=Math.max(r,24*e.doc.size);e.display.sizerWidth>e.display.lastWrapWidth&&(l+=24),e.setSize(a+20,l+20)};s(t),t.on("viewportChange",s),$(l).next().addClass(o).css("margin","1px"),t.on("change",t.save)}),l),a};
"use strict";var saltos=saltos||{};saltos.init_error=function(){window.onerror=function(t,a,r,e,o){if(!isset(o)||!isset(o.stack))o={stack:"unknown"};var i={action:"adderror",jserror:t,details:"Error on file "+a+":"+r+":"+e+", userAgent is "+navigator.userAgent,backtrace:o.stack};$.ajax({url:"index.php",data:JSON.stringify(i),type:"post"})}},saltos.addlog=function(t){var a={action:"addlog",msg:t};$.ajax({url:"index.php",data:JSON.stringify(a),type:"post"})},saltos.check_params=function(t,a,r){for(var e in isset(r)||(r=""),a)isset(t[a[e]])||(t[a[e]]=r)},saltos.uniqid=function(){return"id"+Math.floor(1e6*Math.random())},saltos.when_visible=function(t,a,r){$(t).is("[id]")||$(t).attr("id","fix"+saltos.uniqid());var e="#"+$(t).attr("id"),o=setInterval((function(){var t=$(e);$(t).length?$(t).is(":visible")&&(clearInterval(o),a(r)):clearInterval(o)}),100)},function(t){saltos.init_error();for(var a=saltos.form_field({type:"container"}),r=saltos.form_field({type:"row"}),e=["","text","integer","float","color","date","time","datetime","textarea","ckeditor","codemirror"],o=1;o<=20;o++){var i=(o-1)%12+1,s=saltos.form_field({type:"col",col:"col-md-"+i+" mb-3"}),n="text";isset(e[o])&&(n=e[o]);var l=saltos.form_field({type:n,id:"campo"+o,label:"Campo "+o+" ("+n+")",placeholder:"Escriba aqui"});t(s).append(l),t(r).append(s)}a.append(r),t("body").append(a)}(jQuery);
