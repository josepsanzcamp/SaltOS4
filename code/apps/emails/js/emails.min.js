saltos.emails={},saltos.emails.server=()=>{saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/action/server",success:s=>{if(saltos.app.form.screen("unloading"),saltos.app.check_response(s)){for(var e in s)saltos.app.toast("Response",s[e]);saltos.window.send("saltos.emails.update")}},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},abort:s=>{saltos.app.form.screen("unloading")},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.emails.delete1=()=>{var s=saltos.app.checkbox_ids(document.getElementById("list").parentElement);s.length?(s=s.join(","),saltos.app.modal("Delete emails???","Do you want to delete the selected emails???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/delete/"+s,success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"))},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},abort:s=>{saltos.app.form.screen("unloading")},token:saltos.token.get(),lang:saltos.gettext.get()})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})):saltos.app.modal("Select emails","You must select the desired emails to be deleted",{color:"warning"})},saltos.emails.delete2=()=>{saltos.app.modal("Delete this email???","Do you want to delete this email???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{var s=saltos.hash.get().split("/").at(3);saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/delete/"+s,success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"),saltos.driver.close())},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},abort:s=>{saltos.app.form.screen("unloading")},token:saltos.token.get(),lang:saltos.gettext.get()})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})},saltos.emails.send=()=>{var s,e,a;saltos.app.form.__backup.restore("two,one"),saltos.app.check_required()?(s=saltos.app.get_data(!0),e=void 0===(e=saltos.hash.get().split("/").at(3))?"":"/"+e,a=void 0===(a=saltos.hash.get().split("/").at(4))?"":"/"+a,saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/create/sendmail"+e+a,data:JSON.stringify(s),method:"post",content_type:"application/json",success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&("ok"==s.status?(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"),saltos.driver.close()):"ko"==s.status?saltos.app.toast("Response",s.text,{color:"danger"}):saltos.app.show_error(s))},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},abort:s=>{saltos.app.form.screen("unloading")},token:saltos.token.get(),lang:saltos.gettext.get()})):saltos.app.toast("Warning","Required fields not found",{color:"danger"})},saltos.emails.setter=s=>{var e=saltos.hash.get().split("/").at(3);saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/view/setter/"+e,data:JSON.stringify({what:s}),method:"post",content_type:"application/json",success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"),saltos.hash.trigger())},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},abort:s=>{saltos.app.form.screen("unloading")},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.emails.signature=()=>{var s=saltos.emails.old_account,e=document.getElementById("from").value,a=document.getElementById("body").value,t=document.getElementById("cc").value,o=document.getElementById("state_crt").value;saltos.emails.old_account=e,saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/create/signature",data:JSON.stringify({old:s,new:e,body:a,cc:t,state_crt:o}),method:"post",content_type:"application/json",success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&saltos.app.form.data(s.data)},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},abort:s=>{saltos.app.form.screen("unloading")},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.core.when_visible("from",()=>{saltos.emails.old_account=document.getElementById("from").value});
//# sourceMappingURL=emails.min.js.map