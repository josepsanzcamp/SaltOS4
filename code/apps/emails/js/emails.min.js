saltos.emails={},saltos.emails.init=e=>{var s;["create","view","close"].includes(e)&&saltos.core.when_visible("list",()=>{document.getElementById("list").parentElement.querySelectorAll("button").forEach(e=>{e.classList.remove("active"),e.removeAttribute("aria-current")})}),["list","view"].includes(e)&&(s=saltos.hash.get().split("/").at(-1),isNaN(parseInt(s))||saltos.core.when_visible("button_"+s,()=>{var e=document.getElementById("button_"+s),e=(e.classList.add("active"),e.setAttribute("aria-current","true"),e.classList.remove("fw-bold"),e.querySelector("h5").classList.remove("fw-bold"),e.querySelector("small.text-success"));e&&["New",T("New")].includes(e.innerHTML)&&(e.classList.remove("text-success"),e.innerHTML=T("Read"))}))},saltos.emails.server=()=>{saltos.app.ajax({url:"app/emails/action/server",success:e=>{for(var s in e)saltos.app.toast("Response",e[s]);saltos.window.send("saltos.emails.update")}})},saltos.emails.delete1=()=>{var e=saltos.app.checkbox_ids(document.getElementById("list").parentElement);e.length?(e=e.join(","),saltos.app.modal("Delete emails???","Do you want to delete the selected emails???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{saltos.app.ajax({url:"app/emails/delete/"+e,success:e=>{saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update")}})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})):saltos.app.modal("Select emails","You must select the desired emails to be deleted",{color:"warning"})},saltos.emails.delete2=()=>{saltos.app.modal("Delete this email???","Do you want to delete this email???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{var e=saltos.hash.get().split("/").at(3);saltos.app.ajax({url:"app/emails/delete/"+e,success:e=>{saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update"),saltos.driver.close()}})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})},saltos.emails.send=()=>{var e,s,t;saltos.app.form.__backup.restore("two,one"),saltos.app.check_required()?(e=saltos.app.get_data(!0),s=void 0===(s=saltos.hash.get().split("/").at(3))?"":"/"+s,t=void 0===(t=saltos.hash.get().split("/").at(4))?"":"/"+t,saltos.app.ajax({url:"app/emails/create/sendmail"+s+t,data:e,success:e=>{"ok"==e.status?(saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update"),saltos.driver.close()):"ko"==e.status?saltos.app.toast("Response",e.text,{color:"danger"}):saltos.app.show_error(e)}})):saltos.app.toast("Warning","Required fields not found",{color:"danger"})},saltos.emails.setter=e=>{var s=saltos.hash.get().split("/").at(3);saltos.app.ajax({url:"app/emails/view/setter/"+s,data:{what:e},success:e=>{saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update"),saltos.hash.trigger()}})},saltos.emails.signature=()=>{var e=saltos.emails.old_account,s=document.getElementById("from").value,t=document.getElementById("body").value,a=document.getElementById("cc").value,l=document.getElementById("state_crt").value;saltos.emails.old_account=s,saltos.app.ajax({url:"app/emails/create/signature",data:{old:e,new:s,body:t,cc:a,state_crt:l},success:e=>{saltos.app.form.data(e.data)}})},saltos.emails.viewpdf=()=>{var e=saltos.app.checkbox_ids(document.getElementById("list").parentElement);e.length?(e=e.join(","),saltos.driver.open("app/emails/view/viewpdf/"+e)):saltos.app.modal("Select emails","You must select the desired emails that you want see in the PDF file",{color:"warning"})},saltos.emails.download=()=>{var e=saltos.app.checkbox_ids(document.getElementById("list").parentElement);e.length?(e=e.join(","),saltos.app.download("app/emails/view/download/"+e)):saltos.app.modal("Select emails","You must select the desired emails that you want download in the PDF file",{color:"warning"})},saltos.core.when_visible("from",()=>{saltos.emails.old_account=document.getElementById("from").value});
//# sourceMappingURL=emails.min.js.map