saltos.emails={},saltos.emails.server=()=>{saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/action/server",success:s=>{if(saltos.app.form.screen("unloading"),saltos.app.check_response(s)){for(var e in s)if("array"==saltos.core.fix_key(e))for(var a in s[e])saltos.app.toast("Response",s[e][a]);saltos.window.send("saltos.emails.update")}},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.emails.delete1=()=>{var s=saltos.app.checkbox_ids(document.getElementById("list").parentElement);s.length?(s=s.join(","),saltos.app.modal("Delete emails???","Do you want to delete the selected emails???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/delete/"+s,success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"))},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})):saltos.app.modal("Select emails","You must select the desired emails to be deleted",{color:"warning"})},saltos.emails.delete2=()=>{saltos.app.modal("Delete this email???","Do you want to delete this email???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{var s=saltos.hash.get().split("/").at(3);saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/delete/"+s,success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"),saltos.driver.close())},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})},saltos.emails.send=()=>{var s,e,a;saltos.app.check_required()?(s=void 0===(s=saltos.hash.get().split("/").at(3))?"":"/"+s,e=void 0===(e=saltos.hash.get().split("/").at(4))?"":"/"+e,a=saltos.app.get_data(!0),saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/create/sendmail"+s+e,data:JSON.stringify(a),method:"post",content_type:"application/json",success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&("ok"==s.array.status?(saltos.app.toast("Response",s.array.text),saltos.window.send("saltos.emails.update"),saltos.driver.close()):"ko"==s.array.status?saltos.app.toast("Response",s.array.text,{color:"danger"}):saltos.app.show_error(s))},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})):saltos.app.toast("Warning","Required fields not found",{color:"danger"})},saltos.emails.download=s=>{saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?"+s,success:s=>{var e;saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&((e=document.createElement("a")).download=s.file.name,s.file.type="application/force-download",e.href=`data:${s.file.type};base64,`+s.file.data,e.click())},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.emails.setter=s=>{var e=saltos.hash.get().split("/").at(3);saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/view/setter/"+e,data:JSON.stringify({what:s}),method:"post",content_type:"application/json",success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&(saltos.app.toast("Response",s.text),saltos.window.send("saltos.emails.update"),saltos.hash.trigger())},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.emails.signature=()=>{var s=saltos.emails.old_account,e=document.getElementById("account_id").value,a=document.getElementById("body").value,t=document.getElementById("cc").value,o=document.getElementById("state_crt").value;saltos.emails.old_account=e,saltos.app.form.screen("loading"),saltos.core.ajax({url:"api/?app/emails/create/signature",data:JSON.stringify({old:s,new:e,body:a,cc:t,state_crt:o}),method:"post",content_type:"application/json",success:s=>{saltos.app.form.screen("unloading"),saltos.app.check_response(s)&&saltos.app.form.data(s.data)},error:s=>{saltos.app.form.screen("unloading"),saltos.app.show_error({text:s.statusText,code:s.status})},token:saltos.token.get(),lang:saltos.gettext.get()})},saltos.core.when_visible("account_id",()=>{saltos.emails.old_account=document.getElementById("account_id").value});
//# sourceMappingURL=emails.min.js.map