saltos.emails={},saltos.emails.init=e=>{if(["create","view","close"].includes(e)&&saltos.core.when_visible("list",()=>{const e=document.getElementById("list").parentElement;e.querySelectorAll("button").forEach(e=>{e.classList.remove("active"),e.removeAttribute("aria-current")})}),["list","view"].includes(e)){const t=saltos.hash.get().split("/").at(-1);isNaN(parseInt(t))||saltos.core.when_visible("button_"+t,()=>{const e=document.getElementById("button_"+t),s=(e.classList.add("active"),e.setAttribute("aria-current","true"),e.classList.remove("fw-bold"),e.querySelector("h5").classList.remove("fw-bold"),e.querySelector("small.text-success"));s&&["New",T("New")].includes(s.innerHTML)&&(s.classList.remove("text-success"),s.innerHTML=T("Read"))})}},saltos.emails.server=()=>{saltos.app.ajax({url:"app/emails/action/server",proxy:"network",success:e=>{for(var s in e)saltos.app.toast("Response",e[s]);saltos.window.send("saltos.emails.update")}})},saltos.emails.delete1=()=>{let e=saltos.app.checkbox_ids(document.getElementById("list").parentElement);e.length?(e=e.join(","),saltos.app.modal("Delete emails???","Do you want to delete the selected emails???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{saltos.app.ajax({url:"app/emails/delete/"+e,proxy:"network",success:e=>{saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update")}})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})):saltos.app.modal("Select emails","You must select the desired emails to be deleted",{color:"warning"})},saltos.emails.delete2=()=>{saltos.app.modal("Delete this email???","Do you want to delete this email???",{buttons:[{label:"Yes",color:"success",icon:"check-lg",autofocus:!0,onclick:()=>{const e=saltos.hash.get().split("/").at(3);saltos.app.ajax({url:"app/emails/delete/"+e,proxy:"network",success:e=>{saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update"),saltos.driver.close()}})}},{label:"No",color:"danger",icon:"x-lg",onclick:()=>{}}],color:"danger"})},saltos.emails.send=()=>{if(saltos.backup.restore("two,one"),saltos.app.check_required()){const t=saltos.app.get_data(!0);let e=saltos.hash.get().split("/").at(3),s=(e=void 0===e?"":"/"+e,saltos.hash.get().split("/").at(4));s=void 0===s?"":"/"+s,saltos.app.ajax({url:"app/emails/create/sendmail"+e+s,data:t,proxy:"network,queue",success:e=>{"ok"==e.status?(saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update"),saltos.autosave.clear("two,one"),saltos.driver.close()):"ko"==e.status?saltos.app.toast("Response",e.text,{color:"danger"}):saltos.app.show_error(e)}})}else saltos.app.toast("Warning","Required fields not found",{color:"danger"})},saltos.emails.setter=e=>{const s=saltos.hash.get().split("/").at(3);saltos.app.ajax({url:"app/emails/view/setter/"+s,proxy:"network",data:{what:e},success:e=>{saltos.app.toast("Response",e.text),saltos.window.send("saltos.emails.update"),saltos.hash.trigger()}})},saltos.emails.signature=()=>{const e=saltos.emails.old_account,s=document.getElementById("from").value,t=document.getElementById("body").value,a=document.getElementById("cc").value,l=document.getElementById("state_crt").value;saltos.emails.old_account=s,saltos.app.ajax({url:"app/emails/create/signature",data:{old:e,new:s,body:t,cc:a,state_crt:l},success:e=>{saltos.form.data(e.data)}})},saltos.emails.viewpdf=()=>{let e=saltos.app.checkbox_ids(document.getElementById("list").parentElement);e.length?(e=e.join(","),saltos.driver.open("app/emails/view/viewpdf/"+e)):saltos.app.modal("Select emails","You must select the desired emails that you want see in the PDF file",{color:"warning"})},saltos.emails.download=()=>{let e=saltos.app.checkbox_ids(document.getElementById("list").parentElement);e.length?(e=e.join(","),saltos.app.download("app/emails/view/download/"+e)):saltos.app.modal("Select emails","You must select the desired emails that you want download in the PDF file",{color:"warning"})},saltos.core.when_visible("from",()=>{saltos.emails.old_account=document.getElementById("from").value});
//# sourceMappingURL=emails.min.js.map