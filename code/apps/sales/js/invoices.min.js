saltos.invoices={},saltos.invoices.init=e=>{"view"==e&&document.querySelectorAll(".detail button, .footer button").forEach(e=>{e.closest(".col-auto").remove()}),["create","edit"].includes(e)&&(document.querySelectorAll("[id*=quantity], [id*=price], [id*=discount], [id*=tax]").forEach(e=>{e.removeEventListener("change",saltos.invoices.compute_total),e.addEventListener("change",saltos.invoices.compute_total)}),document.querySelectorAll("[id*=\\.total], #subtotal, #tax, #total").forEach(e=>{e.setAttribute("disabled","")}))},saltos.invoices.compute_total=()=>{let i=0,c=0,n=0;document.querySelectorAll(".detail").forEach(t=>{if(null!==t.querySelector("[id*=quantity]")){const o=t.querySelector("[id*=quantity]").value,l=t.querySelector("[id*=price]").value,a=t.querySelector("[id*=discount]").value,s=t.querySelector("[id*=tax]").value;let e=o*l*(1-a/100);e=Math.round(100*e)/100,t.querySelector("[id*=total]").value=e,i+=e,c+=e*(s/100),n+=e*(1+s/100)}}),document.getElementById("subtotal").value=i,document.getElementById("tax").value=c,document.getElementById("total").value=n},saltos.invoices.add_item=()=>{saltos.backup.restore("two,one");const e=saltos.form.__layout_template_helper("detail",saltos.core.uniqid()),t=saltos.form.layout(e,"div"),o=saltos.backup.__selector_helper("two,one");saltos.backup.save(o[0]),document.querySelector(".footer").before(t),saltos.invoices.init("edit")},saltos.invoices.remove_item=e=>{const t=Array.prototype.slice.call(e.closest(".row").childNodes);t.forEach(e=>{e.classList.contains("d-none")&&""!=e.querySelector("input").value?e.querySelector("input").value*=-1:e.remove()}),saltos.invoices.compute_total()},saltos.invoices.viewpdf=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.driver.open("app/invoices/view/viewpdf/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want see in the PDF file",{color:"danger"})},saltos.invoices.download=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.common.download("app/invoices/view/download/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want download in the PDF file",{color:"danger"})};
//# sourceMappingURL=invoices.min.js.map