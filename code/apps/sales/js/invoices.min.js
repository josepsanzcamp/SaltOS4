saltos.invoices={},saltos.invoices.init=e=>{},saltos.invoices.colWidths_concepts=e=>{if(0!=e)return 100;{const t=document.getElementById("concepts").parentElement.offsetWidth-2;return Math.floor(t-500)}},saltos.invoices.cells_concepts=(e,t,o)=>4==t?{type:"dropdown",source:document.getElementById("alltaxes").data.map(e=>e.value)}:5==t?{readOnly:!0}:{},saltos.invoices.colWidths_taxes=e=>{if(0!=e)return 100;{const t=document.getElementById("taxes").parentElement.offsetWidth-2;return Math.floor(t-200)}},saltos.invoices.cells_taxes=(e,t,o)=>({readOnly:!0}),saltos.invoices.colWidths_totals=e=>{const t=document.getElementById("taxes").parentElement.offsetWidth-2;return Math.floor(t/3)},saltos.invoices.cells_totals=(e,t,o)=>({readOnly:!0}),saltos.invoices.afterChange_concepts=(e,t)=>{if(console.log(t),"edit"==t){const i=document.getElementById("concepts").data;for(var o in i){const u=i[o];let t=!0;for(let e=1;e<=3;e++)saltos.core.is_number(u[e])?u[e]=parseFloat(u[e]):3==e&&t?u[3]=0:t=!1;t&&(u[5]=u[1]*u[2]*(1-u[3]/100),u[5]=Math.round(100*u[5])/100)}document.getElementById("concepts").excel.updateSettings({});const c={},d=document.getElementById("alltaxes").data;for(var n in i){const m=i[n],v=m[4],p=m[5];if(!(v in c)){const f=d.find(e=>e.value==v);if(!f)continue;c[v]=[f.name,0,0]}c[v][1]+=p}for(var s in c)c[s][2]=c[s][1]*s/100;for(var a in c)c[a][1]=Math.round(100*c[a][1])/100,c[a][2]=Math.round(100*c[a][2])/100;document.getElementById("taxes").set(Object.values(c));const r=[0,0,0];for(var l in c)r[0]+=c[l][1],r[1]+=c[l][2];r[2]=r[0]+r[1],r[0]=Math.round(100*r[0])/100,r[1]=Math.round(100*r[1])/100,r[2]=Math.round(100*r[2])/100,document.getElementById("totals").set([r])}},saltos.invoices.viewpdf=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.driver.open("app/invoices/view/viewpdf/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want see in the PDF file",{color:"danger"})},saltos.invoices.download=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.common.download("app/invoices/view/download/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want download in the PDF file",{color:"danger"})};
//# sourceMappingURL=invoices.min.js.map