saltos.invoices={},saltos.invoices.init=e=>{},saltos.invoices.colWidths_concepts=e=>{if(0!=e)return 100;{const t=document.getElementById("concepts").parentElement.offsetWidth-2;return Math.floor(t-500)}},saltos.invoices.cells_concepts=(e,t,o)=>4==t?{type:"dropdown",source:document.getElementById("alltaxes").data.map(e=>e.value)}:5==t?{readOnly:!0}:{},saltos.invoices.colWidths_taxes=e=>{if(0!=e)return 100;{const t=document.getElementById("taxes").parentElement.offsetWidth-2;return Math.floor(t-200)}},saltos.invoices.cells_taxes=(e,t,o)=>({readOnly:!0}),saltos.invoices.colWidths_totals=e=>{const t=document.getElementById("taxes").parentElement.offsetWidth-2;return Math.floor(t/3)},saltos.invoices.cells_totals=(e,t,o)=>({readOnly:!0}),saltos.invoices.afterChange_concepts=(e,t)=>{if("edit"==t){const c=document.getElementById("concepts").data;for(var o in c){const u=c[o];let t=!0;for(let e=1;e<=3;e++)saltos.core.is_number(u[e])?u[e]=parseFloat(u[e]):3==e&&t?u[3]=0:t=!1;t&&(u[5]=u[1]*u[2]*(1-u[3]/100),u[5]=Math.round(100*u[5])/100)}document.getElementById("concepts").excel.updateSettings({});const i={},d=document.getElementById("alltaxes").data;for(var n in c){const m=c[n],v=m[4];if(saltos.core.is_number(v)){const p=m[5];if(!(v in i)){const h=d.find(e=>e.value==v);if(!h)continue;i[v]=[h.name,0,0]}i[v][1]+=p}}for(var s in i)i[s][2]=i[s][1]*s/100;for(var l in i)i[l][1]=Math.round(100*i[l][1])/100,i[l][2]=Math.round(100*i[l][2])/100;Object.keys(i).length?document.getElementById("taxes").set(Object.values(i)):document.getElementById("taxes").set([[null,null,null]]);const r=[0,0,0];for(var a in i)r[0]+=i[a][1],r[1]+=i[a][2];r[2]=r[0]+r[1],r[0]=Math.round(100*r[0])/100,r[1]=Math.round(100*r[1])/100,r[2]=Math.round(100*r[2])/100,Object.keys(i).length?document.getElementById("totals").set([r]):document.getElementById("totals").set([[null,null,null]])}},saltos.invoices.viewpdf=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.driver.open("app/invoices/view/viewpdf/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want see in the PDF file",{color:"danger"})},saltos.invoices.download=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.common.download("app/invoices/view/download/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want download in the PDF file",{color:"danger"})};
//# sourceMappingURL=invoices.min.js.map