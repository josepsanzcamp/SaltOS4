saltos.invoices={},saltos.invoices.init=e=>{"view"==e&&document.querySelectorAll(".detail button, .footer button").forEach(e=>{e.closest(".col-auto").remove()}),["create","edit"].includes(e)&&(document.querySelectorAll("[id*=unidades], [id*=precio], [id*=descuento]").forEach(e=>{e.removeEventListener("change",saltos.invoices.compute_total),e.addEventListener("change",saltos.invoices.compute_total)}),document.querySelectorAll("[id*=total], #total").forEach(e=>{e.setAttribute("disabled","")}))},saltos.invoices.compute_total=()=>{var t=0;document.querySelectorAll(".detail").forEach(e=>{var o;null!==e.querySelector("[id*=unidades]")&&(o=e.querySelector("[id*=unidades]").value*e.querySelector("[id*=precio]").value*(1-e.querySelector("[id*=descuento]").value/100),o=Math.round(100*o)/100,e.querySelector("[id*=total]").value=o,t+=o)}),document.getElementById("total").value=t},saltos.invoices.add_item=()=>{saltos.app.form.__backup.restore("two,one");var e=saltos.app.form.__layout_template_helper("detail",saltos.core.uniqid()),e=saltos.app.form.layout(e,"div");document.querySelector(".footer").before(e),saltos.invoices.init("edit")},saltos.invoices.remove_item=e=>{Array.prototype.slice.call(e.closest(".row").childNodes).forEach(e=>{e.classList.contains("d-none")&&""!=e.querySelector("input").value?e.querySelector("input").value*=-1:e.remove()}),saltos.invoices.compute_total()},saltos.invoices.viewpdf=()=>{var e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.driver.open("app/invoices/view/viewpdf/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want see in the PDF file",{color:"warning"})},saltos.invoices.download=()=>{var e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.app.download("app/invoices/view/download/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want download in the PDF file",{color:"warning"})};
//# sourceMappingURL=invoices.min.js.map