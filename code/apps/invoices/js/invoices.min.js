saltos.invoices={},saltos.invoices.init=e=>{"view"==e&&document.querySelectorAll(".detail button, .footer button").forEach(e=>{e.closest(".col-auto").remove()}),["create","edit"].includes(e)&&(document.querySelectorAll("[id*=unidades], [id*=precio], [id*=descuento]").forEach(e=>{e.removeEventListener("change",saltos.invoices.compute_total),e.addEventListener("change",saltos.invoices.compute_total)}),document.querySelectorAll("[id*=total], #total").forEach(e=>{e.setAttribute("disabled","")}))},saltos.invoices.compute_total=()=>{let s=0;document.querySelectorAll(".detail").forEach(t=>{if(null!==t.querySelector("[id*=unidades]")){const o=t.querySelector("[id*=unidades]").value,l=t.querySelector("[id*=precio]").value,i=t.querySelector("[id*=descuento]").value;let e=o*l*(1-i/100);e=Math.round(100*e)/100,t.querySelector("[id*=total]").value=e,s+=e}}),document.getElementById("total").value=s},saltos.invoices.add_item=()=>{saltos.app.__backup.restore("two,one");const e=saltos.app.form.__layout_template_helper("detail",saltos.core.uniqid()),t=saltos.app.form.layout(e,"div");document.querySelector(".footer").before(t),saltos.invoices.init("edit")},saltos.invoices.remove_item=e=>{const t=Array.prototype.slice.call(e.closest(".row").childNodes);t.forEach(e=>{e.classList.contains("d-none")&&""!=e.querySelector("input").value?e.querySelector("input").value*=-1:e.remove()}),saltos.invoices.compute_total()},saltos.invoices.viewpdf=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.driver.open("app/invoices/view/viewpdf/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want see in the PDF file",{color:"warning"})},saltos.invoices.download=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.app.download("app/invoices/view/download/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want download in the PDF file",{color:"warning"})};
//# sourceMappingURL=invoices.min.js.map