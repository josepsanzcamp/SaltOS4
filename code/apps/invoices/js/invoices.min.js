saltos.invoices={},saltos.invoices.init=e=>{"view"==e&&document.querySelectorAll(".detail button, .footer button").forEach(e=>{e.closest(".col-auto").remove()}),["create","edit"].includes(e)&&(document.querySelectorAll("[id*=unidades], [id*=precio], [id*=descuento]").forEach(e=>{e.removeEventListener("change",saltos.invoices.compute_total),e.addEventListener("change",saltos.invoices.compute_total)}),document.querySelectorAll("[id*=total], #total").forEach(e=>{e.setAttribute("disabled","")}))},saltos.invoices.compute_total=()=>{let i=0;document.querySelectorAll(".detail").forEach(o=>{if(null!==o.querySelector("[id*=unidades]")){const t=o.querySelector("[id*=unidades]").value,l=o.querySelector("[id*=precio]").value,s=o.querySelector("[id*=descuento]").value;let e=t*l*(1-s/100);e=Math.round(100*e)/100,o.querySelector("[id*=total]").value=e,i+=e}}),document.getElementById("total").value=i},saltos.invoices.add_item=()=>{saltos.backup.restore("two,one");const e=saltos.form.__layout_template_helper("detail",saltos.core.uniqid()),o=saltos.form.layout(e,"div"),t=saltos.backup.__selector_helper("two,one");saltos.backup.save(t[0]),document.querySelector(".footer").before(o),saltos.invoices.init("edit")},saltos.invoices.remove_item=e=>{const o=Array.prototype.slice.call(e.closest(".row").childNodes);o.forEach(e=>{e.classList.contains("d-none")&&""!=e.querySelector("input").value?e.querySelector("input").value*=-1:e.remove()}),saltos.invoices.compute_total()},saltos.invoices.viewpdf=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.driver.open("app/invoices/view/viewpdf/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want see in the PDF file",{color:"danger"})},saltos.invoices.download=()=>{let e=saltos.app.checkbox_ids(document.getElementById("table"));e.length?(e=e.join(","),saltos.common.download("app/invoices/view/download/"+e)):saltos.app.modal("Select invoices","You must select the desired invoices that you want download in the PDF file",{color:"danger"})};
//# sourceMappingURL=invoices.min.js.map